(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{106:function(e,t,n){},130:function(e,t){},132:function(e,t){},147:function(e,t,n){},148:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n.n(i),c=(n(106),n(12)),o=n(4),l=n(11),d=n(3),u=n(13),j=n(9),b=n(167),h={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta"},p={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",tools:"Tools",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired"},f=n(107).default,O=n(125),m=f.create({httpsAgent:new O.Agent({})}),x={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function v(e,t,n){var r={username:"".concat(e),password:"".concat(t),tenant:"".concat(n)},a={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:I()}},i=F+"/login";return new Promise((function(e,t){m.post(i,r,a).then((function(t){localStorage.setItem("diten-token",t.data.token),localStorage.setItem("diten-token-expiration-time",t.data.token_expiration_time),localStorage.setItem("diten-username",t.data.user.username),localStorage.setItem("diten-user-role",t.data.user.type),localStorage.setItem("diten-user-tenant",n),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function g(e,t){return y.apply(this,arguments)}function y(){return y=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s,c,l=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},void 0===(a=l.length>3&&void 0!==l[3]?l[3]:void 0)&&(a=I()),i=F+"/"+t+"/file",console.log("POST file:"+i),s={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(r).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];s[n]=r})),c={headers:s},e.abrupt("return",new Promise((function(e,r){m.post(i,n,c).then((function(n){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:n})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),r({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function k(e,t){return w.apply(this,arguments)}function w(){return w=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(r=s.length>2&&void 0!==s[2]?s[2]:void 0)&&(r=I()),a=F+"/"+t+"/",console.log("POST :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},console.log({header:i,body:n,token:r}),e.abrupt("return",new Promise((function(e,r){m.post(a,n,i).then((function(n){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:n})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function S(e,t,n){return C.apply(this,arguments)}function C(){return C=Object(l.a)(Object(o.a)().mark((function e(t,n,r){var a,i,s,c=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:void 0,i=F+"/"+t+"/"+r,void 0===a&&(a=I()),console.log("PUT :"+i),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){m.put(i,n,s).then((function(a){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)}),e({response:a})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function N(e,t){return _.apply(this,arguments)}function _(){return _=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:void 0,a=F+"/"+t,void 0===r&&(r=I()),void 0!==n&&(a+="/"+n),console.log("DELETE :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},e.abrupt("return",new Promise((function(e,r){m.delete(a,i).then((function(r){void 0!==n?x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+n+", of type: "+t}):x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:r})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+n+", of type: "+t+". "+e.message}),404===e.statusCode&&x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function A(e){return D.apply(this,arguments)}function D(){return D=Object(l.a)(Object(o.a)().mark((function e(t){var n,r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,a=F+"/"+t+"/",void 0===r&&(r=I()),a=void 0!==n.filter?a.concat("?filter="+n.filter):a.concat("?filter="),void 0!==n.limit&&(a=a.concat("&limit="+n.limit)),void 0!==n.page&&(a=a.concat("&page="+n.page)),console.log("GET :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r},json:!0},e.abrupt("return",new Promise((function(e,t){m.get(a,i).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function I(){return localStorage.getItem("diten-token")}var F="https://hi-drive.measurify.org:8080/v1",T="Admin Dashboard",P=[],R={protocols:["_id","description","actions"],experiments:["_id","description","protocol","actions"]},z={},B={protocols:["view","delete"],experiments:["view","delete"]},W={protocols:["_id","description","metadata"],experiments:["_id","description","protocol","metadata"]},E={},L={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:""}},K={},H={tenants:["form"],protocols:["form","file"],experiments:["form","file"]},G={};function J(){var e=localStorage.getItem("diten-language");return 0===P.length?p:(1===P.length&&(e=P[0]),"it"===e?h:"en"===e?p:"it"===navigator.language.substring(0,2)?h:(navigator.language.substring(0,2),p))}n(147),n(148);var U=n(0),M=function(){function e(e){localStorage.setItem("diten-language",e),window.location.reload()}return Object(U.jsxs)("div",{children:[J().language,Object(U.jsxs)("div",{children:[Object(U.jsx)(b.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),Object(U.jsx)(b.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},q=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),s=Object(d.a)(i,2),c=s[0],j=s[1],h=Object(r.useState)(""),p=Object(d.a)(h,2),f=p[0],O=p[1],m=Object(r.useState)(!0),x=Object(d.a)(m,2),g=x[0],y=(x[1],Object(r.useState)("")),k=Object(d.a)(y,2),w=k[0],S=k[1];function C(){return(C=Object(l.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v(n,c,f);case 4:e.sent,!0===g?localStorage.setItem("diten-logged-in","keep"):localStorage.setItem("diten-logged-in","logout"),window.location.replace("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log({error:e.t0.response.data}),S(e.t0.response.data.message+" : "+e.t0.response.data.details);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(U.jsxs)("div",{className:"auth-page",children:[Object(U.jsxs)("div",{className:"title-wrapper",children:[Object(U.jsx)("div",{className:"title-section",children:"Measurify"}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),P.length>1&&Object(U.jsx)("div",{className:"language-wrapper",children:Object(U.jsx)(M,{})}),Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsxs)("div",{className:"login-section",children:[Object(U.jsx)("h4",{children:J().login}),Object(U.jsxs)("form",{className:"form-content",onSubmit:function(e){return C.apply(this,arguments)},children:[Object(U.jsxs)("div",{className:"form-row row",children:[Object(U.jsx)("label",{children:J().username}),Object(U.jsx)("input",{type:"text",id:"username",placeholder:J().username_suggestion,onChange:function(e){a(e.target.value)}})]}),Object(U.jsxs)("div",{className:"form-row row",children:[Object(U.jsx)("label",{children:J().password}),Object(U.jsx)("input",{type:"password",id:"password",placeholder:J().password_suggestion,onChange:function(e){j(e.target.value)}})]}),Object(U.jsxs)("div",{className:"form-row row",children:[Object(U.jsx)("label",{children:J().tenant}),Object(U.jsx)("input",{type:"text",id:"tenant",placeholder:J().tenant_suggestion,onChange:function(e){O(e.target.value)}})]}),Object(U.jsx)("div",{className:"buttons-wrapper center",children:Object(U.jsx)(b.a,{type:"submit",variant:"success",children:J().submit})}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{style:{color:"red"},children:w}),Object(U.jsx)("br",{}),Object(U.jsx)("div",{className:"form-row row",children:Object(U.jsx)(u.b,{to:"/add/tenants",children:Object(U.jsxs)(b.a,{variant:"outline-success",size:"sm",children:[J().add_tenant,Object(U.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})]})},V=(n(150),function(){return Object(r.useEffect)((function(){})),Object(U.jsxs)("div",{className:"page",children:[Object(U.jsx)("header",{className:"page-header",children:T}),Object(U.jsx)("main",{className:"page-content",children:Object(U.jsx)("div",{className:"home-page",children:Object(U.jsx)("div",{className:"info-box",children:Object(U.jsxs)("div",{className:"info-text",children:[J().welcome_hp,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),J().left_bar_descr_hp,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),J().right_bar_descr_hp,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),J().session_expire_info_hp,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:J().github_issue_page_hp}),Object(U.jsx)("br",{})]})})})})]})}),Y=(n(151),function(){return Object(U.jsxs)("div",{className:"notFound-page",children:[J().oh_no,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),J().broken_link,Object(U.jsx)("br",{}),Object(U.jsx)("br",{}),Object(U.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:J().github_issue_page_hp})]})}),Q=(n(152),n(50)),X=n(16);Q.a.library.add(X.g,X.a,X.l,X.j,X.i,X.k,X.h,X.b);var Z=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(),c=Object(d.a)(s,2),o=c[0],l=c[1],j=Object(r.useState)(),h=Object(d.a)(j,2),p=h[0],f=h[1],O=Object(r.useState)(),x=Object(d.a)(O,2),v=x[0],g=x[1],y=Object(r.useState)(),k=Object(d.a)(y,2),w=k[0],S=k[1],C=Object(r.useState)(),N=Object(d.a)(C,2),_=N[0],A=N[1],D=Object(r.useState)(),T=Object(d.a)(D,2),z=T[0],B=T[1],W=Object(r.useState)("00:00"),E=Object(d.a)(W,2),L=E[0],K=E[1];function H(){var e;if(void 0===w){var t=localStorage.getItem("diten-login-time");null!==t?(e=parseInt(t),S(parseInt(t))):e=Date.now()}else e=w;var n=(e+function(){var e;if(void 0===_){var t=localStorage.getItem("diten-token-expiration-time");null!==t?(e=t,A(t)):e="5m"}else e=_;return e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()-Date.now())/1e3;if(n<60&&"keep"===z&&function(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:I()}},t=F+"/login";return new Promise((function(n,r){m.put(t,{},e).then((function(e){localStorage.setItem("diten-token",e.data.token),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),n(e)})).catch((function(e){r(e)}))}))}().then((function(){S(void 0)})),n<=0)return localStorage.clear(),K(J().session_expired),void window.location.replace("/");var r=Math.floor(n/60),a=Math.floor(n%60);K(r+" : "+("0"+a).slice(-2))}return Object(r.useEffect)((function(){var e=localStorage.getItem("diten-username"),t=localStorage.getItem("diten-user-role"),n=localStorage.getItem("diten-user-tenant"),r=localStorage.getItem("diten-login-time"),a=localStorage.getItem("diten-token-expiration-time"),i=localStorage.getItem("diten-logged-in");l(null!==e?e:""),f(null!==t?t:""),g(null!==n&&""!==n?n:"-"),A(null!==a?a:"300m"),B(null!==i?i:"logout"),S(null!==r?parseInt(r):Date.now()),setTimeout((function(){H()}),1e3)}),[L]),Object(U.jsxs)("nav",{className:"app-nav",children:[Object(U.jsx)(b.a,{className:"app-nav-opener",onClick:function(){return i(!n)},children:n?Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(U.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(U.jsx)("hr",{}),Object(U.jsxs)("div",{className:"data-wrapper",children:[Object(U.jsxs)("div",{children:[Object(U.jsxs)("h3",{children:[J().welcome+" ",Object(U.jsx)(u.b,{to:"/viewProfile/",children:Object(U.jsx)("b",{children:o})},"viewProfile")]}),Object(U.jsxs)("h3",{children:[J().role+" ","admin"===p?Object(U.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===p?Object(U.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===p?Object(U.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===p?Object(U.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(U.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]}),Object(U.jsxs)("h3",{children:[J().tenant+" ",Object(U.jsx)("b",{children:v})]})]}),Object(U.jsx)("br",{}),Object(U.jsx)(b.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:J().logout}),P.length>1&&Object(U.jsxs)(a.a.Fragment,{children:[Object(U.jsx)("hr",{}),Object(U.jsx)("h2",{children:Object(U.jsx)(M,{})})]})]}),Object(U.jsx)("hr",{}),Object(U.jsx)("div",{className:"app-nav-wrapper ".concat(n?"opened":""),children:Object(U.jsxs)("div",{className:"app-nav-links",children:[Object(U.jsx)("div",{className:"app-nav-text",children:J().tools}),Object(U.jsx)("hr",{}),Object.keys(R).map((function(e){return Object(U.jsx)(u.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return i(!1)},children:e},e)}))]})})]})},$=n(168),ee=n(176),te=n(101),ne=n(173);function re(e){var t={};return console.log({props:e}),W[e.resType].map((function(n){console.log(n.constructor===Object),n.constructor===Object?Object.keys(n).map((function(r){Array.isArray(e.resource[r])?t[r]=e.resource[r].map((function(e){var t={};return n[r].map((function(n){t[n]=e[n]})),t})):t[r]=e.resource[r]})):Object.keys(e.resource).includes(n)&&(t[n]=e.resource[n])})),console.log({toShow:t}),ae(t)}function ae(e){return Object(U.jsx)(ee.a,{defaultActiveKey:0,size:"lg",children:a.a.Children.toArray(Object.entries(e).map((function(e,t){var n=Object(d.a)(e,2),r=n[0],i=n[1];return Object(U.jsxs)(ee.a.Item,{eventKey:t,children:[Object(U.jsx)(ee.a.Header,{children:Object(U.jsx)("b",{children:r})}),Object(U.jsx)(ee.a.Body,{children:i instanceof Object?Array.isArray(i)?void 0!==i[0]?Object.values(i[0]).some((function(e){return e instanceof Object}))?a.a.Children.toArray(i.map((function(e,t){return Object(U.jsx)(ee.a,{children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsxs)(ee.a.Header,{children:[r," ",Object(U.jsxs)("i",{children:["[",t,"]"]})]}),Object(U.jsx)(ee.a.Body,{children:ae(e)})]})})}))):i[0]instanceof Object?Object(U.jsxs)($.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(U.jsx)("thead",{children:Object(U.jsx)("tr",{children:a.a.Children.toArray(Object.keys(i[0]).map((function(e){return Object(U.jsx)("th",{children:e})})))})}),Object(U.jsx)("tbody",{children:a.a.Children.toArray(i.map((function(e){return Object(U.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(U.jsx)("td",{children:e})})))})})))})]}):"[ "+i.join(" , ")+" ]":"[ ]":"AAAA":void 0===i||null==i?Object(U.jsx)("i",{children:"None"}):i})]})})))})}function ie(e){var t=Object(r.useState)(void 0),n=Object(d.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){}),[e]);var s=void 0!==a?Object(U.jsxs)(te.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:"400px"},children:[Object(U.jsx)(te.a.Header,{as:"h3",children:"View Resource"}),Object(U.jsx)(te.a.Body,{children:Object(U.jsx)(re,{resource:a,resType:e.resType})})]}):Object(U.jsx)(te.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(U.jsxs)(te.a.Header,{as:"h3",children:["Loading",Object(U.jsx)(te.a.Body,{})]})});return"view"===e.action?Object(U.jsx)(ne.a,{trigger:"click",placement:"left",overlay:s,rootClose:!0,children:Object(U.jsx)(b.a,{variant:"link",size:"sm",onClick:function(){i(e.takeSingle(e.id))},children:Object(U.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(U.jsx)(b.a,{variant:"link",size:"sm",onClick:Object(l.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,N(e.resType,e.id);case 5:200==t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(U.jsx)(u.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(U.jsx)(b.a,{variant:"link",size:"sm",children:Object(U.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(U.jsx)(u.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(U.jsx)(b.a,{variant:"link",size:"sm",children:Object(U.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(U.jsx)("div",{})}function se(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(U.jsx)("div",{children:"Loading"}):Object(U.jsx)("div",{children:Object(U.jsxs)($.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(U.jsx)("thead",{children:Object(U.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==z[e.resType]&&void 0!==z[e.resType][t]?Object(U.jsx)("th",{children:z[e.resType][t]}):Object(U.jsx)("th",{children:t})})))},"header")}),Object(U.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,n){return Object(U.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(r){return"actions"===r?Object(U.jsxs)("td",{children:[e.actions.includes("view")?Object(U.jsx)(ie,{resType:e.resType,action:"view",k:n+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")?Object(U.jsx)(ie,{resType:e.resType,action:"edit",k:n+"_edit",id:t._id}):"",e.actions.includes("duplicate")?Object(U.jsx)(ie,{resType:e.resType,action:"duplicate",k:n+"_duplicate",id:t._id}):"",e.actions.includes("delete")?Object(U.jsx)(ie,{resType:e.resType,action:"delete",k:n+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[r]?Array.isArray(t[r])?Object(U.jsx)("td",{children:"[ "+t[r].join(" , ")+" ]"}):Object(U.jsx)("td",{children:t[r]}):void 0})))})})))})]})})}Q.a.library.add(X.d,X.e,X.c);var ce=n(179);n(98);function oe(e){var t=Object(j.p)().page,n=Object(u.c)(),a=Object(d.a)(n,2),i=a[0],s=a[1],c=Object(r.useState)(void 0),h=Object(d.a)(c,2),p=h[0],f=h[1],O=Object(r.useState)(void 0),m=Object(d.a)(O,2),x=m[0],v=m[1],g=Object(r.useState)(void 0),y=Object(d.a)(g,2),k=y[0],w=y[1],S=Object(r.useState)(1),C=Object(d.a)(S,2),N=C[0],_=C[1],D=Object(r.useState)(1),I=Object(d.a)(D,2),F=I[0],T=I[1],P=Object(r.useState)(),z=Object(d.a)(P,2),W=z[0],E=z[1],K=Object(r.useState)(),H=Object(d.a)(K,2),G=H[0],J=H[1],M=Object(r.useState)(),q=Object(d.a)(M,2),V=q[0],Y=q[1],Q=Object(r.useState)(),X=Object(d.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(),te=Object(d.a)(ee,2),ne=te[0],re=te[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var n,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,A(t,n);case 4:r=e.sent,v(R[t]),f(r.docs),void 0!==B[t]&&w(B[t]),E(r.hasNextPage),J(r.hasPrevPage),re(r.totalPages),Y(r.prevPage),$(r.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),f(void 0),E(void 0),J(void 0),re(void 0),Y(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),n=null!==i.get("page")?i.get("page"):1;_(n);var r=null!==i.get("limit")?i.get("limit"):10;T(r),e({page:n,limit:r}).catch(console.error)}),[e,t,i]);var ae=function(){var e=parseInt(N,10)-2>0,t=parseInt(N,10)+2<ne;return Object(U.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(U.jsxs)(ce.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(U.jsx)(ce.a.First,{disabled:1===N,onClick:function(){return s({page:1,limit:F})}}),Object(U.jsx)(ce.a.Prev,{disabled:!G,onClick:function(){return s({page:V,limit:F})}}),e&&Object(U.jsx)(ce.a.Ellipsis,{}),parseInt(N,10)-1>0&&Object(U.jsx)(ce.a.Item,{onClick:function(){return s({page:parseInt(N,10)-1,limit:F})},children:parseInt(N,10)-1}),Object(U.jsx)(ce.a.Item,{children:Object(U.jsx)("b",{children:N})}),parseInt(N,10)+1<=ne&&Object(U.jsx)(ce.a.Item,{onClick:function(){return s({page:parseInt(N,10)+1,limit:F})},children:parseInt(N,10)+1}),t&&Object(U.jsx)(ce.a.Ellipsis,{}),Object(U.jsx)(ce.a.Next,{disabled:!W,onClick:function(){return s({page:Z,limit:F})}}),Object(U.jsx)(ce.a.Last,{disabled:N===ne,onClick:function(){return s({page:ne,limit:F})}})]})})};return Object(U.jsxs)("div",{className:"page",children:[Object(U.jsxs)("header",{className:"page-header",children:[t,void 0!==L[t]&&Object(U.jsx)(u.b,{to:"/add/"+t+"/",children:Object(U.jsx)(b.a,{variant:"link",size:"sm",children:Object(U.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(U.jsxs)("main",{className:"page-content",children:[Object(U.jsx)(se,{resType:t,header:x,resources:p,actions:k,takeSingle:function(e){return p.find((function(t){return t._id===e}))},removeSingle:function(e){var t=p.filter((function(t){return t._id!==e}));f(t)}}),Object(U.jsx)(ae,{})]})]})}Q.a.library.add(X.f);var le=n(169),de=n(170),ue=n(100),je=n(175);function be(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(""),c=Object(d.a)(s,2),u=c[0],j=c[1],h=Object(r.useState)(""),p=Object(d.a)(h,2),f=p[0],O=p[1],m=Object(r.useState)(""),x=Object(d.a)(m,2),v=x[0],g=x[1],y=Object(r.useState)(""),k=Object(d.a)(y,2),w=k[0],C=k[1],N=Object(r.useState)(""),_=Object(d.a)(N,2),A=_[0],D=_[1];Object(r.useEffect)((function(){var e=localStorage.getItem("diten-username"),t=localStorage.getItem("diten-user-role"),n=localStorage.getItem("diten-user-tenant");i(null!==e?e:""),j(null!==t?t:""),O(null!==n&&""!==n?n:"-")}),[]);var I=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v===w){e.next=4;break}return D(J().pass_not_match),e.abrupt("return");case 4:if(""!=v&&""!==w){e.next=7;break}return D(J().pass_not_null),e.abrupt("return");case 7:if(!window.confirm(J().pass_change_confirm)){e.next=22;break}return e.prev=9,e.next=12,S("users",{password:v},a);case 12:n=e.sent,console.log({response:n}),g(""),C(""),200===n.response.status&&D(J().password_changed),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"page",children:[Object(U.jsxs)("header",{className:"page-header",children:[J().welcome,"\xa0",Object(U.jsx)("b",{children:"username"}),":\xa0",J().profile_page_desc]}),Object(U.jsxs)("main",{className:"page-content",children:[Object(U.jsxs)(le.a,{fluid:!0,children:[Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{xs:1,children:"Username:\xa0"}),Object(U.jsx)(ue.a,{children:Object(U.jsx)("b",{children:a})})]}),Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{xs:1,children:J().role}),Object(U.jsxs)(ue.a,{children:[u,"\xa0","admin"===u?Object(U.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===u?Object(U.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===u?Object(U.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===u?Object(U.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(U.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{xs:1,children:J().tenant+" "}),Object(U.jsx)(ue.a,{children:Object(U.jsx)("b",{children:f})})]})]}),Object(U.jsx)("hr",{}),Object(U.jsxs)(le.a,{fluid:!0,children:[Object(U.jsx)(ue.a,{children:Object(U.jsx)(de.a,{children:Object(U.jsx)("b",{children:"Edit password"})})}),Object(U.jsx)(de.a,{children:Object(U.jsx)(ue.a,{children:Object(U.jsxs)(je.a,{onSubmit:I,children:[Object(U.jsx)(de.a,{children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:v,placeholder:J().enter+" new password"})})}),Object(U.jsx)(de.a,{children:Object(U.jsxs)(je.a.Group,{className:"mb-3",children:[Object(U.jsx)(je.a.Control,{type:"password",onChange:function(e){e.preventDefault(),C(e.target.value)},value:w,placeholder:J().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(U.jsx)(je.a.Text,{id:"passwordHelpBlock",muted:!0,children:A})]})}),Object(U.jsx)(b.a,{variant:"primary",type:"submit",children:J().submit})]})})})]})]})]})}n(155),n(156);function he(){return Object(U.jsx)("div",{className:"unAuth-page",children:Object(U.jsx)("div",{className:"info-box",children:Object(U.jsx)("div",{className:"info-text",children:J().unauthorised_user})})})}var pe=n(171),fe=n(174),Oe=n(172),me=n(178),xe=a.a.createContext();function ve(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],i=n[1],s=Object(r.useContext)(xe);return Object(U.jsxs)("div",{children:[Object(U.jsxs)(b.a,{variant:"link",onClick:function(){i(!0)},style:{color:"#fff",textDecoration:"none"},children:[J().notifications,"  ",Object(U.jsx)(pe.a,{pill:!0,bg:"success",children:s.notifications.length}),Object(U.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(U.jsxs)(fe.a,{style:{backgroundColor:"#123651",color:"#fff"},show:a,onHide:function(){return i(!1)},placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(U.jsx)(fe.a.Header,{children:Object(U.jsxs)(fe.a.Title,{children:[J().notifications,"  ",Object(U.jsx)(pe.a,{pill:!0,bg:"success",children:s.notifications.length})]})}),Object(U.jsx)(fe.a.Body,{children:Object(U.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==s.notifications.length&&Object(U.jsx)(b.a,{variant:"warning",onClick:function(){return s.ClearNotifications()},children:J().clear_all}),Object(U.jsx)(Oe.a,{children:s.notifications.map((function(e,t){var n;return"info"===e.name&&(n="success"),"error"===e.name&&(n="danger"),Object(U.jsxs)(me.a,{className:"d-inline-block m-1",bg:n,animation:!0,onClose:function(){s.RemoveNotification(t)},children:[Object(U.jsxs)(me.a.Header,{children:[Object(U.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(U.jsx)("strong",{className:"me-auto",children:e.name}),Object(U.jsx)("small",{children:e.time.slice(0,15)})]}),Object(U.jsx)(me.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}var ge,ye=n(10),ke=n(2),we=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var n=!0;return t.forEach((function(t){n=n&&e(t)})),n}if(t.constructor===Object){var r=!0;return Object.entries(t).forEach((function(t){var n=Object(d.a)(t,2),a=(n[0],n[1]);r=r&&e(a)})),r}},Se=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!we(e)})).length},Ce=function e(t){if(Array.isArray(t),t.constructor===Object)for(var n=Object.entries(t),r=0;r<n.length;r++){if(Array.isArray(n[r][1]))for(var a=0;a<n[r][1].length;a++)n[r][1][a].constructor===Object||Array.isArray(n[r][1][a])?(e(n[r][1][a]),we(n[r][1][a])&&n[r][1].splice(a,1)):we(n[r][1][a])&&n[r][1].splice(a,1);if(n[r][1].constructor===Object)for(var i=Object.entries(n[r][1]),s=0;s<i.length;s++)i[r][1].constructor===Object||Array.isArray(i[r][1])?e(i[r][1]):we(i[r][1])&&delete n[r][1][i[r][0]]}return t},Ne=function e(t,n){if(void 0===t||void 0===n)return!1;if(t===n)return!0;if(typeof t!==typeof n)return!1;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===Object&&n.constructor!==Object||t.constructor!==Object&&n.constructor===Object)return!1;if(t.constructor===Object&&n.constructor===Object){var a=Object.keys(t),i=Object.keys(n);return a.length===i.length&&(!!e(a,i)&&!!e(Object.values(t),Object.values(n)))}return!1};var _e=function(e){if(void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.backFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";console.log({values:e.values,resource:e.resource,disabledFields:e.disabledFields,functionalFields:e.functionalFields,submitFunction:e.submitFunction,backFunction:e.backFunction,handleChangesCallback:e.handleChangesCallback,arrayDeleteCallback:e.arrayDeleteCallback});var t=function(t,n){return Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:t})}),Object(U.jsx)(ue.a,{sm:4,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsxs)(je.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(U.jsx)("option",{children:J().select+" "+t}),a.a.Children.toArray(Object.entries(n).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(U.jsx)("option",{value:n,children:r})})))]})})})]})};return Object(U.jsxs)(je.a,{onSubmit:e.submitFunction,children:[Object(U.jsxs)(le.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(n){var r,i=Object(d.a)(n,2),s=i[0],c=i[1];if("number"===typeof c)return function(t){return Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:t})}),Object(U.jsx)(ue.a,{sm:4,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"number",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:J().enter+" "+t})})})]})}(s);if("string"===typeof c)return function(n){return void 0!==G[e.resource]&&void 0!==G[e.resource][n]&&void 0!==ge&&void 0!==ge[G[e.resource][n]]?t(n,ge[G[e.resource][n]]):Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:n})}),Object(U.jsx)(ue.a,{sm:4,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"password"===n?"password":"text",id:n,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:e.values[n],placeholder:J().enter+" "+n})})})]})}(s);if(Array.isArray(c)){if("number"===typeof c[0])return r=s,Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:r})}),Object(U.jsx)(ue.a,{sm:4,children:a.a.Children.toArray(e.values[r].map((function(t,n){return Object(U.jsx)(de.a,{children:Object(U.jsxs)(je.a.Group,{className:"mb-3",children:[Object(U.jsxs)(je.a.Label,{children:["Insert ",Object(U.jsx)("b",{children:r}),Object(U.jsxs)("i",{children:["[",n,"]"]})]}),Object(U.jsx)(je.a.Control,{type:"number",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n])},value:isNaN(e.values[r][n])?"":e.values[r][n],placeholder:J().enter+" "+r})]})})})))})]});if("string"===typeof c[0])return function(t){return Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:t})}),Object(U.jsx)(ue.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{sm:1,children:Object(U.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(U.jsx)(ue.a,{sm:4,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r])},value:e.values[t][r],placeholder:J().enter+" "+t})})}),Object(U.jsx)(ue.a,{md:"auto"})]})})))})]})}(s);if(c[0].constructor===Object)return function(t){return Object(U.jsxs)(de.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(U.jsx)(ue.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(U.jsx)("b",{children:t})}),Object(U.jsx)(ue.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{sm:1,children:Object(U.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(d.a)(n,2),s=i[0],c=i[1];return"number"===typeof c?Object(U.jsx)(ue.a,{sm:2,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"number",onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:isNaN(e.values[t][r][s])?"":e.values[t][r][s],placeholder:J().enter+" "+s},t+s+r+"")})}):"string"===typeof c?Object(U.jsx)(ue.a,{sm:3,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s])},value:e.values[t][r][s],placeholder:J().enter+" "+s})})}):Array.isArray(c)?0===c.length?s+" is empty":Object(U.jsx)(de.a,{children:Object(U.jsx)(ee.a,{defaultActiveKey:"0",children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsxs)(ee.a.Header,{children:[Object(U.jsx)("b",{children:s})," : ",Se(c)," items"]}),Object(U.jsx)(ee.a.Body,{children:a.a.Children.toArray(c.map((function(n,i){if(n.constructor===Object){var c=Object.entries(n);return Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(U.jsx)(ue.a,{sm:1,children:Object(U.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(c.map((function(n){var a=Object(d.a)(n,2),c=a[0],o=a[1];return Object(U.jsx)(ue.a,{sm:3,children:Object(U.jsx)(je.a.Group,{className:"mb-3",children:Object(U.jsx)(je.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s,i,c])},value:o,placeholder:J().enter+" "+c})})})})))]})}return"number"===typeof n?Object(U.jsxs)(de.a,{children:[Object(U.jsx)(ue.a,{sm:1,children:Object(U.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(U.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(U.jsx)(ue.a,{sm:3,children:Object(U.jsx)(je.a.Control,{type:"number",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s,i])},value:isNaN(n)?"":n,placeholder:J().enter+" "+s},""+t+r+s+i)})]}):"string"===typeof n?"TODO string":void 0})))})]})})}):void 0})))]})})))})]})}(s)}return c.constructor===Object?"TODO":""})))]}),Object(U.jsx)(b.a,{variant:"primary",type:"submit",children:J().submit},"submit"),Object(U.jsx)(b.a,{variant:"secondary",onClick:e.backFunction,children:J().cancel},"cancel")]})},Ae=n(75);function De(e){var t=Object(j.p)(),n=t.resource,i=t.id,s=Object(r.useState)(),u=Object(d.a)(s,2),b=u[0],h=u[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(j.n)(),v=Object(r.useState)(Ae(E[n])),g=Object(d.a)(v,2),y=g[0],k=g[1],w=Object(r.useState)({}),C=Object(d.a)(w,2),N=C[0],_=(C[1],Object(r.useState)(void 0)),D=Object(d.a)(_,2),I=D[0],F=D[1],T=Object(r.useState)(!1),P=Object(d.a)(T,2),R=(P[0],P[1]);a.a.useRef({});Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a,s,c,d,u,j,b,p,f,O,m,x,v,g,w,S=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,A(n,t);case 3:r=e.sent,a=r.docs[0],s=Ae(y),c=Object.entries(a),d=0;case 8:if(!(d<c.length)){e.next=36;break}if(!Array.isArray(c[d][1])){e.next=33;break}if(0!==c[d][1].length){e.next=12;break}return e.abrupt("continue",33);case 12:if(c[d][1][0].constructor!==Object){e.next=25;break}u=0;case 14:if(!(u<c[d][1].length)){e.next=23;break}if(void 0!==E[n][c[d][0]][0]){e.next=17;break}return e.abrupt("continue",20);case 17:j=Object(ke.a)({},E[n][c[d][0]][0]),Object.assign(j,c[d][1][u]),c[d][1][u]=j;case 20:u++,e.next=14;break;case 23:e.next=33;break;case 25:b=0;case 26:if(!(b<c[d][1].length)){e.next=33;break}if(void 0!==E[n][c[d][0]]&&void 0!==E[n][c[d][0]][0]){e.next=29;break}return e.abrupt("continue",30);case 29:c[d][1][b]=c[d][1][b];case 30:b++,e.next=26;break;case 33:d++,e.next=8;break;case 36:for(Object.assign(s,a),p=Object.keys(s),f=Object.keys(E[n]),console.log({keys:p,requestedKeys:f}),O=0;O<p.length;O++)if(f.includes(p[O])){if(E[n][p[O]].constructor===Object);else if(Array.isArray(E[n][p[O]])&&E[n][p[O]][0].constructor===Object)for(m=Object.keys(E[n][p[O]][0]),x=Object.keys(s[p[O]][0]),v=0;v<s[p[O]].length;v++)for(g=0;g<x.length;g++)m.includes(x[g])||delete s[p[O]][v][x[g]]}else delete s[p[O]];w=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a,c,l,d,u,j,b,p,f,O;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==K[n]){e.next=7;break}for(F({}),t=Object.keys(s),r=0;r<t.length;r++)a=t[r],s=z(s,[a]);return k(s),h(Ae(s)),e.abrupt("return");case 7:c={},void 0!==I&&(c=I),l=Object.entries(K[n]),d=0;case 11:if(!(d<l.length)){e.next=24;break}if(u=l[d][0],j=l[d][1],void 0!==s[u]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==j.type){e.next=21;break}return e.next=19,j.policy(i);case 19:b=e.sent,c[u]=b;case 21:d++,e.next=11;break;case 24:for(p=Object.keys(s),f=0;f<p.length;f++)O=p[f],void 0!==c[O]&&!1!==c[O]||(s=z(s,[O]));F(c),k(s),h(Ae(s));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w();case 43:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:i};e({filter:JSON.stringify(t)}),R(!0)}),[]);var z=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Ae(e),i=a,s=Ae(E[n]),o=Object(c.a)(t),l=0;l<o.length&&void 0!==t[l];l++)i=i[t[l]];for(var d=0;d<o.length&&void 0!==t[d]&&void 0!==s;d++)s="number"===typeof t[d]?s[0]:s[t[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ke.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return we(e)})).length&&i.push(Object(ke.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return we(e)})).length)&&(r.constructor===Object?i.push(Object(ke.a)({},r)):i.push(r)),a):a},B=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,s,l,d,u,j,h,p,f,O,v,g,k,w,C;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),r=Ae(y),a=Ae(b),Ce(r),Ce(a),s={},l=Object.entries(r),d=0;d<l.length;d++)if(u=l[d][0],j=l[d][1],Array.isArray(j)){if(void 0===s[u]&&(s[u]={add:[],remove:[],update:[]}),h=Object(c.a)(a[u]),void 0!==N[u])for(p=0;p<N[u].indexes.length;p++)(f=h.splice(N[u].indexes[p][0],1)[0]).constructor===Object?(O=Object.keys(f)[0],s[u].remove.push(f[O])):s[u].remove.push(f);for(v=0;v<r[u].length;v++)v<h.length&&!Ne(r[u][v],h[v])&&(r[u][v].constructor===Object?(k=Object.keys(h[v])[0],s[u].update.push((g={},Object(ye.a)(g,k,h[v][k]),Object(ye.a)(g,"new",r[u][v]),g))):(s[u].add.push(r[u][v]),s[u].remove.push(h[v]))),v>=h.length&&s[u].add.push(r[u][v]);Ne(s[u],{add:[],remove:[],update:[]})&&delete s[u]}else j.constructor===Object||j!==b[u]&&(s[u]=j);return e.prev=8,e.next=11,S(n,s,i);case 11:C=e.sent,w=C.response,m(w.statusText),x("/"+n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),w=e.t0.error.response,m(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"page",children:[Object(U.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(U.jsx)("b",{children:n}),"\xa0of id:\xa0",Object(U.jsx)("b",{children:i}),"\xa0from:"]}),Object(U.jsxs)("main",{className:"page-content",children:[Object(U.jsx)(_e,{values:y,resource:n,functionalFields:E,disabledFields:I,handleChangesCallback:function(e,t){var n,r=Ae(y),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=z(r,t.slice(0,i),s)}k(r)},arrayDeleteCallback:function(e){var t,n=Ae(y),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a=r.splice(e[t],1),i="number"===typeof a[0]?NaN:"";n=z(n,e.slice(0,t),i),1===t&&(void 0===N[e[0]]&&(N[e[0]]={indexes:[],elements:[],minDel:1/0}),we(a[0])||(N[e[0]].elements.push(a[0]),N[e[0]].indexes.push(e[t]>=N[e[0]].minDel?e[t]+N[[e[0]]].indexes.filter((function(n){return n>=e[t]})).length:e[t]),e[t]<N[e[0]].minDel&&(N[e[0]].minDel=e[t]))),k(n)},submitFunction:B,backFunction:function(e){e.preventDefault(),x(-1)}}),Object(U.jsx)("br",{}),Object(U.jsx)("font",{style:{marginLeft:"5px"},children:O})]})]})}var Ie=n(177),Fe=n(75);function Te(e){var t=Object(j.p)().resource,n=Object(u.c)(),i=Object(d.a)(n,2),s=i[0];i[1];void 0!==e.resource&&(t=e.resource);var h=Object(j.n)(),p=Object(r.useState)("form"),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),v=Object(d.a)(x,2),y=v[0],w=v[1],S=Object(r.useState)(Fe(L[t])),C=Object(d.a)(S,2),N=C[0],_=C[1],D=Object(r.useState)(void 0),I=Object(d.a)(D,2),F=I[0],T=I[1],P=Object(r.useState)(void 0),R=Object(d.a)(P,2),z=R[0],B=R[1],W=Object(r.useState)(void 0),E=Object(d.a)(W,2),K=E[0],G=E[1],M=Object(r.useState)(void 0),q=Object(d.a)(M,2),V=q[0],Y=q[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var n,r,a,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,A(t,n);case 3:r=e.sent,a=Fe(N),Object.keys(a).map((function(e){if(void 0!==r.docs[0][e])if(Array.isArray(r.docs[0][e])){if(!we(r.docs[0][e]))if(r.docs[0][e][0].constructor===Object){var t=Object.keys(a[e][0]),n=r.docs[0][e].map((function(e){var n={};return t.map((function(e){return n[e]=null})),Object.assign(n,e)}));a[e]=n.concat(a[e])}else a[e]=r.docs[0][e].concat(a[e])}else a[e]=r.docs[0][e]})),_(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var n={_id:s.get("from")};e({filter:JSON.stringify(n)})}}),[e,s]),void 0===L[t])return Object(U.jsx)("div",{children:"This entity cannot be posted"});var Q=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Fe(e),i=a,s=Fe(L[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ke.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return we(e)})).length&&i.push(Object(ke.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return we(e)})).length)&&(r.constructor===Object?i.push(Object(ke.a)({},r)):i.push(r)),a):a},X=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=Fe(N)).token&&(r=a.token,delete a.token),i=Fe(a),Ce(i),e.prev=6,e.next=9,k(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,w(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&h("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!F.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",F),e.prev=4,e.next=7,g(t,a);case 7:i=e.sent,r=i.response,w(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!F.name.endsWith(".json")){e.next=32;break}return console.log(V),e.prev=19,e.next=22,k(t,V,void 0);case 22:s=e.sent,r=s.response,w(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,w(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"page",children:[Object(U.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(U.jsx)("b",{children:t})]}),Object(U.jsxs)("main",{className:"page-content",children:[Object(U.jsxs)(Ie.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[H[t].includes("form")&&Object(U.jsx)(Ie.a.Item,{children:Object(U.jsx)(Ie.a.Link,{eventKey:"form",children:"Form"})}),H[t].includes("file")&&null===s.get("from")&&Object(U.jsx)(Ie.a.Item,{children:Object(U.jsx)(Ie.a.Link,{eventKey:"file",children:"File"})})]}),Object(U.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&Object(U.jsxs)("div",{style:{margin:"5px"},children:[Object(U.jsx)(_e,{values:N,resource:t,functionalFields:L,disabledFields:{},handleChangesCallback:function(e,t){var n,r=Fe(N),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);a[t[n]]=e,-1!==i&&(r=Q(r,t.slice(0,i))),_(r)},arrayDeleteCallback:function(e){var t,n=Fe(N),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];r.splice(e[t],1),n=Q(n,e.slice(0,t)),_(n)},submitFunction:X,backFunction:function(e){e.preventDefault(),h(-1)}}),Object(U.jsx)("br",{}),Object(U.jsx)("font",{style:{marginLeft:"5px"},children:y})]}),"file"===O&&Object(U.jsx)("div",{style:{margin:"5px"},children:Object(U.jsxs)(je.a,{onSubmit:Z,children:[Object(U.jsx)(je.a.Label,{children:Object(U.jsx)("b",{children:J().select_file})}),Object(U.jsx)(je.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];T(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");B(a[0]),a.splice(0,1),G(a)}if(t.name.endsWith(".json")){var i=n.result;Y(i)}},n.readAsText(t)}}),void 0!==K&&void 0!==z&&Object(U.jsx)(ee.a,{children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsx)(ee.a.Header,{children:J().file_content}),Object(U.jsx)(ee.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(U.jsxs)($.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(U.jsx)("thead",{children:Object(U.jsx)("tr",{children:a.a.Children.toArray(z.split(",").map((function(e){return Object(U.jsx)("th",{children:e})})))})}),Object(U.jsx)("tbody",{children:a.a.Children.toArray(K.map((function(e){return Object(U.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(U.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==V&&Object(U.jsx)(ee.a,{children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsx)(ee.a.Header,{children:J().file_content}),Object(U.jsx)(ee.a.Body,{style:{overflow:"scroll",height:"70vh"},children:V})]})}),Object(U.jsx)(b.a,{variant:"primary",type:"submit",children:J().submit}),Object(U.jsx)("br",{}),Object(U.jsx)("font",{style:{marginLeft:"5px"},children:y})]})})]})]})]})}var Pe=n(75);function Re(e){var t="experiments",n=Object(u.c)(),i=Object(d.a)(n,2),s=i[0],h=(i[1],Object(j.n)()),p=Object(r.useState)("form"),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),v=Object(d.a)(x,2),y=v[0],w=v[1],S=Object(r.useState)(Pe(L[t])),C=Object(d.a)(S,2),N=C[0],_=C[1],D=Object(r.useState)({}),I=Object(d.a)(D,2),F=I[0],T=I[1],P=Object(r.useState)(),R=Object(d.a)(P,2),z=R[0],B=R[1],W=Object(r.useState)(),E=Object(d.a)(W,2),K=(E[0],E[1]),G=Object(r.useState)(void 0),M=Object(d.a)(G,2),q=M[0],V=M[1],Y=Object(r.useState)(void 0),Q=Object(d.a)(Y,2),X=Q[0],Z=Q[1],te=Object(r.useState)(void 0),ne=Object(d.a)(te,2),re=ne[0],ae=ne[1],ie=Object(r.useState)(void 0),se=Object(d.a)(ie,2),ce=se[0],oe=se[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,r=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,A("protocols",t);case 3:n=e.sent,B(n.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,s]),void 0===L[t])return Object(U.jsx)("div",{children:"This entity cannot be posted"});var le=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n,r,a,i,s,c,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,r={_id:t.target.value},a={filter:JSON.stringify(r)},e.next=6,A("protocols",a);case 6:for(i=e.sent,s=i.docs[0],c=[],l=0;l<s.metadata.length;l++)"scalar"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:NaN}),"text"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:""}),"vector"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:[NaN]});(d=Pe(N)).protocol=n,0!==c.length&&(d.metadata=c),(u=Pe(F)).protocol=!0,T(u),K(n),_(d);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Pe(e),i=a,s=Pe(L[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return void 0===s||Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ke.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return we(e)})).length&&i.push(Object(ke.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return we(e)})).length)&&(r.constructor===Object?i.push(Object(ke.a)({},r)):i.push(r)),a):a},ue=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=Pe(N)).token&&(r=a.token,delete a.token),i=Pe(a),Ce(i),e.prev=6,e.next=9,k(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,w(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!q.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",q),e.prev=4,e.next=7,g(t,a);case 7:i=e.sent,r=i.response,w(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!q.name.endsWith(".json")){e.next=32;break}return console.log(ce),e.prev=19,e.next=22,k(t,ce,void 0);case 22:s=e.sent,r=s.response,w(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,w(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(U.jsxs)("div",{className:"page",children:[Object(U.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(U.jsx)("b",{children:t})]}),Object(U.jsxs)("main",{className:"page-content",children:[Object(U.jsxs)(Ie.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[H[t].includes("form")&&Object(U.jsx)(Ie.a.Item,{children:Object(U.jsx)(Ie.a.Link,{eventKey:"form",children:"Form"})}),H[t].includes("file")&&null===s.get("from")&&Object(U.jsx)(Ie.a.Item,{children:Object(U.jsx)(Ie.a.Link,{eventKey:"file",children:"File"})})]}),Object(U.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&void 0!==z&&Object(U.jsxs)("div",{style:{margin:"5px"},children:[Object(U.jsxs)(je.a.Select,{"aria-label":J().select+" protocol",onChange:le,children:[Object(U.jsxs)("option",{children:[J().select," protocol"]}),a.a.Children.toArray(z.map((function(e){return Object(U.jsx)("option",{value:e,children:e})})))]}),Object(U.jsx)("br",{}),Object(U.jsx)(_e,{values:N,resource:t,functionalFields:L,disabledFields:F,handleChangesCallback:function(e,t){var n,r=Pe(N),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=de(r,t.slice(0,i),s)}_(r)},arrayDeleteCallback:function(e){var t,n=Pe(N),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a="number"===typeof r.splice(e[t],1)[0]?NaN:"";n=de(n,e.slice(0,t),a),_(n)},submitFunction:ue,backFunction:function(e){e.preventDefault(),h(-1)}}),Object(U.jsx)("br",{}),Object(U.jsx)("font",{style:{marginLeft:"5px"},children:y})]}),"file"===O&&Object(U.jsx)("div",{style:{margin:"5px"},children:Object(U.jsxs)(je.a,{onSubmit:be,children:[Object(U.jsx)(je.a.Label,{children:Object(U.jsx)("b",{children:J().select_file})}),Object(U.jsx)(je.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];V(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");Z(a[0]),a.splice(0,1),ae(a)}if(t.name.endsWith(".json")){var i=n.result;oe(i)}},n.readAsText(t)}}),void 0!==re&&void 0!==X&&Object(U.jsx)(ee.a,{children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsx)(ee.a.Header,{children:J().file_content}),Object(U.jsx)(ee.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(U.jsxs)($.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(U.jsx)("thead",{children:Object(U.jsx)("tr",{children:a.a.Children.toArray(X.split(",").map((function(e){return Object(U.jsx)("th",{children:e})})))})}),Object(U.jsx)("tbody",{children:a.a.Children.toArray(re.map((function(e){return Object(U.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(U.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==ce&&Object(U.jsx)(ee.a,{children:Object(U.jsxs)(ee.a.Item,{eventKey:"0",children:[Object(U.jsx)(ee.a.Header,{children:J().file_content}),Object(U.jsx)(ee.a.Body,{style:{overflow:"scroll",height:"70vh"},children:ce})]})}),Object(U.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(U.jsx)("br",{}),Object(U.jsx)("font",{style:{marginLeft:"5px"},children:y})]})})]})]})]})}var ze=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=localStorage.getItem("diten-token");function s(e){a((function(t){return[e].concat(t)}))}function b(e){var t=Object(c.a)(n);t.splice(e,1),a(t)}function h(){a([])}Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("types",{},"");case 3:t=e.sent,n=t.response.data,ge=n,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===ge)try{e()}catch(t){console.log(t)}}),[]);var p={notifications:n,PushNotification:s,RemoveNotification:b,ClearNotifications:h};return x.ClearNotifications=h,x.PushNotification=s,x.RemoveNotification=b,null===i?Object(U.jsx)("div",{className:"app",children:Object(U.jsx)(u.a,{children:Object(U.jsxs)(j.d,{children:[Object(U.jsx)(j.b,{path:"/",element:Object(U.jsx)(q,{})}),Object(U.jsx)(j.b,{path:"/add/tenants",element:Object(U.jsx)(Te,{resource:"tenants"})})]})})}):Object(U.jsx)(xe.Provider,{value:p,children:Object(U.jsx)("div",{className:"app",children:Object(U.jsxs)(u.a,{children:[Object(U.jsxs)("aside",{children:[Object(U.jsx)(u.b,{to:"/home",className:"nav-wrap",children:"Admin Dashboard"}),Object(U.jsx)(Z,{})]}),Object(U.jsx)("div",{className:"main",children:Object(U.jsxs)(j.d,{children:[Object(U.jsx)(j.b,{path:"/",element:Object(U.jsx)(V,{})}),Object(U.jsx)(j.b,{path:"/home",element:Object(U.jsx)(V,{})}),Object(U.jsx)(j.b,{path:"/viewProfile",element:Object(U.jsx)(be,{})}),Object(U.jsx)(j.b,{path:"/add/experiments/",element:Object(U.jsx)(Re,{})}),Object(U.jsx)(j.b,{path:"/edit/:resource/:id",element:Object(U.jsx)(De,{})}),Object(U.jsx)(j.b,{path:"/add/:resource/",element:Object(U.jsx)(Te,{})}),Object(U.jsx)(j.b,{path:"/:page",element:Object(U.jsx)(oe,{res:":page"})}),Object(U.jsx)(j.b,{path:"/unauthorized",element:Object(U.jsx)(he,{})}),Object(U.jsx)(j.b,{path:"/404",element:Object(U.jsx)(Y,{})}),Object(U.jsx)(j.b,{path:"*",element:Object(U.jsx)(j.a,{to:"/404",replace:!0})})]})}),Object(U.jsx)("div",{className:"right-bar",children:Object(U.jsx)(ve,{})})]})})})};s.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(ze,{})}),document.getElementById("root"))},98:function(e,t,n){}},[[162,1,2]]]);
//# sourceMappingURL=main.94d5cc79.chunk.js.map