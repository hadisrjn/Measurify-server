(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{103:function(e,t,n){},130:function(e,t){},132:function(e,t){},147:function(e,t,n){},148:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(24),s=n.n(i),c=(n(103),n(14)),o=n(10),l=n(3),d=n(7),u=n.n(d),j=n(11),b=n(8),h=n(168),p={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti i collegamenti alle pagine per le quali possiedi l'autorizzazione.",right_bar_descr_hp:"Nella barra a destra sono presenti le informazioni relative al tuo account e alla scadenza della sessione corrente.",session_expire_info_hp:"Al termine della sessione non sarai espulso automaticamente e potrai continuare a visualizzare la pagina attiva. Ogni azione successiva porter\xe0 alla disconnessione.",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante. Se sei arrivato a questa pagina utilizzando le funzioni dell'interfaccia segnala il bug: un team accuratamente selezionato di studenti universitari prover\xe0 a risolvere il problema.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta"},f={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",tools:"Tools",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to Measurify dashboard!",left_bar_descr_hp:"The left bar contains all the links for the pages you are allowed to navigate to",right_bar_descr_hp:"The right bar contains the information about your account and the expiration of the current session.",session_expire_info_hp:"When this session will expire you will not be logged-out instantly, you will still be able to watch the active page. Each action on this or another page will force your log-out.",github_page_hp:"Measurify Github page",github_issue_page_hp:"Report bugs or issues",oh_no:"Oh No!",broken_link:"It looks like you used a broken link. If you arrived at this page using the interface features report the bug: a carefully selected team of college students will try to fix it.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired"},O=n(105).default,m=n(123),x=O.create({httpsAgent:new m.Agent({rejectUnauthorized:!1})}),g={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function v(e,t,n){var r={username:"".concat(e),password:"".concat(t),tenant:"".concat(n)},a={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:D()}},i=z+"/login";return new Promise((function(e,t){x.post(i,r,a).then((function(t){localStorage.setItem("diten-token",t.data.token),localStorage.setItem("diten-token-expiration-time",t.data.token_expiration_time),localStorage.setItem("diten-username",t.data.user.username),localStorage.setItem("diten-user-role",t.data.user.type),localStorage.setItem("diten-user-tenant",n),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function y(e,t){return k.apply(this,arguments)}function k(){return k=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s,c,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},void 0===(a=o.length>3&&void 0!==o[3]?o[3]:void 0)&&(a=D()),i=z+"/"+t+"/file",console.log("POST file:"+i),s={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(r).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];s[n]=r})),c={headers:s},e.abrupt("return",new Promise((function(e,r){x.post(i,n,c).then((function(n){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:n})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),r({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function w(e,t){return N.apply(this,arguments)}function N(){return N=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(r=s.length>2&&void 0!==s[2]?s[2]:void 0)&&(r=D()),a=z+"/"+t+"/",console.log("POST :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},console.log({header:i,body:n,token:r}),e.abrupt("return",new Promise((function(e,r){x.post(a,n,i).then((function(n){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:n})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function S(e,t,n){return C.apply(this,arguments)}function C(){return C=Object(o.a)(u.a.mark((function e(t,n,r){var a,i,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:void 0,i=z+"/"+t+"/"+r,void 0===a&&(a=D()),console.log("PUT :"+i),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){x.put(i,n,s).then((function(a){g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)}),e({response:a})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function _(e,t){return A.apply(this,arguments)}function A(){return A=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:void 0,a=z+"/"+t,void 0===r&&(r=D()),void 0!==n&&(a+="/"+n),console.log("DELETE :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},e.abrupt("return",new Promise((function(e,r){x.delete(a,i).then((function(r){void 0!==n?g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+n+", of type: "+t}):g.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:r})})).catch((function(e){g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+n+", of type: "+t+". "+e.message}),404===e.statusCode&&g.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function T(e){return I.apply(this,arguments)}function I(){return I=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,a=z+"/"+t+"/",void 0===r&&(r=D()),a=void 0!==n.filter?a.concat("?filter="+n.filter):a.concat("?filter="),void 0!==n.limit&&(a=a.concat("&limit="+n.limit)),void 0!==n.page&&(a=a.concat("&page="+n.page)),console.log("GET :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(a,i).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function D(){return localStorage.getItem("diten-token")}function F(e){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={filter:JSON.stringify({feature:t})},e.prev=1,e.next=4,T("measurements",n);case 4:if(!(e.sent.totalDocs>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return r={filter:JSON.stringify({features:t})},e.next=12,T("devices",r);case 12:if(!(e.sent.totalDocs>0)){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(1),console.log("Error on isFeatureInUse"),console.log(e.t0),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}var z="https://localhost/v1",R="Measurify Admin Dashboard",B=[],W={users:["username","type","actions"],tags:["_id","actions"],features:["_id","actions"],devices:["_id","tags","actions"],protocols:["_id","description","actions"],experiments:["_id","description","protocol","actions"]},E={features:{_id:"Feature Name",actions:"Actions"},tags:{_id:"Tag Name",actions:"Actions"},devices:{_id:"Device Name",actions:"Actions"}},L={features:["view","edit","duplicate","delete"],users:["view","delete"],tags:["view","edit","delete"],devices:["view","edit","delete"],protocols:["view","delete"],experiments:["view","delete"]},K={users:["username","type","actions","fieldmask","status"],features:[{items:["name","type","unit","dimension"]},"tags"],tags:["tags"],devices:["_id","features","tags","scripts"],protocols:["_id","description","metadata","topics"],experiments:["_id","description","protocol","history","metadata"]},H={features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},tags:{tags:[""]},devices:{visibility:"",tags:[""]}},M={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},tags:{_id:"",tags:[""]},features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},users:{username:"",password:"",type:""},devices:{_id:"",features:[""]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:""}},G={};G.features={_id:{type:"disable",policy:F},items:{type:"disable",policy:F}};var J={tags:["form","file"],features:["form","file"],tenants:["form"],users:["form","file"],devices:["form","file"],protocols:["form","file"],experiments:["form","file"]},U={};function q(){var e=localStorage.getItem("diten-language");return 0===B.length?f:(1===B.length&&(e=B[0]),"it"===e?p:"en"===e?f:"it"===navigator.language.substring(0,2)?p:(navigator.language.substring(0,2),f))}U.users={type:"UserRoles",status:"UserStatusTypes"},U.devices={measurementBufferPolicy:"MeasurementBufferPolicyTypes"};n(147),n(148);var V=n(0),Y=function(){function e(e){localStorage.setItem("diten-language",e),window.location.reload()}return Object(V.jsxs)("div",{children:[q().language,Object(V.jsxs)("div",{children:[Object(V.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),Object(V.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},Q=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),s=Object(l.a)(i,2),c=s[0],d=s[1],b=Object(r.useState)(""),p=Object(l.a)(b,2),f=p[0],O=p[1],m=Object(r.useState)(!0),x=Object(l.a)(m,2),g=x[0],y=x[1],k=Object(r.useState)(""),w=Object(l.a)(k,2),N=w[0],S=w[1];function C(){return(C=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,v(n,c,f);case 4:e.sent,!0===g?localStorage.setItem("diten-logged-in","keep"):localStorage.setItem("diten-logged-in","logout"),window.location.replace("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log({error:e.t0.response.data}),S(e.t0.response.data.message+" : "+e.t0.response.data.details);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(V.jsxs)("div",{className:"auth-page",children:[Object(V.jsxs)("div",{className:"title-wrapper",children:[Object(V.jsx)("div",{className:"title-section",children:"Measurify"}),Object(V.jsx)("br",{}),Object(V.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),B.length>1&&Object(V.jsx)("div",{className:"language-wrapper",children:Object(V.jsx)(Y,{})}),Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsxs)("div",{className:"login-section",children:[Object(V.jsx)("h4",{children:q().login}),Object(V.jsxs)("form",{className:"form-content",onSubmit:function(e){return C.apply(this,arguments)},children:[Object(V.jsxs)("div",{className:"form-row row",children:[Object(V.jsx)("label",{children:q().username}),Object(V.jsx)("input",{type:"text",id:"username",placeholder:q().username_suggestion,onChange:function(e){a(e.target.value)}})]}),Object(V.jsxs)("div",{className:"form-row row",children:[Object(V.jsx)("label",{children:q().password}),Object(V.jsx)("input",{type:"password",id:"password",placeholder:q().password_suggestion,onChange:function(e){d(e.target.value)}})]}),Object(V.jsxs)("div",{className:"form-row row",children:[Object(V.jsx)("label",{children:q().tenant}),Object(V.jsx)("input",{type:"text",id:"tenant",placeholder:q().tenant_suggestion,onChange:function(e){O(e.target.value)}})]}),Object(V.jsxs)("div",{className:"form-row row",children:[Object(V.jsx)("label",{children:q().keep_logged}),Object(V.jsx)("input",{type:"checkbox",id:"logged",className:"input-checkbox",checked:g,onChange:function(e){y(e.target.checked)}})]}),Object(V.jsx)("div",{className:"buttons-wrapper center",children:Object(V.jsx)(h.a,{type:"submit",variant:"success",children:q().submit})}),Object(V.jsx)("br",{}),Object(V.jsx)("div",{style:{color:"red"},children:N}),Object(V.jsx)("br",{}),Object(V.jsx)("div",{className:"form-row row",children:Object(V.jsx)(j.b,{to:"/add/tenants",children:Object(V.jsxs)(h.a,{variant:"outline-success",size:"sm",children:[q().add_tenant,Object(V.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})]})},X=(n(150),function(){return Object(r.useEffect)((function(){})),Object(V.jsxs)("div",{className:"page",children:[Object(V.jsx)("header",{className:"page-header",children:R}),Object(V.jsx)("main",{className:"page-content",children:Object(V.jsx)("div",{className:"home-page",children:Object(V.jsx)("div",{className:"info-box",children:Object(V.jsxs)("div",{className:"info-text",children:[q().welcome_hp,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),q().left_bar_descr_hp,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),q().right_bar_descr_hp,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),q().session_expire_info_hp,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsx)("a",{href:"https://github.com/measurify/server/tree/r2.0",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/tree/r2.0",children:q().github_page_hp}),Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:q().github_issue_page_hp}),Object(V.jsx)("br",{})]})})})})]})}),Z=(n(151),function(){return Object(V.jsx)("div",{className:"notFound-page",children:Object(V.jsx)("div",{className:"info-box",children:Object(V.jsxs)("div",{className:"info-text",children:[q().oh_no,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),q().broken_link,Object(V.jsx)("br",{}),Object(V.jsx)("br",{}),Object(V.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:q().github_issue_page_hp})]})})})}),$=(n(152),n(44)),ee=n(17);$.a.library.add(ee.g,ee.a,ee.l,ee.j,ee.i,ee.k,ee.h,ee.b);var te=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(),c=Object(l.a)(s,2),o=c[0],d=c[1],u=Object(r.useState)(),b=Object(l.a)(u,2),p=b[0],f=b[1],O=Object(r.useState)(),m=Object(l.a)(O,2),g=m[0],v=m[1],y=Object(r.useState)(),k=Object(l.a)(y,2),w=k[0],N=k[1],S=Object(r.useState)(),C=Object(l.a)(S,2),_=C[0],A=C[1],T=Object(r.useState)(),I=Object(l.a)(T,2),F=I[0],P=I[1],R=Object(r.useState)("00:00"),E=Object(l.a)(R,2),L=E[0],K=E[1];function H(){var e;if(void 0===w){var t=localStorage.getItem("diten-login-time");null!==t?(e=parseInt(t),N(parseInt(t))):e=Date.now()}else e=w;var n=(e+function(){var e;if(void 0===_){var t=localStorage.getItem("diten-token-expiration-time");null!==t?(e=t,A(t)):e="5m"}else e=_;return e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()-Date.now())/1e3;if(n<60&&"keep"===F&&function(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:D()}},t=z+"/login";return new Promise((function(n,r){x.put(t,{},e).then((function(e){localStorage.setItem("diten-token",e.data.token),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),n(e)})).catch((function(e){r(e)}))}))}().then((function(){N(void 0)})),n<=0)return localStorage.clear(),K(q().session_expired),void window.location.replace("/");var r=Math.floor(n/60),a=Math.floor(n%60);K(r+" : "+("0"+a).slice(-2))}return Object(r.useEffect)((function(){var e=localStorage.getItem("diten-username"),t=localStorage.getItem("diten-user-role"),n=localStorage.getItem("diten-user-tenant"),r=localStorage.getItem("diten-login-time"),a=localStorage.getItem("diten-token-expiration-time"),i=localStorage.getItem("diten-logged-in");d(null!==e?e:""),f(null!==t?t:""),v(null!==n&&""!==n?n:"-"),A(null!==a?a:"300m"),P(null!==i?i:"logout"),N(null!==r?parseInt(r):Date.now()),setTimeout((function(){H()}),1e3)}),[L]),Object(V.jsxs)("nav",{className:"app-nav",children:[Object(V.jsx)(h.a,{className:"app-nav-opener",onClick:function(){return i(!n)},children:n?Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(V.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(V.jsx)("hr",{}),Object(V.jsxs)("div",{className:"data-wrapper",children:[Object(V.jsxs)("div",{children:[Object(V.jsxs)("h3",{children:[q().welcome+" ",Object(V.jsx)("b",{children:o})]}),Object(V.jsxs)("h3",{children:[q().role+" ","admin"===p?Object(V.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===p?Object(V.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===p?Object(V.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===p?Object(V.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(V.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]}),Object(V.jsxs)("h3",{children:[q().tenant+" ",Object(V.jsx)("b",{children:g})]}),Object(V.jsx)("h3",{children:L!==q().session_expired?q().session_expire_in+L:L}),Object(V.jsxs)("h3",{children:[q().keep_logged,"  ","keep"===F?Object(V.jsx)("i",{className:"fa fa-check",id:"logged_icon_check","aria-hidden":"true",style:{width:"10px",height:"10px",marginRight:"2px"}}):Object(V.jsx)("i",{className:"fa fa-times",id:"logged_icon_times","aria-hidden":"true",style:{width:"10px",height:"10px",marginRight:"2px"}})]})]}),Object(V.jsx)("br",{}),Object(V.jsx)(h.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:q().logout}),B.length>1&&Object(V.jsxs)(a.a.Fragment,{children:[Object(V.jsx)("hr",{}),Object(V.jsx)("h2",{children:Object(V.jsx)(Y,{})})]})]}),Object(V.jsx)("hr",{}),Object(V.jsx)("div",{className:"app-nav-wrapper ".concat(n?"opened":""),children:Object(V.jsxs)("div",{className:"app-nav-links",children:[Object(V.jsx)("div",{className:"app-nav-text",children:q().tools}),Object(V.jsx)("hr",{}),Object.keys(W).map((function(e){return Object(V.jsx)(j.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return i(!1)},children:e},e)}))]})})]})},ne=n(169),re=n(177),ae=n(98),ie=n(174);function se(e){var t={};return console.log({props:e}),K[e.resType].map((function(n){console.log(n.constructor===Object),n.constructor===Object?Object.keys(n).map((function(r){Array.isArray(e.resource[r])?t[r]=e.resource[r].map((function(e){var t={};return n[r].map((function(n){t[n]=e[n]})),t})):t[r]=e.resource[r]})):Object.keys(e.resource).includes(n)&&(t[n]=e.resource[n])})),console.log({toShow:t}),ce(t)}function ce(e){return Object(V.jsx)(re.a,{defaultActiveKey:0,size:"lg",children:a.a.Children.toArray(Object.entries(e).map((function(e,t){var n=Object(l.a)(e,2),r=n[0],i=n[1];return Object(V.jsxs)(re.a.Item,{eventKey:t,children:[Object(V.jsx)(re.a.Header,{children:Object(V.jsx)("b",{children:r})}),Object(V.jsx)(re.a.Body,{children:i instanceof Object?Array.isArray(i)?void 0!==i[0]?Object.values(i[0]).some((function(e){return e instanceof Object}))?a.a.Children.toArray(i.map((function(e,t){return Object(V.jsx)(re.a,{children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsxs)(re.a.Header,{children:[r," ",Object(V.jsxs)("i",{children:["[",t,"]"]})]}),Object(V.jsx)(re.a.Body,{children:ce(e)})]})})}))):i[0]instanceof Object?Object(V.jsxs)(ne.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(V.jsx)("thead",{children:Object(V.jsx)("tr",{children:a.a.Children.toArray(Object.keys(i[0]).map((function(e){return Object(V.jsx)("th",{children:e})})))})}),Object(V.jsx)("tbody",{children:a.a.Children.toArray(i.map((function(e){return Object(V.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(V.jsx)("td",{children:e})})))})})))})]}):"[ "+i.join(" , ")+" ]":"[ ]":"AAAA":void 0===i||null==i?Object(V.jsx)("i",{children:"None"}):i})]})})))})}function oe(e){var t=Object(r.useState)(void 0),n=Object(l.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){}),[e]);var s=void 0!==a?Object(V.jsxs)(ae.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:"400px"},children:[Object(V.jsx)(ae.a.Header,{as:"h3",children:"View Resource"}),Object(V.jsx)(ae.a.Body,{children:Object(V.jsx)(se,{resource:a,resType:e.resType})})]}):Object(V.jsx)(ae.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(V.jsxs)(ae.a.Header,{as:"h3",children:["Loading",Object(V.jsx)(ae.a.Body,{})]})});return"view"===e.action?Object(V.jsx)(ie.a,{trigger:"click",placement:"left",overlay:s,rootClose:!0,children:Object(V.jsx)(h.a,{variant:"link",size:"sm",onClick:function(){i(e.takeSingle(e.id))},children:Object(V.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(V.jsx)(h.a,{variant:"link",size:"sm",onClick:Object(o.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,_(e.resType,e.id);case 5:200==t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(V.jsx)(j.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(V.jsx)(h.a,{variant:"link",size:"sm",children:Object(V.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(V.jsx)(j.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(V.jsx)(h.a,{variant:"link",size:"sm",children:Object(V.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(V.jsx)("div",{})}function le(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(V.jsx)("div",{children:"Loading"}):Object(V.jsx)("div",{children:Object(V.jsxs)(ne.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==E[e.resType]&&void 0!==E[e.resType][t]?Object(V.jsx)("th",{children:E[e.resType][t]}):Object(V.jsx)("th",{children:t})})))},"header")}),Object(V.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,n){return Object(V.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(r){return"actions"===r?Object(V.jsxs)("td",{children:[e.actions.includes("view")?Object(V.jsx)(oe,{resType:e.resType,action:"view",k:n+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")?Object(V.jsx)(oe,{resType:e.resType,action:"edit",k:n+"_edit",id:t._id}):"",e.actions.includes("duplicate")?Object(V.jsx)(oe,{resType:e.resType,action:"duplicate",k:n+"_duplicate",id:t._id}):"",e.actions.includes("delete")?Object(V.jsx)(oe,{resType:e.resType,action:"delete",k:n+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[r]?Array.isArray(t[r])?Object(V.jsx)("td",{children:"[ "+t[r].join(" , ")+" ]"}):Object(V.jsx)("td",{children:t[r]}):void 0})))})})))})]})})}$.a.library.add(ee.d,ee.e,ee.c);var de=n(180);n(153);function ue(e){var t=Object(b.h)().page,n=Object(j.c)(),a=Object(l.a)(n,2),i=a[0],s=a[1],c=Object(r.useState)(void 0),d=Object(l.a)(c,2),p=d[0],f=d[1],O=Object(r.useState)(void 0),m=Object(l.a)(O,2),x=m[0],g=m[1],v=Object(r.useState)(void 0),y=Object(l.a)(v,2),k=y[0],w=y[1],N=Object(r.useState)(1),S=Object(l.a)(N,2),C=S[0],_=S[1],A=Object(r.useState)(1),I=Object(l.a)(A,2),D=I[0],F=I[1],P=Object(r.useState)(),z=Object(l.a)(P,2),R=z[0],B=z[1],E=Object(r.useState)(),K=Object(l.a)(E,2),H=K[0],G=K[1],J=Object(r.useState)(),U=Object(l.a)(J,2),q=U[0],Y=U[1],Q=Object(r.useState)(),X=Object(l.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(),te=Object(l.a)(ee,2),ne=te[0],re=te[1];Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,T(t,n);case 4:r=e.sent,g(W[t]),f(r.docs),void 0!==L[t]&&w(L[t]),B(r.hasNextPage),G(r.hasPrevPage),re(r.totalPages),Y(r.prevPage),$(r.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),g(void 0),f(void 0),B(void 0),G(void 0),re(void 0),Y(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),n=null!==i.get("page")?i.get("page"):1;_(n);var r=null!==i.get("limit")?i.get("limit"):10;F(r),e({page:n,limit:r}).catch(console.error)}),[e,t,i]);var ae=function(){var e=parseInt(C,10)-2>0,t=parseInt(C,10)+2<ne;return Object(V.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(V.jsxs)(de.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(V.jsx)(de.a.First,{disabled:1===C,onClick:function(){return s({page:1,limit:D})}}),Object(V.jsx)(de.a.Prev,{disabled:!H,onClick:function(){return s({page:q,limit:D})}}),e&&Object(V.jsx)(de.a.Ellipsis,{}),parseInt(C,10)-1>0&&Object(V.jsx)(de.a.Item,{onClick:function(){return s({page:parseInt(C,10)-1,limit:D})},children:parseInt(C,10)-1}),Object(V.jsx)(de.a.Item,{children:Object(V.jsx)("b",{children:C})}),parseInt(C,10)+1<=ne&&Object(V.jsx)(de.a.Item,{onClick:function(){return s({page:parseInt(C,10)+1,limit:D})},children:parseInt(C,10)+1}),t&&Object(V.jsx)(de.a.Ellipsis,{}),Object(V.jsx)(de.a.Next,{disabled:!R,onClick:function(){return s({page:Z,limit:D})}}),Object(V.jsx)(de.a.Last,{disabled:C===ne,onClick:function(){return s({page:ne,limit:D})}})]})})};return Object(V.jsxs)("div",{className:"page",children:[Object(V.jsxs)("header",{className:"page-header",children:[t,void 0!==M[t]&&Object(V.jsx)(j.b,{to:"/add/"+t+"/",children:Object(V.jsx)(h.a,{variant:"link",size:"sm",children:Object(V.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(V.jsxs)("main",{className:"page-content",children:[Object(V.jsx)(le,{resType:t,header:x,resources:p,actions:k,takeSingle:function(e){return p.find((function(t){return t._id===e}))},removeSingle:function(e){var t=p.filter((function(t){return t._id!==e}));f(t)}}),Object(V.jsx)(ae,{})]})]})}$.a.library.add(ee.f);n(154),n(155);function je(){return Object(V.jsx)("div",{className:"unAuth-page",children:Object(V.jsx)("div",{className:"info-box",children:Object(V.jsx)("div",{className:"info-text",children:q().unauthorised_user})})})}var be=n(170),he=n(175),pe=n(171),fe=n(179),Oe=a.a.createContext();function me(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(r.useContext)(Oe);return Object(V.jsxs)("div",{children:[Object(V.jsxs)(h.a,{variant:"link",onClick:function(){i(!0)},style:{color:"#fff",textDecoration:"none"},children:[q().notifications,"  ",Object(V.jsx)(be.a,{pill:!0,bg:"success",children:s.notifications.length}),Object(V.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(V.jsxs)(he.a,{style:{backgroundColor:"#123651",color:"#fff"},show:a,onHide:function(){return i(!1)},placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(V.jsx)(he.a.Header,{children:Object(V.jsxs)(he.a.Title,{children:[q().notifications,"  ",Object(V.jsx)(be.a,{pill:!0,bg:"success",children:s.notifications.length})]})}),Object(V.jsx)(he.a.Body,{children:Object(V.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==s.notifications.length&&Object(V.jsx)(h.a,{variant:"warning",onClick:function(){return s.ClearNotifications()},children:q().clear_all}),Object(V.jsx)(pe.a,{children:s.notifications.map((function(e,t){var n;return"info"===e.name&&(n="success"),"error"===e.name&&(n="danger"),Object(V.jsxs)(fe.a,{className:"d-inline-block m-1",bg:n,animation:!0,onClose:function(){s.RemoveNotification(t)},children:[Object(V.jsxs)(fe.a.Header,{children:[Object(V.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(V.jsx)("strong",{className:"me-auto",children:e.name}),Object(V.jsx)("small",{children:e.time.slice(0,15)})]}),Object(V.jsx)(fe.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}var xe,ge=n(9),ve=n(2),ye=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var n=!0;return t.forEach((function(t){n=n&&e(t)})),n}if(t.constructor===Object){var r=!0;return Object.entries(t).forEach((function(t){var n=Object(l.a)(t,2),a=(n[0],n[1]);r=r&&e(a)})),r}},ke=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!ye(e)})).length},we=function e(t){if(Array.isArray(t),t.constructor===Object)for(var n=Object.entries(t),r=0;r<n.length;r++){if(Array.isArray(n[r][1]))for(var a=0;a<n[r][1].length;a++)n[r][1][a].constructor===Object||Array.isArray(n[r][1][a])?(e(n[r][1][a]),ye(n[r][1][a])&&n[r][1].splice(a,1)):ye(n[r][1][a])&&n[r][1].splice(a,1);if(n[r][1].constructor===Object)for(var i=Object.entries(n[r][1]),s=0;s<i.length;s++)i[r][1].constructor===Object||Array.isArray(i[r][1])?e(i[r][1]):ye(i[r][1])&&delete n[r][1][i[r][0]]}return t},Ne=function e(t,n){if(void 0===t||void 0===n)return!1;if(t===n)return!0;if(typeof t!==typeof n)return!1;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===Object&&n.constructor!==Object||t.constructor!==Object&&n.constructor===Object)return!1;if(t.constructor===Object&&n.constructor===Object){var a=Object.keys(t),i=Object.keys(n);return a.length===i.length&&(!!e(a,i)&&!!e(Object.values(t),Object.values(n)))}return!1};var Se=n(172),Ce=n(97),_e=n(176),Ae=n(173),Te=function(e){if(void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";console.log({values:e.values,resource:e.resource,disabledFields:e.disabledFields,functionalFields:e.functionalFields,submitFunction:e.submitFunction,handleChangesCallback:e.handleChangesCallback,arrayDeleteCallback:e.arrayDeleteCallback});var t=function(t,n){return Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:t})}),Object(V.jsx)(Ce.a,{sm:4,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsxs)(_e.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(V.jsx)("option",{children:q().select+" "+t}),a.a.Children.toArray(Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(V.jsx)("option",{value:n,children:r})})))]})})})]})};return Object(V.jsxs)(_e.a,{onSubmit:e.submitFunction,children:[Object(V.jsxs)(Ae.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(n){var r,i=Object(l.a)(n,2),s=i[0],c=i[1];if("number"===typeof c)return function(t){return Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:t})}),Object(V.jsx)(Ce.a,{sm:4,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"number",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:q().enter+" "+t})})})]})}(s);if("string"===typeof c)return function(n){return void 0!==U[e.resource]&&void 0!==U[e.resource][n]&&void 0!==xe&&void 0!==xe[U[e.resource][n]]?t(n,xe[U[e.resource][n]]):Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:n})}),Object(V.jsx)(Ce.a,{sm:4,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"text",id:n,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:e.values[n],placeholder:q().enter+" "+n})})})]})}(s);if(Array.isArray(c)){if("number"===typeof c[0])return r=s,Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:r})}),Object(V.jsx)(Ce.a,{sm:4,children:a.a.Children.toArray(e.values[r].map((function(t,n){return Object(V.jsx)(Se.a,{children:Object(V.jsxs)(_e.a.Group,{className:"mb-3",children:[Object(V.jsxs)(_e.a.Label,{children:["Insert ",Object(V.jsx)("b",{children:r}),Object(V.jsxs)("i",{children:["[",n,"]"]})]}),Object(V.jsx)(_e.a.Control,{type:"number",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n])},value:isNaN(e.values[r][n])?"":e.values[r][n],placeholder:q().enter+" "+r})]})})})))})]});if("string"===typeof c[0])return function(t){return Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:t})}),Object(V.jsx)(Ce.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(Ce.a,{sm:1,children:Object(V.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(V.jsx)(Ce.a,{sm:4,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r])},value:e.values[t][r],placeholder:q().enter+" "+t})})}),Object(V.jsx)(Ce.a,{md:"auto"})]})})))})]})}(s);if(c[0].constructor===Object)return function(t){return Object(V.jsxs)(Se.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(V.jsx)(Ce.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(V.jsx)("b",{children:t})}),Object(V.jsx)(Ce.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(Ce.a,{sm:1,children:Object(V.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(l.a)(n,2),s=i[0],c=i[1];return"number"===typeof c?Object(V.jsx)(Ce.a,{sm:2,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"number",onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:isNaN(e.values[t][r][s])?"":e.values[t][r][s],placeholder:q().enter+" "+s},t+s+r+"")})}):"string"===typeof c?Object(V.jsx)(Ce.a,{sm:3,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s])},value:e.values[t][r][s],placeholder:q().enter+" "+s})})}):Array.isArray(c)?0===c.length?s+" is empty":Object(V.jsx)(Se.a,{children:Object(V.jsx)(re.a,{defaultActiveKey:"0",children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsxs)(re.a.Header,{children:[Object(V.jsx)("b",{children:s})," : ",ke(c)," items"]}),Object(V.jsx)(re.a.Body,{children:a.a.Children.toArray(c.map((function(n,i){if(n.constructor===Object){var c=Object.entries(n);return Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(Ce.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(V.jsx)(Ce.a,{sm:1,children:Object(V.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(c.map((function(n){var a=Object(l.a)(n,2),c=a[0],o=a[1];return Object(V.jsx)(Ce.a,{sm:3,children:Object(V.jsx)(_e.a.Group,{className:"mb-3",children:Object(V.jsx)(_e.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s,i,c])},value:o,placeholder:q().enter+" "+c})})})})))]})}return"number"===typeof n?Object(V.jsxs)(Se.a,{children:[Object(V.jsx)(Ce.a,{sm:1,children:Object(V.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(V.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(V.jsx)(Ce.a,{sm:3,children:Object(V.jsx)(_e.a.Control,{type:"number",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s,i])},value:isNaN(n)?"":n,placeholder:q().enter+" "+s},""+t+r+s+i)})]}):"string"===typeof n?"TODO string":void 0})))})]})})}):void 0})))]})})))})]})}(s)}return c.constructor===Object?"TODO":""})))]}),Object(V.jsx)(h.a,{variant:"primary",type:"submit",children:"Submit"},"submit")]})},Ie=n(73);function De(e){var t=Object(b.h)(),n=t.resource,i=t.id,s=Object(r.useState)(),d=Object(l.a)(s,2),j=d[0],h=d[1],p=Object(r.useState)(""),f=Object(l.a)(p,2),O=f[0],m=f[1],x=Object(b.g)(),g=Object(r.useState)(Ie(H[n])),v=Object(l.a)(g,2),y=v[0],k=v[1],w=Object(r.useState)({}),N=Object(l.a)(w,2),C=N[0],_=(N[1],Object(r.useState)(void 0)),A=Object(l.a)(_,2),I=A[0],D=A[1],F=Object(r.useState)(!1),P=Object(l.a)(F,2),z=(P[0],P[1]);a.a.useRef({});Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t,r,a,s,c,l,d,j,b,p,f,O,m,x=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,T(n,t);case 3:r=e.sent,a=r.docs[0],s=Ie(y),c=Object.entries(a),l=0;case 8:if(!(l<c.length)){e.next=36;break}if(!Array.isArray(c[l][1])){e.next=33;break}if(0!==c[l][1].length){e.next=12;break}return e.abrupt("continue",33);case 12:if(c[l][1][0].constructor!==Object){e.next=25;break}d=0;case 14:if(!(d<c[l][1].length)){e.next=23;break}if(void 0!==H[n][c[l][0]][0]){e.next=17;break}return e.abrupt("continue",20);case 17:j=Object(ve.a)({},H[n][c[l][0]][0]),Object.assign(j,c[l][1][d]),c[l][1][d]=j;case 20:d++,e.next=14;break;case 23:e.next=33;break;case 25:b=0;case 26:if(!(b<c[l][1].length)){e.next=33;break}if(void 0!==H[n][c[l][0]]&&void 0!==H[n][c[l][0]][0]){e.next=29;break}return e.abrupt("continue",30);case 29:c[l][1][b]=c[l][1][b];case 30:b++,e.next=26;break;case 33:l++,e.next=8;break;case 36:for(Object.assign(s,a),p=Object.keys(s),f=Object.keys(H[n]),O=0;O<p.length;O++)f.includes(p[O])||delete s[p[O]];m=function(){var e=Object(o.a)(u.a.mark((function e(){var t,r,a,c,o,l,d,j,b,p,f,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==G[n]){e.next=7;break}for(D({}),t=Object.keys(s),r=0;r<t.length;r++)a=t[r],s=R(s,[a]);return k(s),h(Ie(s)),e.abrupt("return");case 7:c={},void 0!==I&&(c=I),o=Object.entries(G[n]),l=0;case 11:if(!(l<o.length)){e.next=24;break}if(d=o[l][0],j=o[l][1],void 0!==s[d]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==j.type){e.next=21;break}return e.next=19,j.policy(i);case 19:b=e.sent,c[d]=b;case 21:l++,e.next=11;break;case 24:for(p=Object.keys(s),f=0;f<p.length;f++)O=p[f],void 0!==c[O]&&!1!==c[O]||(s=R(s,[O]));D(c),k(s),h(Ie(s));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m();case 42:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:i};e({filter:JSON.stringify(t)}),z(!0)}),[]);var R=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Ie(e),i=a,s=Ie(H[n]),o=Object(c.a)(t),l=0;l<o.length&&void 0!==t[l];l++)i=i[t[l]];for(var d=0;d<o.length&&void 0!==t[d]&&void 0!==s;d++)s="number"===typeof t[d]?s[0]:s[t[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ve.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ye(e)})).length&&i.push(Object(ve.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ye(e)})).length)&&(r.constructor===Object?i.push(Object(ve.a)({},r)):i.push(r)),a):a},B=function(){var e=Object(o.a)(u.a.mark((function e(t){var r,a,s,o,l,d,b,h,p,f,O,g,v,k,w,N;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),r=Ie(y),a=Ie(j),we(r),we(a),s={},o=Object.entries(r),l=0;l<o.length;l++)if(d=o[l][0],b=o[l][1],Array.isArray(b)){if(void 0===s[d]&&(s[d]={add:[],remove:[],update:[]}),h=Object(c.a)(a[d]),void 0!==C[d])for(p=0;p<C[d].indexes.length;p++)(f=h.splice(C[d].indexes[p][0],1)[0]).constructor===Object?(O=Object.keys(f)[0],s[d].remove.push(f[O])):s[d].remove.push(f);for(g=0;g<r[d].length;g++)g<h.length&&!Ne(r[d][g],h[g])&&(r[d][g].constructor===Object?(k=Object.keys(h[g])[0],s[d].update.push((v={},Object(ge.a)(v,k,h[g][k]),Object(ge.a)(v,"new",r[d][g]),v))):(s[d].add.push(r[d][g]),s[d].remove.push(h[g]))),g>=h.length&&s[d].add.push(r[d][g]);Ne(s[d],{add:[],remove:[],update:[]})&&delete s[d]}else b.constructor===Object||b!==j[d]&&(s[d]=b);return e.prev=8,e.next=11,S(n,s,i);case 11:N=e.sent,w=N.response,m(w.statusText),x("/"+n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),w=e.t0.error.response,m(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"page",children:[Object(V.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(V.jsx)("b",{children:n}),"\xa0of id:\xa0",Object(V.jsx)("b",{children:i}),"\xa0from:"]}),Object(V.jsxs)("main",{className:"page-content",children:[Object(V.jsx)(Te,{values:y,resource:n,functionalFields:H,disabledFields:I,handleChangesCallback:function(e,t){var n,r=Ie(y),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=R(r,t.slice(0,i),s)}k(r)},arrayDeleteCallback:function(e){var t,n=Ie(y),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a=r.splice(e[t],1),i="number"===typeof a[0]?NaN:"";n=R(n,e.slice(0,t),i),1===t&&(void 0===C[e[0]]&&(C[e[0]]={indexes:[],elements:[],minDel:1/0}),ye(a[0])||(C[e[0]].elements.push(a[0]),C[e[0]].indexes.push(e[t]>=C[e[0]].minDel?e[t]+C[[e[0]]].indexes.filter((function(n){return n>=e[t]})).length:e[t]),e[t]<C[e[0]].minDel&&(C[e[0]].minDel=e[t]))),k(n)},submitFunction:B}),Object(V.jsx)("br",{}),Object(V.jsx)("font",{style:{marginLeft:"5px"},children:O})]})]})}var Fe=n(178),Pe=n(73);function ze(e){var t=Object(b.h)().resource,n=Object(j.c)(),i=Object(l.a)(n,2),s=i[0];i[1];void 0!==e.resource&&(t=e.resource);var d=Object(b.g)(),p=Object(r.useState)("form"),f=Object(l.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),g=Object(l.a)(x,2),v=g[0],k=g[1],N=Object(r.useState)(Pe(M[t])),S=Object(l.a)(N,2),C=S[0],_=S[1],A=Object(r.useState)(void 0),I=Object(l.a)(A,2),D=I[0],F=I[1],P=Object(r.useState)(void 0),z=Object(l.a)(P,2),R=z[0],B=z[1],W=Object(r.useState)(void 0),E=Object(l.a)(W,2),L=E[0],K=E[1],H=Object(r.useState)(void 0),G=Object(l.a)(H,2),U=G[0],Y=G[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var n,r,a,i=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,T(t,n);case 3:r=e.sent,a=Pe(C),Object.keys(a).map((function(e){if(void 0!==r.docs[0][e])if(Array.isArray(r.docs[0][e])){if(!ye(r.docs[0][e]))if(r.docs[0][e][0].constructor===Object){var t=Object.keys(a[e][0]),n=r.docs[0][e].map((function(e){var n={};return t.map((function(e){return n[e]=null})),Object.assign(n,e)}));a[e]=n.concat(a[e])}else a[e]=r.docs[0][e].concat(a[e])}else a[e]=r.docs[0][e]})),_(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var n={_id:s.get("from")};e({filter:JSON.stringify(n)})}}),[e,s]),void 0===M[t])return Object(V.jsx)("div",{children:"This entity cannot be posted"});var Q=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Pe(e),i=a,s=Pe(M[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ve.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ye(e)})).length&&i.push(Object(ve.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ye(e)})).length)&&(r.constructor===Object?i.push(Object(ve.a)({},r)):i.push(r)),a):a},X=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=Pe(C)).token&&(r=a.token,delete a.token),i=Pe(a),we(i),e.prev=6,e.next=9,w(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,k(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,k(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&d("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!D.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",D),e.prev=4,e.next=7,y(t,a);case 7:i=e.sent,r=i.response,k(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,k(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!D.name.endsWith(".json")){e.next=32;break}return console.log(U),e.prev=19,e.next=22,w(t,U,void 0);case 22:s=e.sent,r=s.response,k(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,k(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&d("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"page",children:[Object(V.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(V.jsx)("b",{children:t})]}),Object(V.jsxs)("main",{className:"page-content",children:[Object(V.jsxs)(Fe.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[J[t].includes("form")&&Object(V.jsx)(Fe.a.Item,{children:Object(V.jsx)(Fe.a.Link,{eventKey:"form",children:"Form"})}),J[t].includes("file")&&null===s.get("from")&&Object(V.jsx)(Fe.a.Item,{children:Object(V.jsx)(Fe.a.Link,{eventKey:"file",children:"File"})})]}),Object(V.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&Object(V.jsxs)("div",{style:{margin:"5px"},children:[Object(V.jsx)(Te,{values:C,resource:t,functionalFields:M,disabledFields:{},handleChangesCallback:function(e,t){var n,r=Pe(C),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);a[t[n]]=e,-1!==i&&(r=Q(r,t.slice(0,i))),_(r)},arrayDeleteCallback:function(e){var t,n=Pe(C),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];r.splice(e[t],1),n=Q(n,e.slice(0,t)),_(n)},submitFunction:X}),Object(V.jsx)("br",{}),Object(V.jsx)("font",{style:{marginLeft:"5px"},children:v})]}),"file"===O&&Object(V.jsx)("div",{style:{margin:"5px"},children:Object(V.jsxs)(_e.a,{onSubmit:Z,children:[Object(V.jsx)(_e.a.Label,{children:Object(V.jsx)("b",{children:q().select_file})}),Object(V.jsx)(_e.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];F(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");B(a[0]),a.splice(0,1),K(a)}if(t.name.endsWith(".json")){var i=n.result;Y(i)}},n.readAsText(t)}}),void 0!==L&&void 0!==R&&Object(V.jsx)(re.a,{children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsx)(re.a.Header,{children:q().file_content}),Object(V.jsx)(re.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(V.jsxs)(ne.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsx)("tr",{children:a.a.Children.toArray(R.split(",").map((function(e){return Object(V.jsx)("th",{children:e})})))})}),Object(V.jsx)("tbody",{children:a.a.Children.toArray(L.map((function(e){return Object(V.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(V.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==U&&Object(V.jsx)(re.a,{children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsx)(re.a.Header,{children:q().file_content}),Object(V.jsx)(re.a.Body,{style:{overflow:"scroll",height:"70vh"},children:U})]})}),Object(V.jsx)(h.a,{variant:"primary",type:"submit",children:"Submit"}),Object(V.jsx)("br",{}),Object(V.jsx)("font",{style:{marginLeft:"5px"},children:v})]})})]})]})]})}var Re=n(73);function Be(e){var t="experiments",n=Object(j.c)(),i=Object(l.a)(n,2),s=i[0],d=(i[1],Object(b.g)()),p=Object(r.useState)("form"),f=Object(l.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),g=Object(l.a)(x,2),v=g[0],k=g[1],N=Object(r.useState)(Re(M[t])),S=Object(l.a)(N,2),C=S[0],_=S[1],A=Object(r.useState)({}),I=Object(l.a)(A,2),D=I[0],F=I[1],P=Object(r.useState)(),z=Object(l.a)(P,2),R=z[0],B=z[1],W=Object(r.useState)(),E=Object(l.a)(W,2),L=(E[0],E[1]),K=Object(r.useState)(void 0),H=Object(l.a)(K,2),G=H[0],U=H[1],Y=Object(r.useState)(void 0),Q=Object(l.a)(Y,2),X=Q[0],Z=Q[1],$=Object(r.useState)(void 0),ee=Object(l.a)($,2),te=ee[0],ae=ee[1],ie=Object(r.useState)(void 0),se=Object(l.a)(ie,2),ce=se[0],oe=se[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,T("protocols",t);case 3:n=e.sent,B(n.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,s]),void 0===M[t])return Object(V.jsx)("div",{children:"This entity cannot be posted"});var le=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s,c,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,r={_id:t.target.value},a={filter:JSON.stringify(r)},e.next=6,T("protocols",a);case 6:for(i=e.sent,s=i.docs[0],c=[],o=0;o<s.metadata.length;o++)"scalar"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:NaN}),"text"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:""}),"vector"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:[NaN]});(l=Re(C)).protocol=n,0!==c.length&&(l.metadata=c),(d=Re(D)).protocol=!0,F(d),L(n),_(l);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Re(e),i=a,s=Re(M[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return void 0===s||Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(ve.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ye(e)})).length&&i.push(Object(ve.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ye(e)})).length)&&(r.constructor===Object?i.push(Object(ve.a)({},r)):i.push(r)),a):a},ue=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=Re(C)).token&&(r=a.token,delete a.token),i=Re(a),we(i),e.prev=6,e.next=9,w(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,k(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,k(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&d("/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!G.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",G),e.prev=4,e.next=7,y(t,a);case 7:i=e.sent,r=i.response,k(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,k(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!G.name.endsWith(".json")){e.next=32;break}return console.log(ce),e.prev=19,e.next=22,w(t,ce,void 0);case 22:s=e.sent,r=s.response,k(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,k(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&d("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("div",{className:"page",children:[Object(V.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(V.jsx)("b",{children:t})]}),Object(V.jsxs)("main",{className:"page-content",children:[Object(V.jsxs)(Fe.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[J[t].includes("form")&&Object(V.jsx)(Fe.a.Item,{children:Object(V.jsx)(Fe.a.Link,{eventKey:"form",children:"Form"})}),J[t].includes("file")&&null===s.get("from")&&Object(V.jsx)(Fe.a.Item,{children:Object(V.jsx)(Fe.a.Link,{eventKey:"file",children:"File"})})]}),Object(V.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&void 0!==R&&Object(V.jsxs)("div",{style:{margin:"5px"},children:[Object(V.jsxs)(_e.a.Select,{"aria-label":q().select+" protocol",onChange:le,children:[Object(V.jsxs)("option",{children:[q().select," protocol"]}),a.a.Children.toArray(R.map((function(e){return Object(V.jsx)("option",{value:e,children:e})})))]}),Object(V.jsx)("br",{}),Object(V.jsx)(Te,{values:C,resource:t,functionalFields:M,disabledFields:D,handleChangesCallback:function(e,t){var n,r=Re(C),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=de(r,t.slice(0,i),s)}console.log({tmpVals:r}),_(r)},arrayDeleteCallback:function(e){var t,n=Re(C),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a="number"===typeof r.splice(e[t],1)[0]?NaN:"";n=de(n,e.slice(0,t),a),_(n)},submitFunction:ue}),Object(V.jsx)("br",{}),Object(V.jsx)("font",{style:{marginLeft:"5px"},children:v})]}),"file"===O&&Object(V.jsx)("div",{style:{margin:"5px"},children:Object(V.jsxs)(_e.a,{onSubmit:je,children:[Object(V.jsx)(_e.a.Label,{children:Object(V.jsx)("b",{children:q().select_file})}),Object(V.jsx)(_e.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];U(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");Z(a[0]),a.splice(0,1),ae(a)}if(t.name.endsWith(".json")){var i=n.result;oe(i)}},n.readAsText(t)}}),void 0!==te&&void 0!==X&&Object(V.jsx)(re.a,{children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsx)(re.a.Header,{children:q().file_content}),Object(V.jsx)(re.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(V.jsxs)(ne.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(V.jsx)("thead",{children:Object(V.jsx)("tr",{children:a.a.Children.toArray(X.split(",").map((function(e){return Object(V.jsx)("th",{children:e})})))})}),Object(V.jsx)("tbody",{children:a.a.Children.toArray(te.map((function(e){return Object(V.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(V.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==ce&&Object(V.jsx)(re.a,{children:Object(V.jsxs)(re.a.Item,{eventKey:"0",children:[Object(V.jsx)(re.a.Header,{children:q().file_content}),Object(V.jsx)(re.a.Body,{style:{overflow:"scroll",height:"70vh"},children:ce})]})}),Object(V.jsx)(h.a,{variant:"primary",type:"submit",children:"Submit"}),Object(V.jsx)("br",{}),Object(V.jsx)("font",{style:{marginLeft:"5px"},children:v})]})})]})]})]})}var We=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],i=localStorage.getItem("diten-token");function s(e){a((function(t){return[e].concat(t)}))}function d(e){var t=Object(c.a)(n);t.splice(e,1),a(t)}function h(){a([])}Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T("types",{},"");case 3:t=e.sent,n=t.response.data,xe=n,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===xe)try{e()}catch(t){console.log(t)}}),[]);var p={notifications:n,PushNotification:s,RemoveNotification:d,ClearNotifications:h};return g.ClearNotifications=h,g.PushNotification=s,g.RemoveNotification=d,null===i?Object(V.jsx)("div",{className:"app",children:Object(V.jsx)(j.a,{children:Object(V.jsxs)(b.d,{children:[Object(V.jsx)(b.b,{path:"/",element:Object(V.jsx)(Q,{})}),Object(V.jsx)(b.b,{path:"/add/tenants",element:Object(V.jsx)(ze,{resource:"tenants"})})]})})}):Object(V.jsx)(Oe.Provider,{value:p,children:Object(V.jsx)("div",{className:"app",children:Object(V.jsxs)(j.a,{children:[Object(V.jsxs)("aside",{children:[Object(V.jsx)(j.b,{to:"/home",className:"nav-wrap",children:"Measurify Admin Dashboard"}),Object(V.jsx)(te,{})]}),Object(V.jsx)("div",{className:"main",children:Object(V.jsxs)(b.d,{children:[Object(V.jsx)(b.b,{path:"/",element:Object(V.jsx)(X,{})}),Object(V.jsx)(b.b,{path:"/home",element:Object(V.jsx)(X,{})}),Object(V.jsx)(b.b,{path:"/add/experiments/",element:Object(V.jsx)(Be,{})}),Object(V.jsx)(b.b,{path:"/edit/:resource/:id",element:Object(V.jsx)(De,{})}),Object(V.jsx)(b.b,{path:"/add/:resource/",element:Object(V.jsx)(ze,{})}),Object(V.jsx)(b.b,{path:"/:page",element:Object(V.jsx)(ue,{res:":page"})}),Object(V.jsx)(b.b,{path:"/unauthorized",element:Object(V.jsx)(je,{})}),Object(V.jsx)(b.b,{path:"/404",element:Object(V.jsx)(Z,{})}),Object(V.jsx)(b.b,{path:"*",element:Object(V.jsx)(b.a,{to:"/404",replace:!0})})]})}),Object(V.jsx)("div",{className:"right-bar",children:Object(V.jsx)(me,{})})]})})})};s.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(We,{})}),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.bbb13a52.chunk.js.map