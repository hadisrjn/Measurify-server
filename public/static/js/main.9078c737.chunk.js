(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{105:function(e,t,n){},129:function(e,t){},131:function(e,t){},146:function(e,t,n){},147:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},162:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(20),s=n.n(i),c=(n(105),n(12)),o=n(5),l=n(11),d=n(3),u=n(14),j=n(9),b=n(167),h={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti i collegamenti alle pagine per le quali possiedi l'autorizzazione.",right_bar_descr_hp:"Nella barra a destra sono presenti le informazioni relative al tuo account e alla scadenza della sessione corrente.",session_expire_info_hp:"Al termine della sessione non sarai espulso automaticamente e potrai continuare a visualizzare la pagina attiva. Ogni azione successiva porter\xe0 alla disconnessione.",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante. Se sei arrivato a questa pagina utilizzando le funzioni dell'interfaccia segnala il bug: un team accuratamente selezionato di studenti universitari prover\xe0 a risolvere il problema.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta"},p={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",tools:"Tools",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to Measurify dashboard!",left_bar_descr_hp:"The left bar contains all the links for the pages you are allowed to navigate to",right_bar_descr_hp:"The right bar contains the information about your account and the expiration of the current session.",session_expire_info_hp:"When this session will expire you will not be logged-out instantly, you will still be able to watch the active page. Each action on this or another page will force your log-out.",github_page_hp:"Measurify Github page",github_issue_page_hp:"Report bugs or issues",oh_no:"Oh No!",broken_link:"It looks like you used a broken link. If you arrived at this page using the interface features report the bug: a carefully selected team of college students will try to fix it.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired"},f=n(106).default,O=n(124),m=f.create({httpsAgent:new O.Agent({rejectUnauthorized:!1})}),x={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function g(e,t,n){var r={username:"".concat(e),password:"".concat(t),tenant:"".concat(n)},a={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:I()}},i=P+"/login";return new Promise((function(e,t){m.post(i,r,a).then((function(t){localStorage.setItem("diten-token",t.data.token),localStorage.setItem("diten-token-expiration-time",t.data.token_expiration_time),localStorage.setItem("diten-username",t.data.user.username),localStorage.setItem("diten-user-role",t.data.user.type),localStorage.setItem("diten-user-tenant",n),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function v(e,t){return y.apply(this,arguments)}function y(){return y=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s,c,l=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:{},void 0===(a=l.length>3&&void 0!==l[3]?l[3]:void 0)&&(a=I()),i=P+"/"+t+"/file",console.log("POST file:"+i),s={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(r).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];s[n]=r})),c={headers:s},e.abrupt("return",new Promise((function(e,r){m.post(i,n,c).then((function(n){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:n})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),r({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function k(e,t){return w.apply(this,arguments)}function w(){return w=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(r=s.length>2&&void 0!==s[2]?s[2]:void 0)&&(r=I()),a=P+"/"+t+"/",console.log("POST :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},console.log({header:i,body:n,token:r}),e.abrupt("return",new Promise((function(e,r){m.post(a,n,i).then((function(n){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:n})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function N(e,t,n){return S.apply(this,arguments)}function S(){return S=Object(l.a)(Object(o.a)().mark((function e(t,n,r){var a,i,s,c=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:void 0,i=P+"/"+t+"/"+r,void 0===a&&(a=I()),console.log("PUT :"+i),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){m.put(i,n,s).then((function(a){x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)}),e({response:a})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function C(e,t){return _.apply(this,arguments)}function _(){return _=Object(l.a)(Object(o.a)().mark((function e(t,n){var r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:void 0,a=P+"/"+t,void 0===r&&(r=I()),void 0!==n&&(a+="/"+n),console.log("DELETE :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},e.abrupt("return",new Promise((function(e,r){m.delete(a,i).then((function(r){void 0!==n?x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+n+", of type: "+t}):x.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:r})})).catch((function(e){x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+n+", of type: "+t+". "+e.message}),404===e.statusCode&&x.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function A(e){return T.apply(this,arguments)}function T(){return T=Object(l.a)(Object(o.a)().mark((function e(t){var n,r,a,i,s=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,a=P+"/"+t+"/",void 0===r&&(r=I()),a=void 0!==n.filter?a.concat("?filter="+n.filter):a.concat("?filter="),void 0!==n.limit&&(a=a.concat("&limit="+n.limit)),void 0!==n.page&&(a=a.concat("&page="+n.page)),console.log("GET :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r},json:!0},e.abrupt("return",new Promise((function(e,t){m.get(a,i).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function I(){return localStorage.getItem("diten-token")}function D(e){return F.apply(this,arguments)}function F(){return(F=Object(l.a)(Object(o.a)().mark((function e(t){var n,r;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={filter:JSON.stringify({feature:t})},e.prev=1,e.next=4,A("measurements",n);case 4:if(!(e.sent.totalDocs>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return r={filter:JSON.stringify({features:t})},e.next=12,A("devices",r);case 12:if(!(e.sent.totalDocs>0)){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(1),console.log("Error on isFeatureInUse"),console.log(e.t0),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}var P="https://localhost/v1",z="Measurify Admin Dashboard",R=[],B={users:["username","type","actions"],tags:["_id","actions"],features:["_id","actions"],devices:["_id","tags","actions"],protocols:["_id","description","actions"],experiments:["_id","description","protocol","actions"]},W={features:{_id:"Feature Name",actions:"Actions"},tags:{_id:"Tag Name",actions:"Actions"},devices:{_id:"Device Name",actions:"Actions"}},E={features:["view","edit","duplicate","delete"],users:["view","delete"],tags:["view","edit","delete"],devices:["view","edit","delete"],protocols:["view","delete"],experiments:["view","delete"]},L={users:["username","type","actions","fieldmask","status"],features:[{items:["name","type","unit","dimension"]},"tags"],tags:["tags"],devices:["_id","features","tags","scripts"],protocols:["_id","description","metadata"],experiments:["_id","description","protocol","history","metadata"]},K={features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},tags:{tags:[""]},devices:{visibility:"",tags:[""]}},M={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},tags:{_id:"",tags:[""]},features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},users:{username:"",password:"",type:""},devices:{_id:"",features:[""]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:""}},G={};G.features={_id:{type:"disable",policy:D},items:{type:"disable",policy:D}};var H={tags:["form","file"],features:["form","file"],tenants:["form"],users:["form","file"],devices:["form","file"],protocols:["form","file"],experiments:["form","file"]},J={};function U(){var e=localStorage.getItem("diten-language");return 0===R.length?p:(1===R.length&&(e=R[0]),"it"===e?h:"en"===e?p:"it"===navigator.language.substring(0,2)?h:(navigator.language.substring(0,2),p))}J.users={type:"UserRoles",status:"UserStatusTypes"},J.devices={measurementBufferPolicy:"MeasurementBufferPolicyTypes"};n(146),n(147);var q=n(0),V=function(){function e(e){localStorage.setItem("diten-language",e),window.location.reload()}return Object(q.jsxs)("div",{children:[U().language,Object(q.jsxs)("div",{children:[Object(q.jsx)(b.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),Object(q.jsx)(b.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},Y=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),s=Object(d.a)(i,2),c=s[0],j=s[1],h=Object(r.useState)(""),p=Object(d.a)(h,2),f=p[0],O=p[1],m=Object(r.useState)(!0),x=Object(d.a)(m,2),v=x[0],y=x[1],k=Object(r.useState)(""),w=Object(d.a)(k,2),N=w[0],S=w[1];function C(){return(C=Object(l.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,g(n,c,f);case 4:e.sent,!0===v?localStorage.setItem("diten-logged-in","keep"):localStorage.setItem("diten-logged-in","logout"),window.location.replace("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log({error:e.t0.response.data}),S(e.t0.response.data.message+" : "+e.t0.response.data.details);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(q.jsxs)("div",{className:"auth-page",children:[Object(q.jsxs)("div",{className:"title-wrapper",children:[Object(q.jsx)("div",{className:"title-section",children:"Measurify"}),Object(q.jsx)("br",{}),Object(q.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),R.length>1&&Object(q.jsx)("div",{className:"language-wrapper",children:Object(q.jsx)(V,{})}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsxs)("div",{className:"login-section",children:[Object(q.jsx)("h4",{children:U().login}),Object(q.jsxs)("form",{className:"form-content",onSubmit:function(e){return C.apply(this,arguments)},children:[Object(q.jsxs)("div",{className:"form-row row",children:[Object(q.jsx)("label",{children:U().username}),Object(q.jsx)("input",{type:"text",id:"username",placeholder:U().username_suggestion,onChange:function(e){a(e.target.value)}})]}),Object(q.jsxs)("div",{className:"form-row row",children:[Object(q.jsx)("label",{children:U().password}),Object(q.jsx)("input",{type:"password",id:"password",placeholder:U().password_suggestion,onChange:function(e){j(e.target.value)}})]}),Object(q.jsxs)("div",{className:"form-row row",children:[Object(q.jsx)("label",{children:U().tenant}),Object(q.jsx)("input",{type:"text",id:"tenant",placeholder:U().tenant_suggestion,onChange:function(e){O(e.target.value)}})]}),Object(q.jsxs)("div",{className:"form-row row",children:[Object(q.jsx)("label",{children:U().keep_logged}),Object(q.jsx)("input",{type:"checkbox",id:"logged",className:"input-checkbox",checked:v,onChange:function(e){y(e.target.checked)}})]}),Object(q.jsx)("div",{className:"buttons-wrapper center",children:Object(q.jsx)(b.a,{type:"submit",variant:"success",children:U().submit})}),Object(q.jsx)("br",{}),Object(q.jsx)("div",{style:{color:"red"},children:N}),Object(q.jsx)("br",{}),Object(q.jsx)("div",{className:"form-row row",children:Object(q.jsx)(u.b,{to:"/add/tenants",children:Object(q.jsxs)(b.a,{variant:"outline-success",size:"sm",children:[U().add_tenant,Object(q.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})]})},Q=(n(149),function(){return Object(r.useEffect)((function(){})),Object(q.jsxs)("div",{className:"page",children:[Object(q.jsx)("header",{className:"page-header",children:z}),Object(q.jsx)("main",{className:"page-content",children:Object(q.jsx)("div",{className:"home-page",children:Object(q.jsx)("div",{className:"info-box",children:Object(q.jsxs)("div",{className:"info-text",children:[U().welcome_hp,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),U().left_bar_descr_hp,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),U().right_bar_descr_hp,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),U().session_expire_info_hp,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)("a",{href:"https://github.com/measurify/server/tree/r2.0",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/tree/r2.0",children:U().github_page_hp}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:U().github_issue_page_hp}),Object(q.jsx)("br",{})]})})})})]})}),X=(n(150),function(){return Object(q.jsx)("div",{className:"notFound-page",children:Object(q.jsx)("div",{className:"info-box",children:Object(q.jsxs)("div",{className:"info-text",children:[U().oh_no,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),U().broken_link,Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:U().github_issue_page_hp})]})})})}),Z=(n(151),n(50)),$=n(16);Z.a.library.add($.g,$.a,$.l,$.j,$.i,$.k,$.h,$.b);var ee=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(),c=Object(d.a)(s,2),o=c[0],l=c[1],j=Object(r.useState)(),h=Object(d.a)(j,2),p=h[0],f=h[1],O=Object(r.useState)(),x=Object(d.a)(O,2),g=x[0],v=x[1],y=Object(r.useState)(),k=Object(d.a)(y,2),w=k[0],N=k[1],S=Object(r.useState)(),C=Object(d.a)(S,2),_=C[0],A=C[1],T=Object(r.useState)(),D=Object(d.a)(T,2),F=D[0],z=D[1],W=Object(r.useState)("00:00"),E=Object(d.a)(W,2),L=E[0],K=E[1];function M(){var e;if(void 0===w){var t=localStorage.getItem("diten-login-time");null!==t?(e=parseInt(t),N(parseInt(t))):e=Date.now()}else e=w;var n=(e+function(){var e;if(void 0===_){var t=localStorage.getItem("diten-token-expiration-time");null!==t?(e=t,A(t)):e="5m"}else e=_;return e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()-Date.now())/1e3;if(n<60&&"keep"===F&&function(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:I()}},t=P+"/login";return new Promise((function(n,r){m.put(t,{},e).then((function(e){localStorage.setItem("diten-token",e.data.token),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),n(e)})).catch((function(e){r(e)}))}))}().then((function(){N(void 0)})),n<=0)return localStorage.clear(),K(U().session_expired),void window.location.replace("/");var r=Math.floor(n/60),a=Math.floor(n%60);K(r+" : "+("0"+a).slice(-2))}return Object(r.useEffect)((function(){var e=localStorage.getItem("diten-username"),t=localStorage.getItem("diten-user-role"),n=localStorage.getItem("diten-user-tenant"),r=localStorage.getItem("diten-login-time"),a=localStorage.getItem("diten-token-expiration-time"),i=localStorage.getItem("diten-logged-in");l(null!==e?e:""),f(null!==t?t:""),v(null!==n&&""!==n?n:"-"),A(null!==a?a:"300m"),z(null!==i?i:"logout"),N(null!==r?parseInt(r):Date.now()),setTimeout((function(){M()}),1e3)}),[L]),Object(q.jsxs)("nav",{className:"app-nav",children:[Object(q.jsx)(b.a,{className:"app-nav-opener",onClick:function(){return i(!n)},children:n?Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(q.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(q.jsx)("hr",{}),Object(q.jsxs)("div",{className:"data-wrapper",children:[Object(q.jsxs)("div",{children:[Object(q.jsxs)("h3",{children:[U().welcome+" ",Object(q.jsx)("b",{children:o})]}),Object(q.jsxs)("h3",{children:[U().role+" ","admin"===p?Object(q.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===p?Object(q.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===p?Object(q.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===p?Object(q.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(q.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]}),Object(q.jsxs)("h3",{children:[U().tenant+" ",Object(q.jsx)("b",{children:g})]}),Object(q.jsx)("h3",{children:L!==U().session_expired?U().session_expire_in+L:L}),Object(q.jsxs)("h3",{children:[U().keep_logged,"  ","keep"===F?Object(q.jsx)("i",{className:"fa fa-check",id:"logged_icon_check","aria-hidden":"true",style:{width:"10px",height:"10px",marginRight:"2px"}}):Object(q.jsx)("i",{className:"fa fa-times",id:"logged_icon_times","aria-hidden":"true",style:{width:"10px",height:"10px",marginRight:"2px"}})]})]}),Object(q.jsx)("br",{}),Object(q.jsx)(b.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:U().logout}),R.length>1&&Object(q.jsxs)(a.a.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("h2",{children:Object(q.jsx)(V,{})})]})]}),Object(q.jsx)("hr",{}),Object(q.jsx)("div",{className:"app-nav-wrapper ".concat(n?"opened":""),children:Object(q.jsxs)("div",{className:"app-nav-links",children:[Object(q.jsx)("div",{className:"app-nav-text",children:U().tools}),Object(q.jsx)("hr",{}),Object.keys(B).map((function(e){return Object(q.jsx)(u.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return i(!1)},children:e},e)}))]})})]})},te=n(168),ne=n(176),re=n(100),ae=n(173);function ie(e){var t={};return L[e.resType].map((function(n){n instanceof Object?Object.keys(n).map((function(r){Array.isArray(e.resource[r])?t[r]=e.resource[r].map((function(e){var t={};return n[r].map((function(n){t[n]=e[n]})),t})):t[r]=e.resource[r]})):Object.keys(e.resource).includes(n)&&(t[n]=e.resource[n])})),Object(q.jsx)(ne.a,{defaultActiveKey:"0",style:{width:"15vw",minWidth:"380px"},children:a.a.Children.toArray(Object.keys(t).map((function(e,n){return Object(q.jsxs)(ne.a.Item,{eventKey:n,children:[Object(q.jsx)(ne.a.Header,{children:Object(q.jsx)("b",{children:e})}),Object(q.jsx)(ne.a.Body,{children:null!==t[e]?Array.isArray(t[e])?t[e][0]instanceof Object?Object(q.jsxs)(te.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(q.jsx)("thead",{children:Object(q.jsx)("tr",{children:a.a.Children.toArray(Object.keys(t[e][0]).map((function(e){return Object(q.jsx)("th",{children:e})})))})}),Object(q.jsx)("tbody",{children:a.a.Children.toArray(t[e].map((function(e,t){return Object(q.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(q.jsx)("td",{children:e})})))})})))})]}):"[ "+t[e].join(" - ")+" ]":t[e]:"None"})]})})))})}function se(e){var t=Object(r.useState)(void 0),n=Object(d.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){}),[e]);var s=void 0!==a?Object(q.jsxs)(re.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:"400px"},children:[Object(q.jsx)(re.a.Header,{as:"h3",children:"View Resource"}),Object(q.jsx)(re.a.Body,{children:Object(q.jsx)(ie,{resource:a,resType:e.resType})})]}):Object(q.jsx)(re.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(q.jsxs)(re.a.Header,{as:"h3",children:["Loading",Object(q.jsx)(re.a.Body,{})]})});return"view"===e.action?Object(q.jsx)(ae.a,{trigger:"click",placement:"left",overlay:s,rootClose:!0,children:Object(q.jsx)(b.a,{variant:"link",size:"sm",onClick:function(){i(e.takeSingle(e.id))},children:Object(q.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(q.jsx)(b.a,{variant:"link",size:"sm",onClick:Object(l.a)(Object(o.a)().mark((function t(){return Object(o.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,C(e.resType,e.id);case 5:200==t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(q.jsx)(u.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(q.jsx)(b.a,{variant:"link",size:"sm",children:Object(q.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(q.jsx)(u.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(q.jsx)(b.a,{variant:"link",size:"sm",children:Object(q.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(q.jsx)("div",{})}function ce(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(q.jsx)("div",{children:"Loading"}):Object(q.jsx)("div",{children:Object(q.jsxs)(te.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(q.jsx)("thead",{children:Object(q.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==W[e.resType]&&void 0!==W[e.resType][t]?Object(q.jsx)("th",{children:W[e.resType][t]}):Object(q.jsx)("th",{children:t})})))},"header")}),Object(q.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,n){return Object(q.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(r){return"actions"===r?Object(q.jsxs)("td",{children:[e.actions.includes("view")?Object(q.jsx)(se,{resType:e.resType,action:"view",k:n+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")?Object(q.jsx)(se,{resType:e.resType,action:"edit",k:n+"_edit",id:t._id}):"",e.actions.includes("duplicate")?Object(q.jsx)(se,{resType:e.resType,action:"duplicate",k:n+"_duplicate",id:t._id}):"",e.actions.includes("delete")?Object(q.jsx)(se,{resType:e.resType,action:"delete",k:n+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[r]?Array.isArray(t[r])?Object(q.jsx)("td",{children:"[ "+t[r].join(" , ")+" ]"}):Object(q.jsx)("td",{children:t[r]}):void 0})))})})))})]})})}Z.a.library.add($.d,$.e,$.c);var oe=n(179);n(152);function le(e){var t=Object(j.o)().page,n=Object(u.c)(),a=Object(d.a)(n,2),i=a[0],s=a[1],c=Object(r.useState)(void 0),h=Object(d.a)(c,2),p=h[0],f=h[1],O=Object(r.useState)(void 0),m=Object(d.a)(O,2),x=m[0],g=m[1],v=Object(r.useState)(void 0),y=Object(d.a)(v,2),k=y[0],w=y[1],N=Object(r.useState)(1),S=Object(d.a)(N,2),C=S[0],_=S[1],T=Object(r.useState)(1),I=Object(d.a)(T,2),D=I[0],F=I[1],P=Object(r.useState)(),z=Object(d.a)(P,2),R=z[0],W=z[1],L=Object(r.useState)(),K=Object(d.a)(L,2),G=K[0],H=K[1],J=Object(r.useState)(),U=Object(d.a)(J,2),V=U[0],Y=U[1],Q=Object(r.useState)(),X=Object(d.a)(Q,2),Z=X[0],$=X[1],ee=Object(r.useState)(),te=Object(d.a)(ee,2),ne=te[0],re=te[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var n,r,a=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,A(t,n);case 4:r=e.sent,g(B[t]),f(r.docs),void 0!==E[t]&&w(E[t]),W(r.hasNextPage),H(r.hasPrevPage),re(r.totalPages),Y(r.prevPage),$(r.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),g(void 0),f(void 0),W(void 0),H(void 0),re(void 0),Y(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),n=null!==i.get("page")?i.get("page"):1;_(n);var r=null!==i.get("limit")?i.get("limit"):10;F(r),e({page:n,limit:r}).catch(console.error)}),[e,t,i]);var ae=function(){var e=parseInt(C,10)-2>0,t=parseInt(C,10)+2<ne;return Object(q.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(q.jsxs)(oe.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(q.jsx)(oe.a.First,{disabled:1===C,onClick:function(){return s({page:1,limit:D})}}),Object(q.jsx)(oe.a.Prev,{disabled:!G,onClick:function(){return s({page:V,limit:D})}}),e&&Object(q.jsx)(oe.a.Ellipsis,{}),parseInt(C,10)-1>0&&Object(q.jsx)(oe.a.Item,{onClick:function(){return s({page:parseInt(C,10)-1,limit:D})},children:parseInt(C,10)-1}),Object(q.jsx)(oe.a.Item,{children:Object(q.jsx)("b",{children:C})}),parseInt(C,10)+1<=ne&&Object(q.jsx)(oe.a.Item,{onClick:function(){return s({page:parseInt(C,10)+1,limit:D})},children:parseInt(C,10)+1}),t&&Object(q.jsx)(oe.a.Ellipsis,{}),Object(q.jsx)(oe.a.Next,{disabled:!R,onClick:function(){return s({page:Z,limit:D})}}),Object(q.jsx)(oe.a.Last,{disabled:C===ne,onClick:function(){return s({page:ne,limit:D})}})]})})};return Object(q.jsxs)("div",{className:"page",children:[Object(q.jsxs)("header",{className:"page-header",children:[t,void 0!==M[t]&&Object(q.jsx)(u.b,{to:"/add/"+t+"/",children:Object(q.jsx)(b.a,{variant:"link",size:"sm",children:Object(q.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(q.jsxs)("main",{className:"page-content",children:[Object(q.jsx)(ce,{resType:t,header:x,resources:p,actions:k,takeSingle:function(e){return p.find((function(t){return t._id===e}))},removeSingle:function(e){var t=p.filter((function(t){return t._id!==e}));f(t)}}),Object(q.jsx)(ae,{})]})]})}Z.a.library.add($.f);n(153),n(154);function de(){return Object(q.jsx)("div",{className:"unAuth-page",children:Object(q.jsx)("div",{className:"info-box",children:Object(q.jsx)("div",{className:"info-text",children:U().unauthorised_user})})})}var ue=n(169),je=n(174),be=n(170),he=n(178),pe=a.a.createContext();function fe(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],i=n[1],s=Object(r.useContext)(pe);return Object(q.jsxs)("div",{children:[Object(q.jsxs)(b.a,{variant:"link",onClick:function(){i(!0)},style:{color:"#fff",textDecoration:"none"},children:[U().notifications,"  ",Object(q.jsx)(ue.a,{pill:!0,bg:"success",children:s.notifications.length}),Object(q.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(q.jsxs)(je.a,{style:{backgroundColor:"#123651",color:"#fff"},show:a,onHide:function(){return i(!1)},placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(q.jsx)(je.a.Header,{children:Object(q.jsxs)(je.a.Title,{children:[U().notifications,"  ",Object(q.jsx)(ue.a,{pill:!0,bg:"success",children:s.notifications.length})]})}),Object(q.jsx)(je.a.Body,{children:Object(q.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==s.notifications.length&&Object(q.jsx)(b.a,{variant:"warning",onClick:function(){return s.ClearNotifications()},children:U().clear_all}),Object(q.jsx)(be.a,{children:s.notifications.map((function(e,t){var n;return"info"===e.name&&(n="success"),"error"===e.name&&(n="danger"),Object(q.jsxs)(he.a,{className:"d-inline-block m-1",bg:n,animation:!0,onClose:function(){s.RemoveNotification(t)},children:[Object(q.jsxs)(he.a.Header,{children:[Object(q.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(q.jsx)("strong",{className:"me-auto",children:e.name}),Object(q.jsx)("small",{children:e.time.slice(0,15)})]}),Object(q.jsx)(he.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}var Oe,me=n(10),xe=n(2),ge=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var n=!0;return t.forEach((function(t){n=n&&e(t)})),n}if(t.constructor===Object){var r=!0;return Object.entries(t).forEach((function(t){var n=Object(d.a)(t,2),a=(n[0],n[1]);r=r&&e(a)})),r}},ve=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!ge(e)})).length},ye=function e(t){if(Array.isArray(t),t.constructor===Object)for(var n=Object.entries(t),r=0;r<n.length;r++){if(Array.isArray(n[r][1]))for(var a=0;a<n[r][1].length;a++)n[r][1][a].constructor===Object||Array.isArray(n[r][1][a])?(e(n[r][1][a]),ge(n[r][1][a])&&n[r][1].splice(a,1)):ge(n[r][1][a])&&n[r][1].splice(a,1);if(n[r][1].constructor===Object)for(var i=Object.entries(n[r][1]),s=0;s<i.length;s++)i[r][1].constructor===Object||Array.isArray(i[r][1])?e(i[r][1]):ge(i[r][1])&&delete n[r][1][i[r][0]]}return t},ke=function e(t,n){if(void 0===t||void 0===n)return!1;if(t===n)return!0;if(typeof t!==typeof n)return!1;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===Object&&n.constructor!==Object||t.constructor!==Object&&n.constructor===Object)return!1;if(t.constructor===Object&&n.constructor===Object){var a=Object.keys(t),i=Object.keys(n);return a.length===i.length&&(!!e(a,i)&&!!e(Object.values(t),Object.values(n)))}return!1};var we=n(171),Ne=n(99),Se=n(175),Ce=n(172),_e=function(e){if(void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";console.log({values:e.values,resource:e.resource,disabledFields:e.disabledFields,functionalFields:e.functionalFields,submitFunction:e.submitFunction,handleChangesCallback:e.handleChangesCallback,arrayDeleteCallback:e.arrayDeleteCallback});var t=function(t,n){return Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:t})}),Object(q.jsx)(Ne.a,{sm:4,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsxs)(Se.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(q.jsx)("option",{children:U().select+" "+t}),a.a.Children.toArray(Object.entries(n).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(q.jsx)("option",{value:n,children:r})})))]})})})]})};return Object(q.jsxs)(Se.a,{onSubmit:e.submitFunction,children:[Object(q.jsxs)(Ce.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(n){var r,i=Object(d.a)(n,2),s=i[0],c=i[1];if("number"===typeof c)return function(t){return Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:t})}),Object(q.jsx)(Ne.a,{sm:4,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"number",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:U().enter+" "+t})})})]})}(s);if("string"===typeof c)return function(n){return void 0!==J[e.resource]&&void 0!==J[e.resource][n]&&void 0!==Oe&&void 0!==Oe[J[e.resource][n]]?t(n,Oe[J[e.resource][n]]):Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:n})}),Object(q.jsx)(Ne.a,{sm:4,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"text",id:n,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:e.values[n],placeholder:U().enter+" "+n})})})]})}(s);if(Array.isArray(c)){if("number"===typeof c[0])return r=s,Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:r})}),Object(q.jsx)(Ne.a,{sm:4,children:a.a.Children.toArray(e.values[r].map((function(t,n){return Object(q.jsx)(we.a,{children:Object(q.jsxs)(Se.a.Group,{className:"mb-3",children:[Object(q.jsxs)(Se.a.Label,{children:["Insert ",Object(q.jsx)("b",{children:r}),Object(q.jsxs)("i",{children:["[",n,"]"]})]}),Object(q.jsx)(Se.a.Control,{type:"number",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n])},value:isNaN(e.values[r][n])?"":e.values[r][n],placeholder:U().enter+" "+r})]})})})))})]});if("string"===typeof c[0])return function(t){return Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:t})}),Object(q.jsx)(Ne.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(q.jsxs)(we.a,{children:[Object(q.jsx)(Ne.a,{sm:1,children:Object(q.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(q.jsx)(Ne.a,{sm:4,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r])},value:e.values[t][r],placeholder:U().enter+" "+t})})}),Object(q.jsx)(Ne.a,{md:"auto"})]})})))})]})}(s);if(c[0].constructor===Object)return function(t){return Object(q.jsxs)(we.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(q.jsx)(Ne.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(q.jsx)("b",{children:t})}),Object(q.jsx)(Ne.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(q.jsxs)(we.a,{children:[Object(q.jsx)(Ne.a,{sm:1,children:Object(q.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(d.a)(n,2),s=i[0],c=i[1];return"number"===typeof c?Object(q.jsx)(Ne.a,{sm:2,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"number",onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:isNaN(e.values[t][r][s])?"":e.values[t][r][s],placeholder:U().enter+" "+s},t+s+r+"")})}):"string"===typeof c?Object(q.jsx)(Ne.a,{sm:3,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s])},value:e.values[t][r][s],placeholder:U().enter+" "+s})})}):Array.isArray(c)?0===c.length?s+" is empty":Object(q.jsx)(we.a,{children:Object(q.jsx)(ne.a,{defaultActiveKey:"0",children:Object(q.jsxs)(ne.a.Item,{eventKey:"0",children:[Object(q.jsxs)(ne.a.Header,{children:[Object(q.jsx)("b",{children:s})," : ",ve(c)," items"]}),Object(q.jsx)(ne.a.Body,{children:a.a.Children.toArray(c.map((function(n,i){if(n.constructor===Object){var c=Object.entries(n);return Object(q.jsxs)(we.a,{children:[Object(q.jsx)(Ne.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(q.jsx)(Ne.a,{sm:1,children:Object(q.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(c.map((function(n){var a=Object(d.a)(n,2),c=a[0],o=a[1];return Object(q.jsx)(Ne.a,{sm:3,children:Object(q.jsx)(Se.a.Group,{className:"mb-3",children:Object(q.jsx)(Se.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s,i,c])},value:o,placeholder:U().enter+" "+c})})})})))]})}return"number"===typeof n?Object(q.jsxs)(we.a,{children:[Object(q.jsx)(Ne.a,{sm:1,children:Object(q.jsx)(b.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(q.jsx)(Ne.a,{sm:3,children:Object(q.jsx)(Se.a.Control,{type:"number",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s,i])},value:isNaN(n)?"":n,placeholder:U().enter+" "+s},""+t+r+s+i)})]}):"string"===typeof n?"TODO string":void 0})))})]})})}):void 0})))]})})))})]})}(s)}return c.constructor===Object?"TODO":""})))]}),Object(q.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"},"submit")]})},Ae=n(75);function Te(e){var t=Object(j.o)(),n=t.resource,i=t.id,s=Object(r.useState)(),u=Object(d.a)(s,2),b=u[0],h=u[1],p=Object(r.useState)(""),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(j.m)(),g=Object(r.useState)(Ae(K[n])),v=Object(d.a)(g,2),y=v[0],k=v[1],w=Object(r.useState)({}),S=Object(d.a)(w,2),C=S[0],_=(S[1],Object(r.useState)(void 0)),T=Object(d.a)(_,2),I=T[0],D=T[1],F=Object(r.useState)(!1),P=Object(d.a)(F,2),z=(P[0],P[1]);a.a.useRef({});Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a,s,c,d,u,j,b,p,f,O,m,x=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,A(n,t);case 3:r=e.sent,a=r.docs[0],s=Ae(y),c=Object.entries(a),d=0;case 8:if(!(d<c.length)){e.next=36;break}if(!Array.isArray(c[d][1])){e.next=33;break}if(0!==c[d][1].length){e.next=12;break}return e.abrupt("continue",33);case 12:if(c[d][1][0].constructor!==Object){e.next=25;break}u=0;case 14:if(!(u<c[d][1].length)){e.next=23;break}if(void 0!==K[n][c[d][0]][0]){e.next=17;break}return e.abrupt("continue",20);case 17:j=Object(xe.a)({},K[n][c[d][0]][0]),Object.assign(j,c[d][1][u]),c[d][1][u]=j;case 20:u++,e.next=14;break;case 23:e.next=33;break;case 25:b=0;case 26:if(!(b<c[d][1].length)){e.next=33;break}if(void 0!==K[n][c[d][0]]&&void 0!==K[n][c[d][0]][0]){e.next=29;break}return e.abrupt("continue",30);case 29:c[d][1][b]=c[d][1][b];case 30:b++,e.next=26;break;case 33:d++,e.next=8;break;case 36:for(Object.assign(s,a),p=Object.keys(s),f=Object.keys(K[n]),O=0;O<p.length;O++)f.includes(p[O])||delete s[p[O]];m=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,r,a,c,l,d,u,j,b,p,f,O;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==G[n]){e.next=7;break}for(D({}),t=Object.keys(s),r=0;r<t.length;r++)a=t[r],s=R(s,[a]);return k(s),h(Ae(s)),e.abrupt("return");case 7:c={},void 0!==I&&(c=I),l=Object.entries(G[n]),d=0;case 11:if(!(d<l.length)){e.next=24;break}if(u=l[d][0],j=l[d][1],void 0!==s[u]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==j.type){e.next=21;break}return e.next=19,j.policy(i);case 19:b=e.sent,c[u]=b;case 21:d++,e.next=11;break;case 24:for(p=Object.keys(s),f=0;f<p.length;f++)O=p[f],void 0!==c[O]&&!1!==c[O]||(s=R(s,[O]));D(c),k(s),h(Ae(s));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m();case 42:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:i};e({filter:JSON.stringify(t)}),z(!0)}),[]);var R=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Ae(e),i=a,s=Ae(K[n]),o=Object(c.a)(t),l=0;l<o.length&&void 0!==t[l];l++)i=i[t[l]];for(var d=0;d<o.length&&void 0!==t[d]&&void 0!==s;d++)s="number"===typeof t[d]?s[0]:s[t[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(xe.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ge(e)})).length&&i.push(Object(xe.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ge(e)})).length)&&(r.constructor===Object?i.push(Object(xe.a)({},r)):i.push(r)),a):a},B=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var r,a,s,l,d,u,j,h,p,f,O,g,v,k,w,S;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),r=Ae(y),a=Ae(b),ye(r),ye(a),s={},l=Object.entries(r),d=0;d<l.length;d++)if(u=l[d][0],j=l[d][1],Array.isArray(j)){if(void 0===s[u]&&(s[u]={add:[],remove:[],update:[]}),h=Object(c.a)(a[u]),void 0!==C[u])for(p=0;p<C[u].indexes.length;p++)(f=h.splice(C[u].indexes[p][0],1)[0]).constructor===Object?(O=Object.keys(f)[0],s[u].remove.push(f[O])):s[u].remove.push(f);for(g=0;g<r[u].length;g++)g<h.length&&!ke(r[u][g],h[g])&&(r[u][g].constructor===Object?(k=Object.keys(h[g])[0],s[u].update.push((v={},Object(me.a)(v,k,h[g][k]),Object(me.a)(v,"new",r[u][g]),v))):(s[u].add.push(r[u][g]),s[u].remove.push(h[g]))),g>=h.length&&s[u].add.push(r[u][g]);ke(s[u],{add:[],remove:[],update:[]})&&delete s[u]}else j.constructor===Object||j!==b[u]&&(s[u]=j);return e.prev=8,e.next=11,N(n,s,i);case 11:S=e.sent,w=S.response,m(w.statusText),x("/"+n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),w=e.t0.error.response,m(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"page",children:[Object(q.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(q.jsx)("b",{children:n}),"\xa0of id:\xa0",Object(q.jsx)("b",{children:i}),"\xa0from:"]}),Object(q.jsxs)("main",{className:"page-content",children:[Object(q.jsx)(_e,{values:y,resource:n,functionalFields:K,disabledFields:I,handleChangesCallback:function(e,t){var n,r=Ae(y),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=R(r,t.slice(0,i),s)}k(r)},arrayDeleteCallback:function(e){var t,n=Ae(y),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a=r.splice(e[t],1),i="number"===typeof a[0]?NaN:"";n=R(n,e.slice(0,t),i),1===t&&(void 0===C[e[0]]&&(C[e[0]]={indexes:[],elements:[],minDel:1/0}),ge(a[0])||(C[e[0]].elements.push(a[0]),C[e[0]].indexes.push(e[t]>=C[e[0]].minDel?e[t]+C[[e[0]]].indexes.filter((function(n){return n>=e[t]})).length:e[t]),e[t]<C[e[0]].minDel&&(C[e[0]].minDel=e[t]))),k(n)},submitFunction:B}),Object(q.jsx)("br",{}),Object(q.jsx)("font",{style:{marginLeft:"5px"},children:O})]})]})}var Ie=n(177),De=n(75);function Fe(e){var t=Object(j.o)().resource,n=Object(u.c)(),i=Object(d.a)(n,2),s=i[0];i[1];void 0!==e.resource&&(t=e.resource);var h=Object(j.m)(),p=Object(r.useState)("form"),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),g=Object(d.a)(x,2),y=g[0],w=g[1],N=Object(r.useState)(De(M[t])),S=Object(d.a)(N,2),C=S[0],_=S[1],T=Object(r.useState)(void 0),I=Object(d.a)(T,2),D=I[0],F=I[1],P=Object(r.useState)(void 0),z=Object(d.a)(P,2),R=z[0],B=z[1],W=Object(r.useState)(void 0),E=Object(d.a)(W,2),L=E[0],K=E[1],G=Object(r.useState)(void 0),J=Object(d.a)(G,2),V=J[0],Y=J[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var n,r,a,i=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,A(t,n);case 3:r=e.sent,a=De(C),Object.keys(a).map((function(e){if(void 0!==r.docs[0][e])if(Array.isArray(r.docs[0][e])){if(!ge(r.docs[0][e]))if(r.docs[0][e][0].constructor===Object){var t=Object.keys(a[e][0]),n=r.docs[0][e].map((function(e){var n={};return t.map((function(e){return n[e]=null})),Object.assign(n,e)}));a[e]=n.concat(a[e])}else a[e]=r.docs[0][e].concat(a[e])}else a[e]=r.docs[0][e]})),_(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==s.get("from")&&""!==s.get("from")){var n={_id:s.get("from")};e({filter:JSON.stringify(n)})}}),[e,s]),void 0===M[t])return Object(q.jsx)("div",{children:"This entity cannot be posted"});var Q=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=De(e),i=a,s=De(M[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(xe.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ge(e)})).length&&i.push(Object(xe.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ge(e)})).length)&&(r.constructor===Object?i.push(Object(xe.a)({},r)):i.push(r)),a):a},X=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=De(C)).token&&(r=a.token,delete a.token),i=De(a),ye(i),e.prev=6,e.next=9,k(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,w(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&h("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!D.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",D),e.prev=4,e.next=7,v(t,a);case 7:i=e.sent,r=i.response,w(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!D.name.endsWith(".json")){e.next=32;break}return console.log(V),e.prev=19,e.next=22,k(t,V,void 0);case 22:s=e.sent,r=s.response,w(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,w(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"page",children:[Object(q.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(q.jsx)("b",{children:t})]}),Object(q.jsxs)("main",{className:"page-content",children:[Object(q.jsxs)(Ie.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[H[t].includes("form")&&Object(q.jsx)(Ie.a.Item,{children:Object(q.jsx)(Ie.a.Link,{eventKey:"form",children:"Form"})}),H[t].includes("file")&&null===s.get("from")&&Object(q.jsx)(Ie.a.Item,{children:Object(q.jsx)(Ie.a.Link,{eventKey:"file",children:"File"})})]}),Object(q.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&Object(q.jsxs)("div",{style:{margin:"5px"},children:[Object(q.jsx)(_e,{values:C,resource:t,functionalFields:M,disabledFields:{},handleChangesCallback:function(e,t){var n,r=De(C),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);a[t[n]]=e,-1!==i&&(r=Q(r,t.slice(0,i))),_(r)},arrayDeleteCallback:function(e){var t,n=De(C),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];r.splice(e[t],1),n=Q(n,e.slice(0,t)),_(n)},submitFunction:X}),Object(q.jsx)("br",{}),Object(q.jsx)("font",{style:{marginLeft:"5px"},children:y})]}),"file"===O&&Object(q.jsx)("div",{style:{margin:"5px"},children:Object(q.jsxs)(Se.a,{onSubmit:Z,children:[Object(q.jsx)(Se.a.Label,{children:Object(q.jsx)("b",{children:U().select_file})}),Object(q.jsx)(Se.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];F(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");B(a[0]),a.splice(0,1),K(a)}if(t.name.endsWith(".json")){var i=n.result;Y(i)}},n.readAsText(t)}}),void 0!==L&&void 0!==R&&Object(q.jsx)(ne.a,{children:Object(q.jsxs)(ne.a.Item,{eventKey:"0",children:[Object(q.jsx)(ne.a.Header,{children:U().file_content}),Object(q.jsx)(ne.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(q.jsxs)(te.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(q.jsx)("thead",{children:Object(q.jsx)("tr",{children:a.a.Children.toArray(R.split(",").map((function(e){return Object(q.jsx)("th",{children:e})})))})}),Object(q.jsx)("tbody",{children:a.a.Children.toArray(L.map((function(e){return Object(q.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(q.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==V&&Object(q.jsx)(ne.a,{children:Object(q.jsxs)(ne.a.Item,{eventKey:"0",children:[Object(q.jsx)(ne.a.Header,{children:U().file_content}),Object(q.jsx)(ne.a.Body,{style:{overflow:"scroll",height:"70vh"},children:V})]})}),Object(q.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(q.jsx)("br",{}),Object(q.jsx)("font",{style:{marginLeft:"5px"},children:y})]})})]})]})]})}var Pe=n(75);function ze(e){var t="experiments",n=Object(u.c)(),i=Object(d.a)(n,2),s=i[0],h=(i[1],Object(j.m)()),p=Object(r.useState)("form"),f=Object(d.a)(p,2),O=f[0],m=f[1],x=Object(r.useState)(""),g=Object(d.a)(x,2),y=g[0],w=g[1],N=Object(r.useState)(Pe(M[t])),S=Object(d.a)(N,2),C=S[0],_=S[1],T=Object(r.useState)({}),I=Object(d.a)(T,2),D=I[0],F=I[1],P=Object(r.useState)(),z=Object(d.a)(P,2),R=z[0],B=z[1],W=Object(r.useState)(),E=Object(d.a)(W,2),L=(E[0],E[1]),K=Object(r.useState)(void 0),G=Object(d.a)(K,2),J=G[0],V=G[1],Y=Object(r.useState)(void 0),Q=Object(d.a)(Y,2),X=Q[0],Z=Q[1],$=Object(r.useState)(void 0),ee=Object(d.a)($,2),re=ee[0],ae=ee[1],ie=Object(r.useState)(void 0),se=Object(d.a)(ie,2),ce=se[0],oe=se[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t,n,r=arguments;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,A("protocols",t);case 3:n=e.sent,B(n.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,s]),void 0===M[t])return Object(q.jsx)("div",{children:"This entity cannot be posted"});var le=function(){var e=Object(l.a)(Object(o.a)().mark((function e(t){var n,r,a,i,s,c,l,d,u;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,r={_id:t.target.value},a={filter:JSON.stringify(r)},e.next=6,A("protocols",a);case 6:for(i=e.sent,s=i.docs[0],c=[],l=0;l<s.metadata.length;l++)"scalar"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:NaN}),"text"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:""}),"vector"===s.metadata[l].type&&c.push({name:s.metadata[l].name,value:[NaN]});(d=Pe(C)).protocol=n,0!==c.length&&(d.metadata=c),(u=Pe(D)).protocol=!0,F(u),L(n),_(d);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=Pe(e),i=a,s=Pe(M[t]),o=Object(c.a)(n),l=0;l<o.length&&void 0!==n[l];l++)i=i[n[l]];for(var d=0;d<o.length&&void 0!==n[d]&&void 0!==s;d++)s="number"===typeof n[d]?s[0]:s[n[d]];return void 0===s||Array.isArray(s)?(void 0!==s&&(0===i.length?s[0].constructor===Object?i.push(Object(xe.a)({},s[0])):i.push(""):i[0].constructor===Object?0===i.filter((function(e){return ge(e)})).length&&i.push(Object(xe.a)({},s[0])):i.includes("")||i.push("")),void 0!==r&&void 0===s&&(0===i.length||0===i.filter((function(e){return ge(e)})).length)&&(r.constructor===Object?i.push(Object(xe.a)({},r)):i.push(r)),a):a},ue=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=Pe(C)).token&&(r=a.token,delete a.token),i=Pe(a),ye(i),e.prev=6,e.next=9,k(t,JSON.stringify(i),r);case 9:c=e.sent,s=c.response,w(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=Object(l.a)(Object(o.a)().mark((function e(n){var r,a,i,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!J.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",J),e.prev=4,e.next=7,v(t,a);case 7:i=e.sent,r=i.response,w(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,w(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!J.name.endsWith(".json")){e.next=32;break}return console.log(ce),e.prev=19,e.next=22,k(t,ce,void 0);case 22:s=e.sent,r=s.response,w(r.statusText),e.next=32;break;case 27:e.prev=27,e.t1=e.catch(19),console.log(e.t1),r=e.t1.error.response,w(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 32:200===r.status&&1==window.confirm("Back to resource page?")&&h("/"+t);case 33:case"end":return e.stop()}}),e,null,[[4,12],[19,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(q.jsxs)("div",{className:"page",children:[Object(q.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(q.jsx)("b",{children:t})]}),Object(q.jsxs)("main",{className:"page-content",children:[Object(q.jsxs)(Ie.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return m(e)},defaultActiveKey:"form",children:[H[t].includes("form")&&Object(q.jsx)(Ie.a.Item,{children:Object(q.jsx)(Ie.a.Link,{eventKey:"form",children:"Form"})}),H[t].includes("file")&&null===s.get("from")&&Object(q.jsx)(Ie.a.Item,{children:Object(q.jsx)(Ie.a.Link,{eventKey:"file",children:"File"})})]}),Object(q.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===O&&void 0!==R&&Object(q.jsxs)("div",{style:{margin:"5px"},children:[Object(q.jsxs)(Se.a.Select,{"aria-label":U().select+" protocol",onChange:le,children:[Object(q.jsxs)("option",{children:[U().select," protocol"]}),a.a.Children.toArray(R.map((function(e){return Object(q.jsx)("option",{value:e,children:e})})))]}),Object(q.jsx)("br",{}),Object(q.jsx)(_e,{values:C,resource:t,functionalFields:M,disabledFields:D,handleChangesCallback:function(e,t){var n,r=Pe(C),a=r,i=-1;for(n=0;n<t.length-1;n++)a=a[t[n]],"number"===typeof t[n]&&(i=n);if("number"===typeof t[n]&&(i=n),a[t[n]]=e,-1!==i){var s="number"===typeof e?NaN:"";r=de(r,t.slice(0,i),s)}console.log({tmpVals:r}),_(r)},arrayDeleteCallback:function(e){var t,n=Pe(C),r=n;for(t=0;t<e.length-1&&void 0!==e[t];t++)r=r[e[t]];var a="number"===typeof r.splice(e[t],1)[0]?NaN:"";n=de(n,e.slice(0,t),a),_(n)},submitFunction:ue}),Object(q.jsx)("br",{}),Object(q.jsx)("font",{style:{marginLeft:"5px"},children:y})]}),"file"===O&&Object(q.jsx)("div",{style:{margin:"5px"},children:Object(q.jsxs)(Se.a,{onSubmit:je,children:[Object(q.jsx)(Se.a.Label,{children:Object(q.jsx)("b",{children:U().select_file})}),Object(q.jsx)(Se.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(e){var t=e.target.files[0];V(t),console.log(t);var n=new FileReader;n.onloadend=function(){var e=n.result;if(t.name.endsWith(".csv")){var r=new RegExp("\r","g"),a=e.replace(r,"").split("\n");Z(a[0]),a.splice(0,1),ae(a)}if(t.name.endsWith(".json")){var i=n.result;oe(i)}},n.readAsText(t)}}),void 0!==re&&void 0!==X&&Object(q.jsx)(ne.a,{children:Object(q.jsxs)(ne.a.Item,{eventKey:"0",children:[Object(q.jsx)(ne.a.Header,{children:U().file_content}),Object(q.jsx)(ne.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(q.jsxs)(te.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(q.jsx)("thead",{children:Object(q.jsx)("tr",{children:a.a.Children.toArray(X.split(",").map((function(e){return Object(q.jsx)("th",{children:e})})))})}),Object(q.jsx)("tbody",{children:a.a.Children.toArray(re.map((function(e){return Object(q.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(q.jsx)("td",{children:e})})))})})))})]})})]})}),void 0!==ce&&Object(q.jsx)(ne.a,{children:Object(q.jsxs)(ne.a.Item,{eventKey:"0",children:[Object(q.jsx)(ne.a.Header,{children:U().file_content}),Object(q.jsx)(ne.a.Body,{style:{overflow:"scroll",height:"70vh"},children:ce})]})}),Object(q.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"}),Object(q.jsx)("br",{}),Object(q.jsx)("font",{style:{marginLeft:"5px"},children:y})]})})]})]})]})}var Re=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],i=localStorage.getItem("diten-token");function s(e){a((function(t){return[e].concat(t)}))}function b(e){var t=Object(c.a)(n);t.splice(e,1),a(t)}function h(){a([])}Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A("types",{},"");case 3:t=e.sent,n=t.response.data,Oe=n,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===Oe)try{e()}catch(t){console.log(t)}}),[]);var p={notifications:n,PushNotification:s,RemoveNotification:b,ClearNotifications:h};return x.ClearNotifications=h,x.PushNotification=s,x.RemoveNotification=b,null===i?Object(q.jsx)("div",{className:"app",children:Object(q.jsx)(u.a,{children:Object(q.jsxs)(j.d,{children:[Object(q.jsx)(j.b,{path:"/",element:Object(q.jsx)(Y,{})}),Object(q.jsx)(j.b,{path:"/add/tenants",element:Object(q.jsx)(Fe,{resource:"tenants"})})]})})}):Object(q.jsx)(pe.Provider,{value:p,children:Object(q.jsx)("div",{className:"app",children:Object(q.jsxs)(u.a,{children:[Object(q.jsxs)("aside",{children:[Object(q.jsx)(u.b,{to:"/home",className:"nav-wrap",children:"Measurify Admin Dashboard"}),Object(q.jsx)(ee,{})]}),Object(q.jsx)("div",{className:"main",children:Object(q.jsxs)(j.d,{children:[Object(q.jsx)(j.b,{path:"/",element:Object(q.jsx)(Q,{})}),Object(q.jsx)(j.b,{path:"/home",element:Object(q.jsx)(Q,{})}),Object(q.jsx)(j.b,{path:"/add/experiments/",element:Object(q.jsx)(ze,{})}),Object(q.jsx)(j.b,{path:"/edit/:resource/:id",element:Object(q.jsx)(Te,{})}),Object(q.jsx)(j.b,{path:"/add/:resource/",element:Object(q.jsx)(Fe,{})}),Object(q.jsx)(j.b,{path:"/:page",element:Object(q.jsx)(le,{res:":page"})}),Object(q.jsx)(j.b,{path:"/unauthorized",element:Object(q.jsx)(de,{})}),Object(q.jsx)(j.b,{path:"/404",element:Object(q.jsx)(X,{})}),Object(q.jsx)(j.b,{path:"*",element:Object(q.jsx)(j.a,{to:"/404",replace:!0})})]})}),Object(q.jsx)("div",{className:"right-bar",children:Object(q.jsx)(fe,{})})]})})})};s.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(Re,{})}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.9078c737.chunk.js.map