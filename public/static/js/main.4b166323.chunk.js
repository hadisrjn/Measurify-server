(this["webpackJsonpmeasurify-admin-dashboard"]=this["webpackJsonpmeasurify-admin-dashboard"]||[]).push([[0],{104:function(e,t,n){},131:function(e,t){},133:function(e,t){},148:function(e,t,n){},149:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},159:function(e,t,n){},165:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(25),s=n.n(i),c=(n(104),n(18)),o=n(10),l=n(3),d=n(7),u=n.n(d),j=n(11),b=n(8),h=n(170),p={username:"Nome utente",password:"Password",tenant:"Organizzazione",keep_logged:"Mantieni Accesso",select:"Seleziona",language:"Lingua",welcome:"Bentornato",role:"Ruolo",session_expire_in:"La sessione scadr\xe0 in ",tools:"Strumenti",notifications:"Notifiche",file_content:"Contenuto del file",clear_all:"Cancella tutto",enter:"Inserisci",username_suggestion:"Inserisci il nome utente",password_suggestion:"Inserisci la password",tenant_suggestion:"Inserisci la tua organizzazione",add_tenant:"Aggiungi organizzazione",welcome_hp:"Benvenuto nel pannello di controllo di Measurify!",left_bar_descr_hp:"Nella barra a sinistra sono presenti le informazioni relative al tuo account e i collegamenti alle pagine.",right_bar_descr_hp:'La barra a destra pu\xf2 essere aperta cliccando sul pulsante "Notifiche" per mostrare la lista delle notifiche.',session_expire_info_hp:"",github_page_hp:"Pagina Github di Measurify",github_issue_page_hp:"Segnala bug o problemi",profile_page_desc:"questa \xe8 la pagina in cui puoi visionare il tuo profilo o modificare la password",pass_change_confirm:"La password verr\xe0 modificata, procedere?",pass_not_match:"La password inserita e la conferma non combaciano, si prega di reinserirle",pass_not_null:"La password non pu\xf2 essere vuota",password_changed:"Password cambiata",oh_no:"Oh No!",broken_link:"Sembra che tu abbia utilizzato un collegamento non funzionante.",submit:"Invio",cancel:"Annulla",login:"Accedi",logout:"Esci",repeat:"Ripeti",close:"Chiudi",login_error:"Login errata!",unauthorised_user:"Non sei abilitato a utilizzare questa pagina",session_expired:"Sessione scaduta"},f={username:"Username",password:"Password",tenant:"Tenant",keep_logged:"Keep Logged In",select:"Select",language:"Language",welcome:"Welcome back",role:"Role",session_expire_in:"Session will expire in ",tools:"Tools",notifications:"Notifications",file_content:"File content",clear_all:"Clear all",enter:"Enter",username_suggestion:"Insert your username",password_suggestion:"Insert your password",tenant_suggestion:"Insert your tenant",add_tenant:"Add tenant",welcome_hp:"Welcome to the Administration dashboard!",left_bar_descr_hp:"The left bar contains the information about your account and  the list of tabs",right_bar_descr_hp:'The right bar contains the notification bar (Click on "Notifications" to open).',session_expire_info_hp:"",github_page_hp:"",github_issue_page_hp:"Report bugs or issues",profile_page_desc:"from this page you can view your own profile or change the password",pass_change_confirm:"Password will be changed, do you confirm?",pass_not_match:"Provided password and the confirmation do not match. Please insert them again",pass_not_null:"Password cannot be empty",password_changed:"Password changed",oh_no:"Oh No!",broken_link:"It looks like you have clicked on a broken link.",submit:"Submit",cancel:"Cancel",login:"Login",logout:"Logout",repeat:"Repeat",close:"Close",login_error:"Wrong login!",unauthorised_user:"You are not allowed to use this page",session_expired:"Session expired"},O=n(106).default,m=n(124),x=O.create({httpsAgent:new m.Agent({})}),v={PushNotification:function(e){},RemoveNotification:function(e){},ClearNotifications:function(){}};function g(e,t,n){var r={username:"".concat(e),password:"".concat(t),tenant:"".concat(n)},a={headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}},i=B+"/login";return new Promise((function(e,t){x.post(i,r,a).then((function(t){localStorage.setItem("diten-token",t.data.token),localStorage.setItem("diten-token-expiration-time",t.data.token_expiration_time),localStorage.setItem("diten-username",t.data.user.username),localStorage.setItem("diten-user-role",t.data.user.type),localStorage.setItem("diten-user-tenant",n),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),e(t)})).catch((function(e){t(e)}))}))}function y(){var e={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:D()}},t=B+"/login";return new Promise((function(n,r){x.put(t,{},e).then((function(e){localStorage.setItem("diten-token",e.data.token),localStorage.setItem("diten-login-time",(new Date).getTime().toString()),localStorage.setItem("diten-token-expiration-time",e.data.token_expiration_time),n(e)})).catch((function(e){r(e)}))}))}function w(e,t){return k.apply(this,arguments)}function k(){return k=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s,c,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:{},void 0===(a=o.length>3&&void 0!==o[3]?o[3]:void 0)&&(a=D()),i=B+"/"+t+"/file",console.log("POST file:"+i),s={"Content-Type":"multipart/form-data","Cache-Control":"no-cache",Authorization:a},Object.entries(r).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];s[n]=r})),c={headers:s},e.abrupt("return",new Promise((function(e,r){x.post(i,n,c).then((function(n){v.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of file on: "+t}),e({response:n})})).catch((function(e){v.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of file on: "+t}),r({error:e})}))})));case 9:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function N(e,t){return C.apply(this,arguments)}function C(){return C=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===(r=s.length>2&&void 0!==s[2]?s[2]:void 0)&&(r=D()),a=B+"/"+t+"/",console.log("POST :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},console.log({header:i,body:n,token:r}),e.abrupt("return",new Promise((function(e,r){x.post(a,n,i).then((function(n){v.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful POST of a resource type: "+t}),e({response:n})})).catch((function(e){v.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a POST of a resource type: "+t}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function _(e,t,n){return S.apply(this,arguments)}function S(){return S=Object(o.a)(u.a.mark((function e(t,n,r){var a,i,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:void 0,i=B+"/"+t+"/"+r,void 0===a&&(a=D()),console.log("PUT :"+i),s={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:a}},e.abrupt("return",new Promise((function(e,a){x.put(i,n,s).then((function(a){void 0!==n.password&&(n.password="".padStart(n.password.length,"*")),v.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Successful PUT of a resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)}),e({response:a})})).catch((function(e){void 0!==n.password&&(n.password="".padStart(n.password.length,"*")),v.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Error doing a PUT on resource type: "+t+", id: "+r+", body: "+JSON.stringify(n)+". "+e.message}),a({error:e})}))})));case 6:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function A(e,t){return I.apply(this,arguments)}function I(){return I=Object(o.a)(u.a.mark((function e(t,n){var r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:void 0,a=B+"/"+t,void 0===r&&(r=D()),void 0!==n&&(a+="/"+n),console.log("DELETE :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r}},e.abrupt("return",new Promise((function(e,r){x.delete(a,i).then((function(r){void 0!==n?v.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resource: "+n+", of type: "+t}):v.PushNotification({name:"info",time:(new Date).toTimeString(),msg:"Deleted resources of type: "+t}),e({response:r})})).catch((function(e){v.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"error deleting resource: "+n+", of type: "+t+". "+e.message}),404===e.statusCode&&v.PushNotification({name:"error",time:(new Date).toTimeString(),msg:"Please check if your user is authorized to delete the resource. "+e.message}),r({error:e})}))})));case 7:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function P(e){return F.apply(this,arguments)}function F(){return F=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2?s[2]:void 0,a=B+"/"+t+"/",void 0===r&&(r=D()),a=void 0!==n.filter?a.concat("?filter="+n.filter):a.concat("?filter="),void 0!==n.limit&&(a=a.concat("&limit="+n.limit)),void 0!==n.page&&(a=a.concat("&page="+n.page)),console.log("GET :"+a),i={headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Authorization:r},json:!0},e.abrupt("return",new Promise((function(e,t){x.get(a,i).then((function(t){e({response:t,docs:t.data.docs,totalDocs:t.data.totalDocs,limit:t.data.limit,totalPages:t.data.totalPages,page:t.data.page,pagingCounter:t.data.pagingCounter,hasPrevPage:t.data.hasPrevPage,hasNextPage:t.data.hasNextPage,prevPage:t.data.prevPage,nextPage:t.data.nextPage})})).catch((function(e){t({error:e})}))})));case 10:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function D(){return localStorage.getItem("diten-token")}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={filter:JSON.stringify({feature:t})},e.prev=1,e.next=4,P("measurements",n);case 4:if(!(e.sent.totalDocs>0)){e.next=9;break}return e.abrupt("return",!0);case 9:return r={filter:JSON.stringify({features:t})},e.next=12,P("devices",r);case 12:if(!(e.sent.totalDocs>0)){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 18:e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(1),console.log("Error on isFeatureInUse"),console.log(e.t0),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}var B="https://localhost:8080/v1",z="Admin Dashboard",L=[],E="vertical",W={users:["username","type","actions"],tags:["_id","actions"],features:["_id","actions"],devices:["_id","tags","actions"],protocols:["_id","description","actions"],experiments:["_id","description","protocol","actions"]},H={},G={features:["view","edit","duplicate","delete"],users:["view","delete"],tags:["view","edit","delete"],devices:["view","edit","delete"],protocols:["view","delete"],experiments:["view","delete"]},K={users:["username","type","actions","fieldmask","status"],features:[{items:["name","type","unit","dimension"]},"tags"],tags:["tags"],devices:["_id","features","tags","scripts"],protocols:["_id","description","metadata"],experiments:["_id","description","protocol","metadata"]},U={features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},tags:{tags:[""]},devices:{visibility:"",tags:[""]}},M={tenants:{token:"",_id:"",organization:"",address:"",email:"",phone:"",admin_username:"",admin_password:"",passwordhash:""},tags:{_id:"",tags:[""]},features:{_id:"",items:[{name:"",type:"",unit:"",dimension:NaN}],tags:[""]},users:{username:"",password:"",type:""},devices:{_id:"",features:[""]},protocols:{_id:"",description:"",metadata:[{name:"",description:"",type:""}],topics:[{name:"",description:"",fields:[{name:"",description:"",type:""}]}]},experiments:{_id:"",description:"",state:""}},J={};J.features={_id:{type:"disable",policy:T},items:{type:"disable",policy:T}};var q={tags:["form","file"],features:["form","file"],users:["form","file"],devices:["form","file"],tenants:["form"],protocols:["form","file"],experiments:["form","file"]},V={};function Y(){var e=localStorage.getItem("diten-language");return 0===L.length?f:(1===L.length&&(e=L[0]),"it"===e?p:"en"===e?f:"it"===navigator.language.substring(0,2)?p:(navigator.language.substring(0,2),f))}V.users={type:"UserRoles",status:"UserStatusTypes"},V.devices={measurementBufferPolicy:"MeasurementBufferPolicyTypes"};n(148),n(149);var Q=n(0),X=function(){function e(e){localStorage.setItem("diten-language",e),window.location.reload()}return Object(Q.jsxs)("div",{children:[Y().language,Object(Q.jsxs)("div",{children:[L.includes("it")&&Object(Q.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("it")},children:"Ita"}),L.includes("en")&&Object(Q.jsx)(h.a,{variant:"outline-info",onClick:function(){return e("en")},children:"Eng"})]})]})},Z=n(178),$=a.a.createRef(),ee=a.a.createRef(),te=a.a.createRef(),ne=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1];function i(){return(i=Object(o.a)(u.a.mark((function e(t){var n,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=$.current.value,r=ee.current.value,i=te.current.value,e.prev=4,e.next=7,g(n,r,i);case 7:window.location.replace("/"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),console.log({error:e.t0.response.data}),a(e.t0.response.data.message+" : "+e.t0.response.data.details);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}return Object(Q.jsxs)("div",{className:"auth-page",children:[Object(Q.jsxs)("div",{className:"title-wrapper",children:[Object(Q.jsx)("div",{className:"title-section",children:"Measurify"}),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{className:"subtitle-section",children:"From the edge to cloud and back"})]}),L.length>1&&Object(Q.jsx)("div",{className:"language-wrapper",children:Object(Q.jsx)(X,{})}),Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsxs)("div",{className:"login-section",children:[Object(Q.jsx)("h4",{children:Y().login}),Object(Q.jsxs)(Z.a,{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(Q.jsxs)(Z.a.Group,{className:"mb-3",controlId:"username",children:[Object(Q.jsx)(Z.a.Label,{children:Y().username}),Object(Q.jsx)(Z.a.Control,{ref:$,type:"text",placeholder:Y().username_suggestion})]}),Object(Q.jsxs)(Z.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(Q.jsx)(Z.a.Label,{children:Y().password}),Object(Q.jsx)(Z.a.Control,{type:"password",ref:ee,placeholder:Y().password_suggestion})]}),Object(Q.jsxs)(Z.a.Group,{className:"mb-3",controlId:"tenant",children:[Object(Q.jsx)(Z.a.Label,{children:Y().tenant}),Object(Q.jsx)(Z.a.Control,{type:"text",ref:te,placeholder:Y().tenant_suggestion})]}),Object(Q.jsx)(h.a,{variant:"success",type:"submit",children:Y().submit})]}),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{style:{color:"red"},children:n}),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{className:"form-row row",children:Object(Q.jsx)(j.b,{to:"/add/tenants",children:Object(Q.jsxs)(h.a,{variant:"outline-success",size:"sm",children:[Y().add_tenant,Object(Q.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})]})})})]})]})},re=(n(153),function(){return Object(r.useEffect)((function(){})),Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsx)("header",{className:"page-header",children:z}),Object(Q.jsx)("main",{className:"page-content",children:Object(Q.jsx)("div",{className:"home-page",children:Object(Q.jsx)("div",{className:"info-box",children:Object(Q.jsxs)("div",{className:"info-text",children:[Y().welcome_hp,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Y().left_bar_descr_hp,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Y().right_bar_descr_hp,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Y().session_expire_info_hp,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:Y().github_issue_page_hp}),Object(Q.jsx)("br",{})]})})})})]})}),ae=(n(154),function(){return Object(Q.jsxs)("div",{className:"notFound-page",children:[Y().oh_no,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Y().broken_link,Object(Q.jsx)("br",{}),Object(Q.jsx)("br",{}),Object(Q.jsx)("a",{href:"https://github.com/measurify/server/issues",target:"_blank",rel:"noopener noreferrer",title:"https://github.com/measurify/server/issues",children:Y().github_issue_page_hp})]})}),ie=(n(155),n(32)),se=n(12);ie.a.library.add(se.g,se.a,se.l,se.j,se.i,se.k,se.h,se.b);var ce=a.a.createRef(),oe=a.a.createRef(),le=a.a.createRef(),de=a.a.createRef(),ue=a.a.createRef(),je=a.a.createRef(),be=a.a.createRef();function he(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],i=t[1],s=localStorage.getItem("diten-username"),c=localStorage.getItem("diten-user-role"),o=localStorage.getItem("diten-user-tenant");return je.current=null!==s?s:"",ue.current=null!==c?c:"",be.current=null!==o&&""!==o?o:"-",Object(r.useEffect)((function(){function e(){var t,n;if(null!==le.current)n=le.current-1;else{if(null===oe.current){var r=localStorage.getItem("diten-login-time");null!==r?(oe.current=r,t=parseInt(r,10)):(t=Date.now(),oe.current=t)}else t=parseInt(oe.current,10);null===de.current&&(de.current=function(){var e=localStorage.getItem("diten-token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),n=(t+de.current-Date.now())/1e3}if(n<60&&(clearInterval(ce.current),y().then((function(){le.current=null,oe.current=null,ce.current=setInterval((function(){e()}),1e3)}))),n<=0)return localStorage.clear(),void window.location.replace("/");le.current=parseInt(n,10)}ce.current=setInterval((function(){e()}),1e3)}),[]),Object(Q.jsxs)("nav",{className:"app-nav",children:[Object(Q.jsx)(h.a,{className:"app-nav-opener",onClick:function(){return i(!n)},children:n?Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true"}):Object(Q.jsx)("i",{className:"fa fa-bars","aria-hidden":"true"})}),Object(Q.jsx)(j.b,{to:"/home",className:"nav-wrap",children:z}),Object(Q.jsx)("hr",{}),Object(Q.jsx)("div",{className:"app-nav-wrapper ".concat(n?"opened":""),children:Object(Q.jsxs)("div",{className:"app-nav-links",children:[Object(Q.jsx)("hr",{}),Object(Q.jsxs)("div",{className:"data-wrapper",children:[Object(Q.jsxs)(j.b,{to:"/viewProfile/",children:[Y().welcome+" ",Object(Q.jsx)("b",{children:je.current})]},"viewProfile"),Object(Q.jsx)("div",{style:{paddingLeft:"10px"},children:Object(Q.jsxs)("h3",{children:[Y().role+" ","admin"===ue.current?Object(Q.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===ue.current?Object(Q.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===ue.current?Object(Q.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===ue.current?Object(Q.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Q.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(Q.jsx)("div",{style:{paddingLeft:"10px"},children:Object(Q.jsxs)("h3",{children:[Y().tenant+" ",Object(Q.jsx)("b",{children:be.current})]})}),Object(Q.jsx)("br",{}),Object(Q.jsx)("div",{style:{paddingLeft:"20px",paddingBottom:"20px"},children:Object(Q.jsx)(h.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:Y().logout})}),L.length>1&&Object(Q.jsxs)(a.a.Fragment,{children:[Object(Q.jsx)("hr",{}),Object(Q.jsx)("h2",{children:Object(Q.jsx)(X,{})})]})]}),Object(Q.jsx)("div",{className:"app-nav-text",children:Y().tools}),Object(Q.jsx)("hr",{}),Object.keys(W).map((function(e){return Object(Q.jsx)(j.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return i(!1)},children:e},e)}))]})})]})}var pe=n(171),fe=n(179),Oe=n(99),me=n(176);function xe(e){var t={};return K[e.resType].forEach((function(n){n.constructor===Object?Object.keys(n).forEach((function(r){Array.isArray(e.resource[r])?t[r]=e.resource[r].map((function(e){var t={};return n[r].forEach((function(n){t[n]=e[n]})),t})):t[r]=e.resource[r]})):Object.keys(e.resource).includes(n)&&(t[n]=e.resource[n])})),ve(t)}function ve(e){return Object(Q.jsx)(fe.a,{defaultActiveKey:0,size:"lg",children:a.a.Children.toArray(Object.entries(e).map((function(e,t){var n=Object(l.a)(e,2),r=n[0],i=n[1];return Object(Q.jsxs)(fe.a.Item,{eventKey:t,children:[Object(Q.jsx)(fe.a.Header,{children:Object(Q.jsx)("b",{children:r})}),Object(Q.jsx)(fe.a.Body,{children:i instanceof Object?Array.isArray(i)?void 0!==i[0]?Object.values(i[0]).some((function(e){return e instanceof Object}))?a.a.Children.toArray(i.map((function(e,t){return Object(Q.jsx)(fe.a,{children:Object(Q.jsxs)(fe.a.Item,{eventKey:"0",children:[Object(Q.jsxs)(fe.a.Header,{children:[r," ",Object(Q.jsxs)("i",{children:["[",t,"]"]})]}),Object(Q.jsx)(fe.a.Body,{children:ve(e)})]})})}))):i[0]instanceof Object?Object(Q.jsxs)(pe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(Q.jsx)("thead",{children:Object(Q.jsx)("tr",{children:a.a.Children.toArray(Object.keys(i[0]).map((function(e){return Object(Q.jsx)("th",{children:e})})))})}),Object(Q.jsx)("tbody",{children:a.a.Children.toArray(i.map((function(e){return Object(Q.jsx)("tr",{children:a.a.Children.toArray(Object.values(e).map((function(e){return Object(Q.jsx)("td",{children:e})})))})})))})]}):"[ "+i.join(" , ")+" ]":"[ ]":"AAAA":void 0===i||null==i?Object(Q.jsx)("i",{children:"None"}):i})]})})))})}function ge(e){var t=Object(r.useState)(void 0),n=Object(l.a)(t,2),a=n[0],i=n[1];Object(r.useEffect)((function(){}),[e]);var s=void 0!==a?Object(Q.jsxs)(Oe.a,{id:"popover-positioned-left",style:{width:"20vw",minWidth:1==/Mobi/i.test(window.navigator.userAgent)?275:"400px"},children:[Object(Q.jsx)(Oe.a.Header,{as:"h3",children:"View Resource"}),Object(Q.jsx)(Oe.a.Body,{children:Object(Q.jsx)(xe,{resource:a,resType:e.resType})})]}):Object(Q.jsx)(Oe.a,{id:"popover-positioned-left",style:{width:"20vw"},children:Object(Q.jsxs)(Oe.a.Header,{as:"h3",children:["Loading",Object(Q.jsx)(Oe.a.Body,{})]})});return"view"===e.action?Object(Q.jsx)(me.a,{trigger:"click",placement:"left",overlay:s,rootClose:!0,children:Object(Q.jsx)(h.a,{variant:"link",size:"sm",onClick:function(){i(e.takeSingle(e.id))},children:Object(Q.jsx)("i",{className:"fa fa-eye","aria-hidden":"true",title:"View",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"delete"===e.action?Object(Q.jsx)(h.a,{variant:"link",size:"sm",onClick:Object(o.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Want to delete: "+e.id+"?")){t.next=12;break}return t.prev=2,t.next=5,A(e.resType,e.id);case 5:200===t.sent.response.status&&e.removeSingle(e.id),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])}))),children:Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Delete",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})}):"edit"===e.action?Object(Q.jsx)(j.b,{to:"/edit/"+e.resType+"/"+e.id,children:Object(Q.jsx)(h.a,{variant:"link",size:"sm",children:Object(Q.jsx)("i",{className:"fa fa-pencil-alt","aria-hidden":"true",title:"Edit",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):"duplicate"===e.action?Object(Q.jsx)(j.b,{to:"/add/"+e.resType+"/?from="+e.id,children:Object(Q.jsx)(h.a,{variant:"link",size:"sm",children:Object(Q.jsx)("i",{className:"fa fa-copy","aria-hidden":"true",title:"Duplicate",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}):Object(Q.jsx)("div",{})}function ye(e){return void 0===e.header||void 0===e.resources||e.header.includes("actions")&&void 0===e.actions?Object(Q.jsx)("div",{children:"Loading"}):Object(Q.jsx)("div",{children:Object(Q.jsxs)(pe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(Q.jsx)("thead",{children:Object(Q.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(t){return void 0!==H[e.resType]&&void 0!==H[e.resType][t]?Object(Q.jsx)("th",{children:H[e.resType][t]}):Object(Q.jsx)("th",{children:t})})))},"header")}),Object(Q.jsx)("tbody",{children:a.a.Children.toArray(e.resources.map((function(t,n){return Object(Q.jsx)("tr",{children:a.a.Children.toArray(e.header.map((function(r){return"actions"===r?Object(Q.jsxs)("td",{children:[e.actions.includes("view")?Object(Q.jsx)(ge,{resType:e.resType,action:"view",k:n+"_view",id:t._id,takeSingle:e.takeSingle}):"",e.actions.includes("edit")?Object(Q.jsx)(ge,{resType:e.resType,action:"edit",k:n+"_edit",id:t._id}):"",e.actions.includes("duplicate")?Object(Q.jsx)(ge,{resType:e.resType,action:"duplicate",k:n+"_duplicate",id:t._id}):"",e.actions.includes("delete")?Object(Q.jsx)(ge,{resType:e.resType,action:"delete",k:n+"_delete",id:t._id,removeSingle:e.removeSingle}):""]}):void 0!==t[r]?Array.isArray(t[r])?Object(Q.jsx)("td",{children:"[ "+t[r].join(" , ")+" ]"}):Object(Q.jsx)("td",{children:t[r]}):void 0})))})})))})]})})}ie.a.library.add(se.d,se.e,se.c);var we=n(182);n(95);function ke(e){var t=Object(b.h)().page,n=Object(j.c)(),a=Object(l.a)(n,2),i=a[0],s=a[1],c=Object(r.useState)(void 0),d=Object(l.a)(c,2),p=d[0],f=d[1],O=Object(r.useState)(void 0),m=Object(l.a)(O,2),x=m[0],v=m[1],g=Object(r.useState)(void 0),y=Object(l.a)(g,2),w=y[0],k=y[1],N=Object(r.useState)(1),C=Object(l.a)(N,2),_=C[0],S=C[1],A=Object(r.useState)(1),I=Object(l.a)(A,2),F=I[0],D=I[1],T=Object(r.useState)(),R=Object(l.a)(T,2),B=R[0],z=R[1],L=Object(r.useState)(),E=Object(l.a)(L,2),H=E[0],K=E[1],U=Object(r.useState)(),J=Object(l.a)(U,2),q=J[0],V=J[1],Y=Object(r.useState)(),X=Object(l.a)(Y,2),Z=X[0],$=X[1],ee=Object(r.useState)(),te=Object(l.a)(ee,2),ne=te[0],re=te[1];Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var n,r,a=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:{},e.prev=1,e.next=4,P(t,n);case 4:r=e.sent,v(W[t]),f(r.docs),void 0!==G[t]&&k(G[t]),z(r.hasNextPage),K(r.hasPrevPage),re(r.totalPages),V(r.prevPage),$(r.nextPage),e.next=25;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0),v(void 0),f(void 0),z(void 0),K(void 0),re(void 0),V(void 0),$(void 0);case 25:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),n=null!==i.get("page")?i.get("page"):1;S(n);var r=null!==i.get("limit")?i.get("limit"):10;D(r),e({page:n,limit:r}).catch(console.error)}),[e,t,i]);var ae=function(){var e=parseInt(_,10)-2>0,t=parseInt(_,10)+2<ne;return Object(Q.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(Q.jsxs)(we.a,{style:{alignSelf:"center",marginLeft:"auto",marginRight:"auto"},children:[Object(Q.jsx)(we.a.First,{disabled:1===_,onClick:function(){return s({page:1,limit:F})}}),Object(Q.jsx)(we.a.Prev,{disabled:!H,onClick:function(){return s({page:q,limit:F})}}),e&&Object(Q.jsx)(we.a.Ellipsis,{}),parseInt(_,10)-1>0&&Object(Q.jsx)(we.a.Item,{onClick:function(){return s({page:parseInt(_,10)-1,limit:F})},children:parseInt(_,10)-1}),Object(Q.jsx)(we.a.Item,{children:Object(Q.jsx)("b",{children:_})}),parseInt(_,10)+1<=ne&&Object(Q.jsx)(we.a.Item,{onClick:function(){return s({page:parseInt(_,10)+1,limit:F})},children:parseInt(_,10)+1}),t&&Object(Q.jsx)(we.a.Ellipsis,{}),Object(Q.jsx)(we.a.Next,{disabled:!B,onClick:function(){return s({page:Z,limit:F})}}),Object(Q.jsx)(we.a.Last,{disabled:_===ne,onClick:function(){return s({page:ne,limit:F})}})]})})};return Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsxs)("header",{className:"page-header",children:[t,void 0!==M[t]&&Object(Q.jsx)(j.b,{to:"/add/"+t+"/",children:Object(Q.jsx)(h.a,{variant:"link",size:"sm",children:Object(Q.jsx)("i",{className:"fa fa-plus-circle","aria-hidden":"true",title:"Add",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}},t+"icon")},t+"button")},t+"_add_navlink")]}),Object(Q.jsxs)("main",{className:"page-content",children:[Object(Q.jsx)(ye,{resType:t,header:x,resources:p,actions:w,takeSingle:function(e){return p.find((function(t){return t._id===e}))},removeSingle:function(e){var t=p.filter((function(t){return t._id!==e}));f(t)}}),Object(Q.jsx)(ae,{})]})]})}ie.a.library.add(se.f);var Ne=n(172),Ce=n(173),_e=n(97);function Se(e){var t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(""),c=Object(l.a)(s,2),d=c[0],j=c[1],b=Object(r.useState)(""),p=Object(l.a)(b,2),f=p[0],O=p[1],m=Object(r.useState)(""),x=Object(l.a)(m,2),v=x[0],g=x[1],y=Object(r.useState)(""),w=Object(l.a)(y,2),k=w[0],N=w[1],C=Object(r.useState)(""),S=Object(l.a)(C,2),A=S[0],I=S[1];Object(r.useEffect)((function(){var e=localStorage.getItem("diten-username"),t=localStorage.getItem("diten-user-role"),n=localStorage.getItem("diten-user-tenant");i(null!==e?e:""),j(null!==t?t:""),O(null!==n&&""!==n?n:"-")}),[]);var P=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v===k){e.next=4;break}return I(Y().pass_not_match),e.abrupt("return");case 4:if(""!==v&&""!==k){e.next=7;break}return I(Y().pass_not_null),e.abrupt("return");case 7:if(!window.confirm(Y().pass_change_confirm)){e.next=21;break}return e.prev=9,e.next=12,_("users",{password:v},a);case 12:n=e.sent,g(""),N(""),200===n.response.status&&I(Y().password_changed),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[9,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsxs)("header",{className:"page-header",children:[Y().welcome,"\xa0",Object(Q.jsx)("b",{children:a}),":\xa0",Y().profile_page_desc]}),Object(Q.jsxs)("main",{className:"page-content",children:[Object(Q.jsxs)(Ne.a,{fluid:!0,children:[Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{xs:1,children:"Username:\xa0"}),Object(Q.jsx)(_e.a,{children:Object(Q.jsx)("b",{children:a})})]}),Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{xs:1,children:Y().role}),Object(Q.jsxs)(_e.a,{children:[d,"\xa0","admin"===d?Object(Q.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===d?Object(Q.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===d?Object(Q.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===d?Object(Q.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Q.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})]}),Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{xs:1,children:Y().tenant+" "}),Object(Q.jsx)(_e.a,{children:Object(Q.jsx)("b",{children:f})})]})]}),Object(Q.jsx)("hr",{}),Object(Q.jsxs)(Ne.a,{fluid:!0,children:[Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(Ce.a,{children:Object(Q.jsx)("b",{children:"Edit password"})})}),Object(Q.jsx)(Ce.a,{children:Object(Q.jsx)(_e.a,{children:Object(Q.jsxs)(Z.a,{onSubmit:P,children:[Object(Q.jsx)(Ce.a,{children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"password",onChange:function(e){e.preventDefault(),g(e.target.value)},value:v,placeholder:Y().enter+" new password"})})}),Object(Q.jsx)(Ce.a,{children:Object(Q.jsxs)(Z.a.Group,{className:"mb-3",children:[Object(Q.jsx)(Z.a.Control,{type:"password",onChange:function(e){e.preventDefault(),N(e.target.value)},value:k,placeholder:Y().repeat+" new password","aria-describedby":"passwordHelpBlock"}),Object(Q.jsx)(Z.a.Text,{id:"passwordHelpBlock",muted:!0,children:A})]})}),Object(Q.jsx)(h.a,{variant:"primary",type:"submit",children:Y().submit})]})})})]})]})]})}n(156),n(157);function Ae(){return Object(Q.jsx)("div",{className:"unAuth-page",children:Object(Q.jsx)("div",{className:"info-box",children:Object(Q.jsx)("div",{className:"info-text",children:Y().unauthorised_user})})})}var Ie=n(174),Pe=n(177),Fe=n(175),De=n(181),Te=(n(158),a.a.createContext()),Re=a.a.createRef();function Be(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),i=n[0],s=n[1],c=Object(r.useState)(!1),o=Object(l.a)(c,2),d=o[0],u=o[1],j=a.a.useRef(),b=Object(r.useContext)(Te);Re.current=0;var p=function(){return s(!1)};Object(r.useEffect)((function(){Re.current<b.notifications.length&&(Re.current=b.notifications.length,u(!0),setTimeout((function(){u(!1)}),600))}),[b.notifications]),1==/Mobi/i.test(window.navigator.userAgent)?j.current="vertical":j.current=E;var f=b.notifications.filter((function(e){return"error"===e.name}));return Object(Q.jsxs)("div",{className:"notificationBar",style:"vertical"===j.current&&0==/Mobi/i.test(window.navigator.userAgent)?{height:"100vh"}:{},children:[Object(Q.jsxs)(h.a,{variant:"link",onClick:function(){s(!0)},style:{color:"#fff",textDecoration:"none"},children:[Y().notifications,"\xa0",Object(Q.jsx)(Ie.a,{pill:!0,bg:f.length>0?"danger":"success",className:"element".concat(d?" highlight":""),children:b.notifications.length}),Object(Q.jsx)("span",{className:"visually-hidden",children:"Unread notifications"})]}),Object(Q.jsxs)(Pe.a,{style:{backgroundColor:"#123651",color:"#fff"},show:i,onHide:p,placement:"end",name:"notification_bar",scroll:!1,backdrop:!0,keyboard:!0,children:[Object(Q.jsx)(Pe.a.Header,{children:Object(Q.jsxs)(Pe.a.Title,{children:[Y().notifications,"\xa0",Object(Q.jsx)(Ie.a,{pill:!0,bg:f.length>0?"danger":"success",children:b.notifications.length}),"\xa0\xa0\xa0",Object(Q.jsx)(h.a,{variant:"outline-secondary",onClick:function(){return p()},children:Y().close+" "+Y().notifications})]})}),Object(Q.jsx)(Pe.a.Body,{children:Object(Q.jsxs)("div",{style:{width:"100%",height:"100%"},children:[0!==b.notifications.length&&Object(Q.jsx)(h.a,{variant:"warning",onClick:function(){return b.ClearNotifications()},children:Y().clear_all}),Object(Q.jsx)(Fe.a,{children:b.notifications.map((function(e,t){var n;return"info"===e.name&&(n="success"),"error"===e.name&&(n="danger"),Object(Q.jsxs)(De.a,{className:"d-inline-block m-1",bg:n,animation:!0,onClose:function(){b.RemoveNotification(t)},children:[Object(Q.jsxs)(De.a.Header,{children:[Object(Q.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded me-2",alt:""}),Object(Q.jsx)("strong",{className:"me-auto",children:e.name}),Object(Q.jsx)("small",{children:e.time.slice(0,15)})]}),Object(Q.jsx)(De.a.Body,{children:e.msg})]},"notification_"+t)}))})]})})]})]})}n(159);ie.a.library.add(se.g,se.a,se.l,se.j,se.i,se.k,se.h,se.b);var ze=a.a.createRef(),Le=a.a.createRef(),Ee=a.a.createRef(),We=a.a.createRef(),He=a.a.createRef(),Ge=a.a.createRef(),Ke=a.a.createRef();function Ue(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=(t[0],t[1]),i=localStorage.getItem("diten-username"),s=localStorage.getItem("diten-user-role"),c=localStorage.getItem("diten-user-tenant");return Ge.current=null!==i?i:"",He.current=null!==s?s:"",Ke.current=null!==c&&""!==c?c:"-",Object(r.useEffect)((function(){function e(){var t,n;if(null!==Ee.current)n=Ee.current-1;else{if(null===Le.current){var r=localStorage.getItem("diten-login-time");null!==r?(Le.current=r,t=parseInt(r,10)):(t=Date.now(),Le.current=t)}else t=parseInt(Le.current,10);null===We.current&&(We.current=function(){var e=localStorage.getItem("diten-token-expiration-time");return null===e?300:e.endsWith("h")?60*parseInt(e.slice(0,-1))*60*1e3:e.endsWith("m")?60*parseInt(e.slice(0,-1))*1e3:(e.endsWith("s"),1e3*parseInt(e.slice(0,-1)))}()),n=(t+We.current-Date.now())/1e3}if(n<60&&(clearInterval(ze.current),y().then((function(){Ee.current=null,Le.current=null,ze.current=setInterval((function(){e()}),1e3)}))),n<=0)return localStorage.clear(),void window.location.replace("/");Ee.current=parseInt(n,10)}ze.current=setInterval((function(){e()}),1e3)}),[]),Object(Q.jsx)("nav",{className:"horizontal-nav",children:Object(Q.jsx)("div",{className:"horizontal-nav-links",children:Object(Q.jsx)("div",{className:"data-wrapper",children:Object(Q.jsxs)(Ne.a,{fluid:!0,children:[Object(Q.jsxs)(Ce.a,{style:{padding:0},children:[Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(j.b,{to:"/home",className:"nav-wrap",children:z})}),Object(Q.jsx)(_e.a,{children:Object(Q.jsxs)(j.b,{to:"/viewProfile/",children:[Y().welcome+" ",Object(Q.jsx)("b",{children:Ge.current})]},"viewProfile")}),Object(Q.jsx)(_e.a,{children:Object(Q.jsxs)("div",{className:"horizontal-nav-text",children:[Y().role+" ","admin"===He.current?Object(Q.jsx)("i",{className:"fa fa-user-tie","aria-hidden":"true",title:"Admin"}):"provider"===He.current?Object(Q.jsx)("i",{className:"fa fa-user-graduate","aria-hidden":"true",title:"Provider"}):"analyst"===He.current?Object(Q.jsx)("i",{className:"fa fa-user-cog","aria-hidden":"true",title:"Analyst"}):"supplier"===He.current?Object(Q.jsx)("i",{className:"fa fa-user-tag","aria-hidden":"true",title:"Supplier"}):Object(Q.jsx)("i",{className:"fa fa-user","aria-hidden":"true","aria-label":"User"})]})}),Object(Q.jsx)(_e.a,{children:Object(Q.jsxs)("div",{className:"horizontal-nav-text",children:[Y().tenant+" ",Object(Q.jsx)("b",{children:Ke.current})]})}),Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(h.a,{variant:"outline-danger",onClick:function(){return localStorage.clear(),void document.location.replace("/")},children:Y().logout})}),L.length>1&&Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(X,{})}),Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(Be,{})})]}),Object(Q.jsxs)(Ce.a,{style:{padding:0},children:[Object(Q.jsx)("hr",{}),Object(Q.jsx)("div",{style:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start"},children:Y().tools})]}),Object(Q.jsx)(Ce.a,{style:{padding:0},children:a.a.Children.toArray(Object.keys(W).map((function(e){return Object(Q.jsx)(_e.a,{children:Object(Q.jsx)(j.b,{to:"/"+e,className:function(e){return e.isActive?"active":""},onClick:function(){return n(!1)},children:e},e)})})))})]})})})})}var Me,Je=n(9),qe=function e(t){if(void 0===t)return!0;if(null==t)return!0;if("number"===typeof t)return isNaN(t);if("string"===typeof t)return""===t;if(Array.isArray(t)){if(0===t.length)return!0;var n=!0;return t.forEach((function(t){n=n&&e(t)})),n}if(t.constructor===Object){var r=!0;return Object.entries(t).forEach((function(t){var n=Object(l.a)(t,2),a=(n[0],n[1]);r=r&&e(a)})),r}},Ve=function(e){return!1===Array.isArray(e)?-1:e.filter((function(e){return!qe(e)})).length},Ye=function e(t){if(Array.isArray(t),t.constructor===Object)for(var n=Object.entries(t),r=0;r<n.length;r++){if(Array.isArray(n[r][1]))for(var a=0;a<n[r][1].length;a++)n[r][1][a].constructor===Object||Array.isArray(n[r][1][a])?(e(n[r][1][a]),qe(n[r][1][a])&&n[r][1].splice(a,1)):qe(n[r][1][a])&&n[r][1].splice(a,1);if(n[r][1].constructor===Object)for(var i=Object.entries(n[r][1]),s=0;s<i.length;s++)i[r][1].constructor===Object||Array.isArray(i[r][1])?e(i[r][1]):qe(i[r][1])&&delete n[r][1][i[r][0]]}return t},Qe=function e(t,n){if(void 0===t||void 0===n)return!1;if(t===n)return!0;if(typeof t!==typeof n)return!1;if(Array.isArray(t)&&!Array.isArray(n)||!Array.isArray(t)&&Array.isArray(n))return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===Object&&n.constructor!==Object||t.constructor!==Object&&n.constructor===Object)return!1;if(t.constructor===Object&&n.constructor===Object){var a=Object.keys(t),i=Object.keys(n);return a.length===i.length&&(!!e(a,i)&&!!e(Object.values(t),Object.values(n)))}return!1};var Xe=function(e){if(void 0===e.values||void 0===e.resource||void 0===e.disabledFields||void 0===e.functionalFields||void 0===e.submitFunction||void 0===e.backFunction||void 0===e.handleChangesCallback||void 0===e.arrayDeleteCallback)return"Loading";var t=function(t,n){return Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:t})}),Object(Q.jsx)(_e.a,{sm:4,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsxs)(Z.a.Select,{"aria-label":"Default select",value:e.values[t],id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],children:[Object(Q.jsx)("option",{children:Y().select+" "+t}),a.a.Children.toArray(Object.entries(n).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(Q.jsx)("option",{value:n,children:r})})))]})})})]})};return Object(Q.jsxs)(Z.a,{onSubmit:e.submitFunction,children:[Object(Q.jsxs)(Ne.a,{fluid:!0,children:[void 0===e.functionalFields[e.resource]&&"No operation allowed",void 0!==e.functionalFields[e.resource]&&a.a.Children.toArray(Object.entries(e.values).map((function(n){var r,i=Object(l.a)(n,2),s=i[0],c=i[1];if("number"===typeof c)return function(t){return Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:t})}),Object(Q.jsx)(_e.a,{sm:4,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"number",id:t,onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t])},value:isNaN(e.values[t])?"":e.values[t],disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],placeholder:Y().enter+" "+t})})})]})}(s);if("string"===typeof c)return function(n){return void 0!==V[e.resource]&&void 0!==V[e.resource][n]&&void 0!==Me&&void 0!==Me[V[e.resource][n]]?t(n,Me[V[e.resource][n]]):Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:n})}),Object(Q.jsx)(_e.a,{sm:4,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"password"===n?"password":"text",id:n,onChange:function(t){t.preventDefault(),e.handleChangesCallback(t.target.value,[n])},disabled:void 0!==e.disabledFields[n]&&e.disabledFields[n],value:e.values[n],placeholder:Y().enter+" "+n})})})]})}(s);if(Array.isArray(c)){if("number"===typeof c[0])return r=s,Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:r})}),Object(Q.jsx)(_e.a,{sm:4,children:a.a.Children.toArray(e.values[r].map((function(t,n){return Object(Q.jsx)(Ce.a,{children:Object(Q.jsxs)(Z.a.Group,{className:"mb-3",children:[Object(Q.jsxs)(Z.a.Label,{children:["Insert ",Object(Q.jsx)("b",{children:r}),Object(Q.jsxs)("i",{children:["[",n,"]"]})]}),Object(Q.jsx)(Z.a.Control,{type:"number",disabled:void 0!==e.disabledFields[r]&&e.disabledFields[r],onChange:function(t){t.preventDefault(),e.handleChangesCallback(parseInt(t.target.value,10),[r,n])},value:isNaN(e.values[r][n])?"":e.values[r][n],placeholder:Y().enter+" "+r})]})})})))})]});if("string"===typeof c[0])return function(t){return Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:t})}),Object(Q.jsx)(_e.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{sm:1,children:Object(Q.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(Q.jsx)(_e.a,{sm:4,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r])},value:e.values[t][r],placeholder:Y().enter+" "+t})})}),Object(Q.jsx)(_e.a,{md:"auto"})]})})))})]})}(s);if(c[0].constructor===Object)return function(t){return Object(Q.jsxs)(Ce.a,{style:{borderBottomStyle:"solid",borderBottomWidth:"1px",marginBottom:"5px"},children:[Object(Q.jsx)(_e.a,{sm:2,style:{borderRightStyle:"dotted",borderRightWidth:"1px"},children:Object(Q.jsx)("b",{children:t})}),Object(Q.jsx)(_e.a,{children:a.a.Children.toArray(e.values[t].map((function(n,r){return Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{sm:1,children:Object(Q.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r])},children:Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(Object.entries(n).map((function(n){var i=Object(l.a)(n,2),s=i[0],c=i[1];return"number"===typeof c?Object(Q.jsx)(_e.a,{sm:2,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"number",onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s])},disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],value:isNaN(e.values[t][r][s])?"":e.values[t][r][s],placeholder:Y().enter+" "+s},t+s+r+"")})}):"string"===typeof c?Object(Q.jsx)(_e.a,{sm:3,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s])},value:e.values[t][r][s],placeholder:Y().enter+" "+s})})}):Array.isArray(c)?0===c.length?s+" is empty":Object(Q.jsx)(Ce.a,{children:Object(Q.jsx)(fe.a,{defaultActiveKey:"0",children:Object(Q.jsxs)(fe.a.Item,{eventKey:"0",children:[Object(Q.jsxs)(fe.a.Header,{children:[Object(Q.jsx)("b",{children:s})," : ",Ve(c)," items"]}),Object(Q.jsx)(fe.a.Body,{children:a.a.Children.toArray(c.map((function(n,i){if(n.constructor===Object){var c=Object.entries(n);return Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{sm:1,style:{borderRightStyle:"dotted",borderRightWidth:"1px"}}),Object(Q.jsx)(_e.a,{sm:1,children:Object(Q.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),a.a.Children.toArray(c.map((function(n){var a=Object(l.a)(n,2),c=a[0],o=a[1];return Object(Q.jsx)(_e.a,{sm:3,children:Object(Q.jsx)(Z.a.Group,{className:"mb-3",children:Object(Q.jsx)(Z.a.Control,{type:"text",disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],onChange:function(n){n.preventDefault(),e.handleChangesCallback(n.target.value,[t,r,s,i,c])},value:o,placeholder:Y().enter+" "+c})})})})))]})}return"number"===typeof n?Object(Q.jsxs)(Ce.a,{children:[Object(Q.jsx)(_e.a,{sm:1,children:Object(Q.jsx)(h.a,{disabled:void 0!==e.disabledFields[t]&&e.disabledFields[t],variant:"link",size:"sm",onClick:function(n){n.preventDefault(),e.arrayDeleteCallback([t,r,s,i])},children:Object(Q.jsx)("i",{className:"fa fa-times","aria-hidden":"true",title:"Remove element",style:{width:"30px",height:"30px",marginRight:"10px",opacity:.85}})})}),Object(Q.jsx)(_e.a,{sm:3,children:Object(Q.jsx)(Z.a.Control,{type:"number",disabled:void 0!==e.disabledFields[s]&&e.disabledFields[s],onChange:function(n){n.preventDefault(),e.handleChangesCallback(parseInt(n.target.value,10),[t,r,s,i])},value:isNaN(n)?"":n,placeholder:Y().enter+" "+s},""+t+r+s+i)})]}):"string"===typeof n?"TODO string":"Unknown data type"})))})]})})}):"Unknown data type"})))]})})))})]})}(s)}return c.constructor===Object?"TODO":""})))]}),Object(Q.jsx)(h.a,{variant:"primary",type:"submit",children:Y().submit},"submit"),"\xa0\xa0\xa0",Object(Q.jsx)(h.a,{variant:"secondary",onClick:e.backFunction,children:Y().cancel},"cancel")]})},Ze=n(2),$e=n(59);function et(e,t){var n=Object.keys(e),r=Object.keys(t);return(n=n.filter((function(e){return-1!==r.indexOf(e)}))).sort((function(e,t){return r.indexOf(e)-r.indexOf(t)})),n.reduce((function(n,r){if(Array.isArray(e[r])&&0!==e[r].length&&e[r][0].constructor===Object){var a=e[r].map((function(e){return et(e,t[r][0])}));n[r]=a}else n[r]=e[r];return n}),{})}function tt(e,t,n){for(var r=Object.keys(e),a=$e(e),i=0;i<r.length;i++)Array.isArray(a[r[i]])&&(a=nt(a,[r[i]],t,n));return a}function nt(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=$e(e),s=i,o=$e(n[r]),l=Object(c.a)(t),d=0;d<l.length&&void 0!==t[d];d++)s=s[t[d]];for(var u=0;u<l.length&&void 0!==t[u]&&void 0!==o;u++)o="number"===typeof t[u]?o[0]:o[t[u]];return Array.isArray(o)?(void 0!==o&&(0===s.length?o[0].constructor===Object?s.push(Object(Ze.a)({},o[0])):s.push(""):s[0].constructor===Object?0===s.filter((function(e){return qe(e)})).length&&s.push(Object(Ze.a)({},o[0])):s.includes("")||s.push("")),void 0!==a&&void 0===o&&(0===s.length||0===s.filter((function(e){return qe(e)})).length)&&(a.constructor===Object?s.push(Object(Ze.a)({},a)):s.push(a)),i):i}var rt=n(59);function at(e){var t=Object(b.h)(),n=t.resource,a=t.id,i=Object(r.useState)(),s=Object(l.a)(i,2),d=s[0],j=s[1],h=Object(r.useState)(""),p=Object(l.a)(h,2),f=p[0],O=p[1],m=Object(b.g)(),x=Object(r.useState)(rt(U[n])),v=Object(l.a)(x,2),g=v[0],y=v[1],w=Object(r.useState)({}),k=Object(l.a)(w,2),N=k[0],C=(k[1],Object(r.useState)(void 0)),S=Object(l.a)(C,2),A=S[0],I=S[1];Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t,r,i,s,c,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,P(n,t);case 3:r=e.sent,i=r.docs[0],s=rt(g),s=et(i,s),c=function(){var e=Object(o.a)(u.a.mark((function e(){var t,r,i,c,o,l,d,b,h,p,f,O;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==J[n]){e.next=7;break}for(I({}),t=Object.keys(s),r=0;r<t.length;r++)i=t[r],s=nt(s,[i],U,n);return y(s),j(rt(s)),e.abrupt("return");case 7:c={},void 0!==A&&(c=A),o=Object.entries(J[n]),l=0;case 11:if(!(l<o.length)){e.next=24;break}if(d=o[l][0],b=o[l][1],void 0!==s[d]){e.next=16;break}return e.abrupt("continue",21);case 16:if("disable"!==b.type){e.next=21;break}return e.next=19,b.policy(a);case 19:h=e.sent,c[d]=h;case 21:l++,e.next=11;break;case 24:for(p=Object.keys(s),f=0;f<p.length;f++)O=p[f],void 0!==c[O]&&!1!==c[O]||(s=nt(s,[O],U,n));I(c),y(s),j(rt(s));case 29:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t={_id:a};e({filter:JSON.stringify(t)})}),[]);var F=function(){var e=Object(o.a)(u.a.mark((function e(t){var r,i,s,o,l,j,b,h,p,f,x,v,y,w,k,C;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),r=rt(g),i=rt(d),Ye(r),Ye(i),s={},o=Object.entries(r),l=0;l<o.length;l++)if(j=o[l][0],b=o[l][1],Array.isArray(b)){if(void 0===s[j]&&(s[j]={add:[],remove:[],update:[]}),h=Object(c.a)(i[j]),void 0!==N[j])for(p=0;p<N[j].indexes.length;p++)(f=h.splice(N[j].indexes[p][0],1)[0]).constructor===Object?(x=Object.keys(f)[0],s[j].remove.push(f[x])):s[j].remove.push(f);for(v=0;v<r[j].length;v++)v<h.length&&!Qe(r[j][v],h[v])&&(r[j][v].constructor===Object?(w=Object.keys(h[v])[0],s[j].update.push((y={},Object(Je.a)(y,w,h[v][w]),Object(Je.a)(y,"new",r[j][v]),y))):(s[j].add.push(r[j][v]),s[j].remove.push(h[v]))),v>=h.length&&s[j].add.push(r[j][v]);Qe(s[j],{add:[],remove:[],update:[]})&&delete s[j]}else b.constructor===Object||b!==d[j]&&(s[j]=b);return e.prev=8,e.next=11,_(n,s,a);case 11:C=e.sent,k=C.response,O(k.statusText),m("/"+n),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(8),k=e.t0.error.response,O(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 21:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsxs)("header",{className:"page-header",children:["Edit \xa0",Object(Q.jsx)("b",{children:n}),"\xa0of id:\xa0",Object(Q.jsx)("b",{children:a}),"\xa0from:"]}),Object(Q.jsxs)("main",{className:"page-content",children:[Object(Q.jsx)(Xe,{values:g,resource:n,functionalFields:U,disabledFields:A,handleChangesCallback:function(e,t){var r,a=rt(g),i=a,s=-1;for(r=0;r<t.length-1;r++)i=i[t[r]],"number"===typeof t[r]&&(s=r);if("number"===typeof t[r]&&(s=r),i[t[r]]=e,-1!==s){var c="number"===typeof e?NaN:"";a=nt(a,t.slice(0,s),U,n,c)}y(a)},arrayDeleteCallback:function(e){var t,r=rt(g),a=r;for(t=0;t<e.length-1&&void 0!==e[t];t++)a=a[e[t]];var i=a.splice(e[t],1),s="number"===typeof i[0]?NaN:"";r=nt(r,e.slice(0,t),U,n,s),1===t&&(void 0===N[e[0]]&&(N[e[0]]={indexes:[],elements:[],minDel:1/0}),qe(i[0])||(N[e[0]].elements.push(i[0]),N[e[0]].indexes.push(e[t]>=N[e[0]].minDel?e[t]+N[[e[0]]].indexes.filter((function(n){return n>=e[t]})).length:e[t]),e[t]<N[e[0]].minDel&&(N[e[0]].minDel=e[t]))),y(r)},submitFunction:F,backFunction:function(e){e.preventDefault(),m(-1)}}),Object(Q.jsx)("br",{}),Object(Q.jsx)("font",{style:{marginLeft:"5px"},children:f})]})]})}var it=n(180),st=function(e){return void 0===e.submitFunction||void 0===e.backFunction||void 0===e.setContentHeader||void 0===e.setContentPlain||void 0===e.setContentBody||void 0===e.setFile||void 0===e.contentBody||void 0===e.contentPlain||void 0===e.contentHeader?"Loading":Object(Q.jsxs)(Z.a,{onSubmit:e.submitFunction,children:[Object(Q.jsx)(Z.a.Label,{children:Object(Q.jsx)("b",{children:Y().select_file})}),Object(Q.jsx)(Z.a.Control,{className:"mb-3",type:"file",accept:".csv, .json",label:"File",onChange:function(t){var n=t.target.files[0];e.setFile(n);var r=new FileReader;r.onloadend=function(){var t=r.result;if(n.name.endsWith(".csv")){var a=new RegExp("\\r","g"),i=t.replace(a,"").split("\n");e.setContentHeader(i[0]),i.splice(0,1),e.setContentBody(i)}if(n.name.endsWith(".json")){var s=r.result;e.setContentPlain(s)}},r.readAsText(n)}}),null!==e.contentBody&&null!==e.contentHeader&&Object(Q.jsx)(fe.a,{children:Object(Q.jsxs)(fe.a.Item,{eventKey:"0",children:[Object(Q.jsx)(fe.a.Header,{children:Y().file_content}),Object(Q.jsx)(fe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:Object(Q.jsxs)(pe.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,children:[Object(Q.jsx)("thead",{children:Object(Q.jsx)("tr",{children:a.a.Children.toArray(e.contentHeader.split(",").map((function(e){return Object(Q.jsx)("th",{children:e})})))})}),Object(Q.jsx)("tbody",{children:a.a.Children.toArray(e.contentBody.map((function(e){return Object(Q.jsx)("tr",{children:a.a.Children.toArray(e.split(",").map((function(e){return Object(Q.jsx)("td",{children:e})})))})})))})]})})]})}),null!==e.contentPlain&&Object(Q.jsx)(fe.a,{children:Object(Q.jsxs)(fe.a.Item,{eventKey:"0",children:[Object(Q.jsx)(fe.a.Header,{children:Y().file_content}),Object(Q.jsx)(fe.a.Body,{style:{overflow:"scroll",height:"70vh"},children:e.contentPlain})]})}),Object(Q.jsx)(h.a,{variant:"primary",type:"submit",children:Y().submit},"submit"),"\xa0\xa0\xa0",Object(Q.jsx)(h.a,{variant:"secondary",onClick:e.backFunction,children:Y().cancel},"cancel")]})},ct=n(59);function ot(e){var t=Object(b.h)().resource,n=Object(j.c)(),a=Object(l.a)(n,2),i=a[0];a[1];void 0!==e.resource&&(t=e.resource);var s=Object(b.g)(),c=Object(r.useState)("form"),d=Object(l.a)(c,2),h=d[0],p=d[1],f=Object(r.useState)(""),O=Object(l.a)(f,2),m=O[0],x=O[1],v=Object(r.useState)(ct(M[t])),g=Object(l.a)(v,2),y=g[0],k=g[1],C=Object(r.useState)(void 0),_=Object(l.a)(C,2),S=_[0],A=_[1],I=Object(r.useState)(null),F=Object(l.a)(I,2),D=F[0],T=F[1],R=Object(r.useState)(null),B=Object(l.a)(R,2),z=B[0],L=B[1],E=Object(r.useState)(null),W=Object(l.a)(E,2),H=W[0],G=W[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var n,r,a,i,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,P(t,n);case 3:r=e.sent,a=r.docs[0],i=ct(y),i=tt(i=et(a,i),M,t),k(i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(null!==i.get("from")&&""!==i.get("from")){var n={_id:i.get("from")};e({filter:JSON.stringify(n)})}}),[i,t]),void 0===M[t])return Object(Q.jsx)("div",{children:"This entity cannot be posted"});var K=function(e){e.preventDefault(),s(-1)},U=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=ct(y)).token&&(r=a.token,delete a.token),i=ct(a),Ye(i),e.prev=6,e.next=9,N(t,JSON.stringify(i),r);case 9:o=e.sent,c=o.response,x(c.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),c=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===c.status&&!0===window.confirm("Back to resource page?")&&s("tenants"===t?"/":"/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!S.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",S),e.prev=4,e.next=7,w(t,a);case 7:i=e.sent,r=i.response,x(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,x(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!S.name.endsWith(".json")){e.next=31;break}return e.prev=18,e.next=21,N(t,H,void 0);case 21:c=e.sent,r=c.response,x(r.statusText),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(18),console.log(e.t1),r=e.t1.error.response,x(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 31:200===r.status&&!0===window.confirm("Back to resource page?")&&s("/"+t);case 32:case"end":return e.stop()}}),e,null,[[4,12],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(Q.jsx)("b",{children:t})]}),Object(Q.jsxs)("main",{className:"page-content",children:[Object(Q.jsxs)(it.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return p(e)},defaultActiveKey:"form",children:[q[t].includes("form")&&Object(Q.jsx)(it.a.Item,{children:Object(Q.jsx)(it.a.Link,{eventKey:"form",children:"Form"})}),q[t].includes("file")&&null===i.get("from")&&Object(Q.jsx)(it.a.Item,{children:Object(Q.jsx)(it.a.Link,{eventKey:"file",children:"File"})})]}),Object(Q.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===h&&Object(Q.jsxs)("div",{style:{margin:"5px"},children:[Object(Q.jsx)(Xe,{values:y,resource:t,functionalFields:M,disabledFields:{},handleChangesCallback:function(e,n){var r,a=ct(y),i=a,s=-1;for(r=0;r<n.length-1;r++)i=i[n[r]],"number"===typeof n[r]&&(s=r);i[n[r]]=e,"number"===typeof n[r]&&(s=r),-1!==s&&(a=nt(a,n.slice(0,s),M,t)),k(a)},arrayDeleteCallback:function(e){var n,r=ct(y),a=r;for(n=0;n<e.length-1&&void 0!==e[n];n++)a=a[e[n]];a.splice(e[n],1),r=nt(r,e.slice(0,n),M,t),k(r)},submitFunction:U,backFunction:K}),Object(Q.jsx)("br",{}),Object(Q.jsx)("font",{style:{marginLeft:"5px"},children:m})]}),"file"===h&&Object(Q.jsxs)("div",{style:{margin:"5px"},children:[Object(Q.jsx)(st,{submitFunction:J,backFunction:K,setContentBody:L,setContentHeader:T,setContentPlain:G,setFile:A,contentPlain:H,contentHeader:D,contentBody:z}),Object(Q.jsx)("font",{style:{marginLeft:"5px"},children:m})]})]})]})]})}var lt=n(59);function dt(e){var t="experiments",n=Object(j.c)(),i=Object(l.a)(n,2),s=i[0],c=(i[1],Object(b.g)()),d=Object(r.useState)("form"),h=Object(l.a)(d,2),p=h[0],f=h[1],O=Object(r.useState)(""),m=Object(l.a)(O,2),x=m[0],v=m[1],g=Object(r.useState)(lt(M[t])),y=Object(l.a)(g,2),k=y[0],C=y[1],_=Object(r.useState)({}),S=Object(l.a)(_,2),A=S[0],I=S[1],F=Object(r.useState)(),D=Object(l.a)(F,2),T=D[0],R=D[1],B=Object(r.useState)(void 0),z=Object(l.a)(B,2),L=z[0],E=z[1],W=Object(r.useState)(null),H=Object(l.a)(W,2),G=H[0],K=H[1],U=Object(r.useState)(null),J=Object(l.a)(U,2),V=J[0],X=J[1],$=Object(r.useState)(null),ee=Object(l.a)($,2),te=ee[0],ne=ee[1];if(Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t,n,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,P("protocols",t);case 3:n=e.sent,R(n.docs.map((function(e){return e._id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e({limit:100})}),[e,s]),void 0===M[t])return Object(Q.jsx)("div",{children:"This entity cannot be posted"});var re=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r,a,i,s,c,o,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.value,r={_id:t.target.value},a={filter:JSON.stringify(r)},e.next=6,P("protocols",a);case 6:for(i=e.sent,s=i.docs[0],c=[],o=0;o<s.metadata.length;o++)"scalar"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:NaN}),"text"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:""}),"vector"===s.metadata[o].type&&c.push({name:s.metadata[o].name,value:[NaN]});(l=lt(k)).protocol=n,0!==c.length&&(l.metadata=c),(d=lt(A)).protocol=!0,I(d),C(l);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=void 0,void 0!==(a=lt(k)).token&&(r=a.token,delete a.token),i=lt(a),Ye(i),e.prev=6,e.next=9,N(t,JSON.stringify(i),r);case 9:o=e.sent,s=o.response,v(s.statusText),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),s=e.t0.error.response,v(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 19:200===s.status&&!0===window.confirm("Back to resource page?")&&c("/"+t);case 20:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){e.preventDefault(),c(-1)},se=function(){var e=Object(o.a)(u.a.mark((function e(n){var r,a,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!L.name.endsWith(".csv")){e.next=17;break}return(a=new FormData).append("file",L),e.prev=4,e.next=7,w(t,a);case 7:i=e.sent,r=i.response,v(r.statusText),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0),r=e.t0.error.response,v(e.t0.error.response.data.message+" : "+e.t0.error.response.data.details);case 17:if(!L.name.endsWith(".json")){e.next=31;break}return e.prev=18,e.next=21,N(t,te,void 0);case 21:s=e.sent,r=s.response,v(r.statusText),e.next=31;break;case 26:e.prev=26,e.t1=e.catch(18),console.log(e.t1),r=e.t1.error.response,v(e.t1.error.response.data.message+" : "+e.t1.error.response.data.details);case 31:200===r.status&&!0===window.confirm("Back to resource page?")&&c("/"+t);case 32:case"end":return e.stop()}}),e,null,[[4,12],[18,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(Q.jsxs)("div",{className:"page",children:[Object(Q.jsxs)("header",{className:"page-header",children:["Add resource \xa0",Object(Q.jsx)("b",{children:t})]}),Object(Q.jsxs)("main",{className:"page-content",children:[Object(Q.jsxs)(it.a,{justify:!0,variant:"tabs",className:"justify-content-center",onSelect:function(e){return f(e)},defaultActiveKey:"form",children:[q[t].includes("form")&&Object(Q.jsx)(it.a.Item,{children:Object(Q.jsx)(it.a.Link,{eventKey:"form",children:"Form"})}),q[t].includes("file")&&null===s.get("from")&&Object(Q.jsx)(it.a.Item,{children:Object(Q.jsx)(it.a.Link,{eventKey:"file",children:"File"})})]}),Object(Q.jsxs)("div",{style:{backgroundColor:"#fff",borderRadius:"2px",borderStyle:"solid",borderColor:"rgba(18, 54, 81, 0.9)",borderWidth:"1px",width:"100%",height:"fit-content"},children:["form"===p&&void 0!==T&&Object(Q.jsxs)("div",{style:{margin:"5px"},children:[Object(Q.jsxs)(Z.a.Select,{"aria-label":Y().select+" protocol",onChange:re,children:[Object(Q.jsxs)("option",{children:[Y().select," protocol"]}),a.a.Children.toArray(T.map((function(e){return Object(Q.jsx)("option",{value:e,children:e})})))]}),Object(Q.jsx)("br",{}),Object(Q.jsx)(Xe,{values:k,resource:t,functionalFields:M,disabledFields:A,handleChangesCallback:function(e,n){var r,a=lt(k),i=a,s=-1;for(r=0;r<n.length-1;r++)i=i[n[r]],"number"===typeof n[r]&&(s=r);if("number"===typeof n[r]&&(s=r),i[n[r]]=e,-1!==s){var c="number"===typeof e?NaN:"";a=nt(a,n.slice(0,s),M,t,c)}C(a)},arrayDeleteCallback:function(e){var n,r=lt(k),a=r;for(n=0;n<e.length-1&&void 0!==e[n];n++)a=a[e[n]];var i="number"===typeof a.splice(e[n],1)[0]?NaN:"";r=nt(r,e.slice(0,n),M,t,i),C(r)},submitFunction:ae,backFunction:ie}),Object(Q.jsx)("br",{}),Object(Q.jsx)("font",{style:{marginLeft:"5px"},children:x})]}),"file"===p&&Object(Q.jsxs)("div",{style:{margin:"5px"},children:[Object(Q.jsx)(st,{submitFunction:se,backFunction:ie,setContentBody:X,setContentHeader:K,setContentPlain:ne,setFile:E,contentPlain:te,contentHeader:G,contentBody:V}),Object(Q.jsx)("font",{style:{marginLeft:"5px"},children:x})]})]})]})]})}var ut=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],i=t[1],s=a.a.useRef(),d=localStorage.getItem("diten-token");function h(e){i((function(t){return[e].concat(t)}))}function p(e){var t=Object(c.a)(n);t.splice(e,1),i(t)}function f(){i([])}Object(r.useEffect)((function(){var e=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P("types",{},"");case 3:t=e.sent,n=t.response.data,Me=n,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}var n}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();if(void 0===Me)try{e()}catch(t){console.log(t)}}),[]);var O={notifications:n,PushNotification:h,RemoveNotification:p,ClearNotifications:f};return v.ClearNotifications=f,v.PushNotification=h,v.RemoveNotification=p,1==/Mobi/i.test(window.navigator.userAgent)?s.current="vertical":s.current=E,console.log(window),null===d?Object(Q.jsx)("div",{className:"app",children:Object(Q.jsx)(j.a,{children:Object(Q.jsxs)(b.d,{children:[Object(Q.jsx)(b.b,{path:"/",element:Object(Q.jsx)(ne,{})}),Object(Q.jsx)(b.b,{path:"/add/tenants",element:Object(Q.jsx)(ot,{resource:"tenants"})})]})})}):(console.log(s.current),Object(Q.jsx)(Te.Provider,{value:O,children:Object(Q.jsx)(j.a,{children:Object(Q.jsxs)(Ne.a,{fluid:!0,style:{paddingLeft:0,paddingRight:0,height:"100%"},children:["horizontal"===s.current?Object(Q.jsx)(Ce.a,{style:{padding:0},children:Object(Q.jsx)(Ue,{})}):"",Object(Q.jsxs)(Ce.a,{style:{padding:0},children:["vertical"===s.current?Object(Q.jsx)(_e.a,{md:"auto",style:{padding:0,minWidth:"250px"},children:Object(Q.jsx)(he,{})}):"",1==/Mobi/i.test(window.navigator.userAgent)&&Object(Q.jsx)(_e.a,{md:"auto",style:{padding:0},children:Object(Q.jsx)(Be,{})}),Object(Q.jsx)(_e.a,{style:{paddingLeft:0,paddingRight:0},children:Object(Q.jsxs)(b.d,{children:[Object(Q.jsx)(b.b,{path:"/",element:Object(Q.jsx)(re,{})}),Object(Q.jsx)(b.b,{path:"/home",element:Object(Q.jsx)(re,{})}),Object(Q.jsx)(b.b,{path:"/viewProfile",element:Object(Q.jsx)(Se,{})}),Object(Q.jsx)(b.b,{path:"/add/experiments/",element:Object(Q.jsx)(dt,{})}),Object(Q.jsx)(b.b,{path:"/edit/:resource/:id",element:Object(Q.jsx)(at,{})}),Object(Q.jsx)(b.b,{path:"/add/:resource/",element:Object(Q.jsx)(ot,{})}),Object(Q.jsx)(b.b,{path:"/:page",element:Object(Q.jsx)(ke,{res:":page"})}),Object(Q.jsx)(b.b,{path:"/unauthorized",element:Object(Q.jsx)(Ae,{})}),Object(Q.jsx)(b.b,{path:"/404",element:Object(Q.jsx)(ae,{})}),Object(Q.jsx)(b.b,{path:"*",element:Object(Q.jsx)(b.a,{to:"/404",replace:!0})})]})}),"vertical"===s.current&&0==/Mobi/i.test(window.navigator.userAgent)&&Object(Q.jsx)(_e.a,{md:"auto",style:{paddingLeft:0,paddingRight:0},children:Object(Q.jsx)(Be,{})})]})]})})}))};s.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(ut,{})}),document.getElementById("root"))},95:function(e,t,n){}},[[165,1,2]]]);
//# sourceMappingURL=main.4b166323.chunk.js.map