{"version":3,"sources":["helpers/data.helpers.ts","services/http.service.ts","common/localizations/localization_it.js","common/localizations/localization_en.js","common/locale.ts","services/config.service.ts","components/app.context.ts","components/withContext/withContext.comp.tsx","components/loader/loader.comp.tsx","helpers/pagination.helpers.ts","components/button/button.comp.tsx","components/infiniteLoader/infiniteLoader.comp.tsx","components/pagination/pagination.comp.tsx","components/table/table.comp.tsx","components/cards/cards.comp.tsx","components/formRow/formRow.comp.tsx","components/queryParams/queryParams.comp.tsx","components/popup/popup.comp.tsx","helpers/file.helpers.ts","components/formPopup/formPopup.comp.tsx","components/filterField/filterField.comp.tsx","common/models/states.types.helper.ts","common/models/config.types.helper.ts","components/graphHolder/graphHolder.tsx","components/graphPopup/graphPopup.comp.tsx","components/page/page.comp.tsx","components/languageSelector/languageSelector.tsx","components/authPage/authPage.comp.tsx","components/homePage/homePage.tsx","components/notFoundPage/notFoundPage.tsx","components/navigation/navigation.comp.tsx","components/rightbar/rightbar.tsx","components/customStyles/customStyles.comp.tsx","components/unauthorizedPage/unauthorizedPage.tsx","components/app.tsx","serviceWorker.ts","index.tsx"],"names":["dataHelpers","data","dataPath","attr","extractedData","digProps","split","prop","field","type","arrayType","objArray","array","JSON","parse","str","Object","keys","map","value","join","reduce","next","values","HttpService","baseUrl","unauthorizedRedirectUrl","errorMessageDataPath","loginUrl","requestHeaders","this","url","indexOf","rawData","outputUrl","forEach","key","urlParamName","replace","queryParams","exactMatch","length","replaceParamsInUrl","params","page","limit","param","name","push","console","log","reqUrl","urlIsAbsolute","origUrl","finalUrl","buildUrl","authorization","localStorage","getItem","Authorization","method","toUpperCase","headers","assign","body","undefined","res","errorMessage","json","path","dataAtPath","extractDataByDataPath","status","statusText","clear","redirectUrl","encodeURIComponent","document","location","href","Error","getErrorMessage","responseType","fetch","ok","text","handleError","buildRequest","makeRequest","localization_it","username","password","tenant","previous","select","language","welcome","role","session_expire_in","plot","samples","zoomIn","zoomOut","previous_page","next_page","showing_result","out_of","items","enter_text","enter_email","enter_date","enter_color","enter_password","username_suggestion","password_suggestion","tenant_suggestion","add_tenant","id_suggestion","dimensions_guide","welcome_hp","left_bar_descr_hp","right_bar_descr_hp","session_expire_info_hp","github_page_hp","github_issue_page_hp","oh_no","broken_link","user_page_description","thing_page_description","feature_page_description","device_page_description","measure_page_description","tag_page_description","fieldmask_page_description","right_page_description","issue_page_description","constraint_page_description","script_page_description","results_for_page","filter_tag","filter_thing","filter_feature","filter_device","select_feature","select_thing","select_device","no_tag","no_feature","no_script","no_relation","no_item","nothing_to_see","full_privileges","expand_and_edit","clone_and_edit","expand","add","update","submit","close","search","login","logout","scroll_to_top","wrong_feature_error","no_data_error","login_error","unauthorised_user","session_expired","localization_en","locale","tkn","navigator","substring","httpService","HTTPService","endsWith","import","configurator","getRemoteConfig","config","isValid","configSchema","require","validate","Ajv","allErrors","verbose","compile","firstError","errors","message","error","AppContext","React","createContext","activePage","setError","setActivePage","withAppContext","Component","props","Consumer","context","Loader","className","paginationHelpers","parseInt","_page","_itemsPerPage","_total","Button","outlined","color","children","InfiniteLoader","fontawesome","library","faArrowRight","faArrowLeft","Pagination","callbacks","pagination","customLabels","previousTitle","previousPageTitle","nextTitle","nextPageTitle","disabled","hasPreviousPage","onClick","previousPage","title","aria-hidden","hasNextPage","nextPage","faEdit","faTimes","faCogs","Table","fields","customActions","editLabel","buttons","editItem","deleteLabel","deleteItem","actionColumnHeader","tableColumnHeaders","actions","paginationCallbacks","getNextPage","getPreviousPage","renderTableRow","item","rowIdx","fieldIdx","truncate","origField","origItem","src","alt","label","fieldValue","target","rel","urlLabel","style","backgroundColor","html","htmlCode","dangerouslySetInnerHTML","__html","renderTableCell","put","call","action","idx","icon","delete","renderTableContent","useEffect","clientHeight","window","innerHeight","dataLength","hasMore","loader","Cards","renderActions","cardIdx","renderCard","Fragment","renderRow","renderCardSkeleton","duration","startingIndex","Array","from","renderSkeletons","faPlus","FormRow","loadedFields","direction","showReset","onChange","onRemove","useState","optionSources","setOptionSources","pageHeaders","addArrayItemLabel","addArrayItem","clearLabel","clearInput","renderArrayItems","originalField","itemIdx","inputField","renderFieldInput","fieldName","updatedArray","localValue","splice","e","removeItemToFieldArray","aria-label","preventDefault","addItemToFieldArray","readonly","changeCallback","inputProps","defaultPlaceholder","placeholder","required","checked","optionSource","preLoad","loadedOption","optionsData","fill","optionDisplay","opt","i","display","fieldname","options","insertPreloadedData","option","a","async","actualMethod","result","optionSourceData","valuePath","displayPath","toast","position","POSITION","TOP_CENTER","loadOptionSourceFromRemote","sortBy","finalOptions","sortedOptions","orderBy","placeholders","object","number","valueAsNumber","email","accept","file","date","originalName","QueryParams","initialParams","paginationConfig","submitCallback","setQueryParams","formChanged","submitAfterChange","updatedQueryParams","filteredParams","filter","includes","onSubmit","queryParam","portalRoot","getElementById","createElement","setAttribute","append","PortalPopup","el","componentDidMount","appendChild","componentWillUnmount","removeChild","ReactDOM","createPortal","Popup","_handleKeyDown","show","closeCallback","keyCode","closeLabel","closeForm","ref","refCallback","addEventListener","bind","removeEventListener","fileHelpers","fieldIndex","unflatten","FormPopup","getSingleConfig","methodConfig","fieldsCopy","stringify","loading","setLoading","formFields","setFormFields","deleteValues","setDeleteValues","finalRawData","setFinalRawData","submitForm","finalObject","includeOriginalFields","formData","FormData","containFiles","isMultipartForm","validationError","useInUrl","checkIfFieldIsObject","temp","rmVal","fileInput","querySelector","files","firstFile","success","updatedFormFields","saveRemovedValues","delVal","dataTransform","dataPathSplit","lookupValue","objToLookIn","pathElem","lookup","initFormFields","FilterField","toLowerCase","isQueryPaginationState","obj","source","isBodyPaginationState","isQueryPagination","isBodyPagination","faBackward","faForward","faSearchPlus","faSearchMinus","GraphHolder","dataMat","head","tail","prev","prevCallback","nextCallback","zoomInCallback","zoomOutCallback","setHintData","y","setHoverData","hoverData","hintData","setHoverDataWithIndex","index","nameStruct","width","height","onMouseLeave","tickTotal","tickFormat","d","Date","toString","substr","unitMeasure","animation","dataStruct","slice","reverse","onValueMouseOver","setHintDataWithIndex","x","fontSize","background","border","borderColor","parseFloat","toFixed","GraphPopup","graphConfig","doneQuery","setDoneQuery","showGraph","setShowGraph","titleState","setTitleState","graphData","setGraphData","setHead","setTail","pageNum","setPageNum","setTotalPages","loadedDocSize","setLoadedDocSize","fetchedFeature","setFetchedFeature","totalDocs","setTotalDocs","setLimit","graphChanged","submitGraph","fetchFeatureData","pageOffset","tempField","resultsData","fF","resultsFeature","pG","tP","tD","fD","fetchedData","totalPages","buildData","compatibleComponents","dataFeatureName","dataFeatureUnit","ft","comp","dimension","unit","sample","feature","indexFeat","finalData","updatedDocSize","_id","CalculateButtons","TravelPlot","act","newHead","newTail","diff","zoomFactor","newData","concat","buildInitQueryParamsAndPaginationState","initQueryParams","initialPagination","descending","find","get","Page","useParams","useHistory","pageMethods","methods","getAllConfig","getAll","infiniteScroll","getSingle","postConfig","post","putConfig","deleteConfig","addItemLabel","addItem","itemName","openGraphLabel","addItemFormTitle","formTitles","editItemFormTitle","graphTitle","openedPopup","setOpenedPopup","openedGraph","setOpenedGraph","setPagination","setItems","setFilter","openEditPopup","updateItem","removeUselessFields","openCustomActionPopup","performAction","fetchPageData","isArray","orderedItems","total","newPaginationState","getUpdatedPaginationState","getAllRequest","confirm","updatedParams","remove","submitQueryParams","reset","paramsToUrl","queryState","newState","nextPath","prevPath","countPath","f","len","fieldmaskData","fieldmaskIdentifier","nextActivePage","pages","p","pIdx","id","pathname","accessedBy","parsedParams","QueryString","finalQueryParams","decodeURIComponent","extractQueryParams","description","openGraphPopup","fieldsToFilter","filterable","currentCountFrom","currentCountTo","itemsCount","renderPaginationStateLabel","filteredItems","passFilter","newPage","renderItemsUI","renderPageContent","refreshData","LanguageSelector","setSessionLanguage","setItem","reload","AuthPage","user","setUser","pwd","setPwd","setTenant","openedAddTenant","setOpenedAddTenant","credentials","token","token_expiration_time","getTime","fieldmask","addTenant","tokenHead","event","HomePage","NotFoundPage","faBars","Navigation","isOpened","setIsOpened","to","activeClassName","faUserTie","faUserGraduate","faUserCog","faUserTag","faUser","RightBar","setUsername","setRole","loginTime","setLoginTime","tknExpTime","setTknExpTime","displayTime","setDisplayTime","CalcEnding","t0","retryLoginTime","now","remainingSec","exp","retryTokenExpiration","DurationToMilliSeconds","mins","Math","floor","secs","tokenExpiration","setTimeout","CustomStyles","cssVars","styles","vars","arr","UnauthorizedPage","defaultAppName","changeFavicon","link","oldLink","App","setLoadedFields","setFetchedData","firstLoad","setFirstLoad","setConfig","appName","loadConfig","windowConfig","RESTool","remoteConfig","ConfigService","loadDefaultConfig","favicon","remoteUrl","validateConfig","Provider","component","tempLD","preloadData","customStyles","exact","autoClose","draggable","Boolean","hostname","match","render","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.32e5a7bd.chunk.js","sourcesContent":["import { IConfigInputField } from \"../common/models/config.model\";\r\n\r\nclass DataHelpers {\r\n  public extractDataByDataPath(\r\n    data: any,\r\n    dataPath: string,\r\n    attr: string | null = null\r\n  ) {\r\n    if (!data || !dataPath) {\r\n      if (attr) {\r\n        return data[attr];\r\n      }\r\n      return data;\r\n    }\r\n\r\n    let extractedData: any = data;\r\n    const digProps: string[] = dataPath.split(\".\");\r\n\r\n    for (let prop of digProps) {\r\n      if (typeof extractedData[prop] !== \"undefined\") {\r\n        extractedData = extractedData[prop];\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (typeof extractedData === \"undefined\") {\r\n      return null;\r\n    }\r\n\r\n    if (attr) {\r\n      return extractedData[attr];\r\n    }\r\n\r\n    return extractedData;\r\n  }\r\n\r\n  public checkIfFieldIsObject(field: IConfigInputField): boolean {\r\n    if (field.type === \"object\") {\r\n      return true;\r\n    }\r\n\r\n    if (field.type === \"array\") {\r\n      if (!field.arrayType || field.arrayType === \"object\") {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  public arrayToCSV(objArray: any) {\r\n    const array =\r\n      typeof objArray !== \"object\" ? JSON.parse(objArray) : objArray;\r\n    let str =\r\n      `${Object.keys(array[0])\r\n        .map((value) => `\"${value}\"`)\r\n        .join(\",\")}` + \"\\r\\n\";\r\n\r\n    return array.reduce((str: any, next: any) => {\r\n      str +=\r\n        `${Object.values(next)\r\n          .map((value) => `\"${value}\"`)\r\n          .join(\",\")}` + \"\\r\\n\";\r\n      return str;\r\n    }, str);\r\n  }\r\n}\r\n\r\nexport const dataHelpers = new DataHelpers();","import { toast } from 'react-toastify';\r\nimport locale from '../common/locale';\r\nimport { TConfigMethod, IQueryParam } from '../common/models/config.model';\r\nimport { dataHelpers } from '../helpers/data.helpers';\r\n\r\nexport type ResponseType = 'json' | 'text' | 'boolean' | 'status';\r\n\r\nexport interface IFetchParams {\r\n  origUrl: string\r\n  method?: TConfigMethod\r\n  headers?: any\r\n  queryParams?: IQueryParam[]\r\n  exactMatch?: boolean\r\n  rawData?: any\r\n  body?: any\r\n  responseType?: ResponseType\r\n}\r\n\r\nclass HttpService {\r\n  public baseUrl: string;\r\n  public loginUrl: string;\r\n  public unauthorizedRedirectUrl: string;\r\n  public errorMessageDataPath: string | string[];\r\n  public requestHeaders: any;\r\n\r\n  constructor(baseUrl: string = '', unauthorizedRedirectUrl: string = '', errorMessageDataPath: string = '', loginUrl: string = '') {\r\n    this.baseUrl = baseUrl || '';\r\n    this.loginUrl = loginUrl || '';\r\n    this.unauthorizedRedirectUrl = unauthorizedRedirectUrl || '';\r\n    this.errorMessageDataPath = errorMessageDataPath || '';\r\n    this.requestHeaders = {};\r\n  }\r\n\r\n  private urlIsAbsolute(url: string) {\r\n    if (url.indexOf('http') === 0 || url.indexOf('https') === 0) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private replaceParamsInUrl(url: string, rawData?: any): string {\r\n    if (!rawData || typeof rawData !== 'object') {\r\n      return url;\r\n    }\r\n\r\n    let outputUrl = url;\r\n\r\n    Object.keys(rawData).forEach((key) => {\r\n      const urlParamName = `:${key}`;\r\n      outputUrl = outputUrl.replace(urlParamName, rawData[key] as string);\r\n    });\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildUrl(url: string, queryParams: IQueryParam[] = [], exactMatch : boolean = false, rawData?: any): string {\r\n    if (!queryParams || !queryParams.length) {\r\n      return this.replaceParamsInUrl(url, rawData);\r\n    }\r\n\r\n    let outputUrl = url;\r\n    const params = [];\r\n    let page = '-1'\r\n    let limit = '10'\r\n\r\n    for (let param of queryParams) {\r\n      let value = '';\r\n      if (!param.name || typeof param.value === 'undefined') { continue; } \r\n      if (param.name === 'page') { page = param.value; continue; }\r\n      if (param.name === 'limit') { limit = param.value; continue; }\r\n      if (param.name === 'tags' && param.value === \"\") { continue; }\r\n      if (param.name === 'info') value = '{\"$regex\":\"' + param.value + '\",\"$options\":\"i\"}';\r\n      else value = '\"' + param.value + '\"';\r\n      \r\n      if(exactMatch === true)\r\n      {\r\n        params.push(`\"${param.name}\":${value || ''}`);\r\n      }\r\n      else\r\n      {\r\n        params.push(`\"${param.name}\":{\"$regex\" : ${value || ''}}`);\r\n      }\r\n      \r\n      \r\n\r\n    }\r\n\r\n    outputUrl += '?filter={' + params.join(',') + '}';\r\n    if(page != '-1') outputUrl += \"&page=\" + page;\r\n    outputUrl += \"&limit=\" + limit;\r\n\r\n    console.log(\"Requested URL : \"+outputUrl);\r\n\r\n    return outputUrl;\r\n  }\r\n\r\n  private buildRequest(params: IFetchParams): { url: string, params: any } {\r\n    const reqUrl: string = this.urlIsAbsolute(params.origUrl) ? params.origUrl : this.baseUrl + params.origUrl;\r\n    const finalUrl: string = this.buildUrl(reqUrl, params.queryParams,params.exactMatch, params.rawData);\r\n    const authorization = localStorage.getItem('diten-token') ? { Authorization: localStorage.getItem('diten-token'), } : {};\r\n    const requestParams = {\r\n      method: params.method ? params.method.toUpperCase() : 'GET',\r\n      headers: Object.assign(authorization, this.requestHeaders, params.headers || {}),\r\n      body: params.method === 'post' || params.method === 'put' || params.method === 'patch' ? params.body : undefined\r\n    };\r\n\r\n    return {\r\n      url: finalUrl,\r\n      params: requestParams\r\n    };\r\n  }\r\n\r\n  private async getErrorMessage(res: Response | any): Promise<string> {\r\n    let errorMessage: string = '';\r\n\r\n    try {\r\n      const body = await res.json();\r\n\r\n      for (const path of this.errorMessageDataPath) {\r\n        const dataAtPath = dataHelpers.extractDataByDataPath(body, path);\r\n\r\n        if (dataAtPath) {\r\n          errorMessage = dataAtPath;\r\n        }\r\n      }\r\n    } catch { } // TODO: proper handling of errors (^.^)\r\n\r\n    return errorMessage && errorMessage.length ?\r\n      errorMessage :\r\n      `${res.status} - ${res.statusText || ''}`;\r\n  }\r\n\r\n  private async handleError(res: Response) {\r\n    // In case response status is \"Unauthorized\", redirect to relevant url\r\n\r\n    if (res.status === 401 && this.unauthorizedRedirectUrl) {\r\n      //test\r\n      \r\n      localStorage.clear();\r\n\r\n      const redirectUrl: string = this.unauthorizedRedirectUrl.replace(':returnUrl', encodeURIComponent(document.location.href));\r\n      document.location.replace(redirectUrl);\r\n      \r\n      return;\r\n    }\r\n    if(res.status === 404)\r\n    {\r\n      document.location.replace(\"#/404\");\r\n    }\r\n\r\n    throw new Error(await this.getErrorMessage(res));\r\n  }\r\n\r\n  private async makeRequest(url: string, params: any = {}, responseType: ResponseType = 'json') {\r\n    const res: Response = await fetch(url, Object.assign({}, params, {}));\r\n\r\n    if (res.ok) {\r\n      switch (responseType) {\r\n        case 'json':\r\n          return await res.json();\r\n        case 'text':\r\n          return await res.text();\r\n        case 'boolean':\r\n          return true;\r\n        default:\r\n          return true;\r\n      }\r\n    }\r\n\r\n    await this.handleError(res);\r\n  }\r\n\r\n  public async fetch({ method, origUrl, queryParams, exactMatch, rawData, body, headers, responseType }: IFetchParams) {\r\n    const { url, params } = this.buildRequest({ method, origUrl, queryParams,exactMatch, rawData, body, headers });\r\n    return await this.makeRequest(url, params, responseType);\r\n  }\r\n}\r\n\r\nexport default HttpService;\r\n","const localization_it = {\r\n  username: \"Nome utente\",\r\n  password: \"Password\",\r\n  tenant: \"Organizzazione\",\r\n  next: \"Successivo\",\r\n  previous: \"Precedente\",\r\n  select: \"\",\r\n  language: \"Lingua\",\r\n  welcome: \"Bentornato\",\r\n  role: \"Ruolo\",\r\n  session_expire_in: \"La sessione scadrà in \",\r\n\r\n  plot: \"Grafico\",\r\n  samples: \"Campioni\",\r\n  zoomIn: \"Ingrandisci\",\r\n  zoomOut: \"Riduci\",\r\n  value: \"Valore\",\r\n  page: \"Pagina\",\r\n  previous_page: \"Pagina precedente\",\r\n  next_page: \"Prossima pagina\",\r\n  showing_result: \"Risultati\",\r\n  out_of: \"di\",\r\n  items: \"totali\",\r\n\r\n  ///Completamento campi\r\n  enter_text: \"Inserisci testo\",\r\n  enter_email: \"Inserisci email\",\r\n  enter_date: \"Inserisci data\",\r\n  enter_color: \"Inserisci colore\",\r\n  enter_password: \"Inserisci password\",\r\n  username_suggestion: \"Inserisci il nome utente\",\r\n  password_suggestion: \"Inserisci la password\",\r\n  tenant_suggestion: \"Inserisci la tua organizzazione\",\r\n  add_tenant: \"Aggiungi organizzazione\",\r\n  id_suggestion: \"Inserisci un ID\",\r\n  dimensions_guide: \"0 scalar / 1 array / 2 matrix\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Benvenuto nel pannello di controllo di Measurify!\",\r\n  left_bar_descr_hp:\r\n    \"Nella barra a sinistra sono presenti i collegamenti alle pagine per le quali possiedi l'autorizzazione.\",\r\n  right_bar_descr_hp:\r\n    \"Nella barra a destra sono presenti le informazioni relative al tuo account e alla scadenza della sessione corrente.\",\r\n  session_expire_info_hp: `Al termine della sessione non sarai espulso automaticamente e potrai continuare a visualizzare la pagina attiva. Ogni azione successiva porterà alla disconnessione.`,\r\n  github_page_hp: \"Pagina Github di Measurify\",\r\n  github_issue_page_hp: \"Segnala bug o problemi\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"Sembra che tu abbia utilizzato un collegamento non funzionante. Se sei arrivato a questa pagina utilizzando le funzioni dell'interfaccia segnala il bug: un team accuratamente selezionato di studenti universitari proverà a risolvere il problema.\",\r\n\r\n  /// Descrizione Pagine\r\n  user_page_description: \"Visualizzazione e gestione degli User\",\r\n  thing_page_description: \"Visualizzazione e gestione delle Thing\",\r\n  feature_page_description: \"Visualizzazione e gestione delle Feature.\",\r\n  device_page_description: \"Visualizzazione e gestione dei Device.\",\r\n  measure_page_description: \"Visualizzazione e gestione delle Measurement.\",\r\n  tag_page_description: \"Visualizzazione e gestione dei Tag.\",\r\n  fieldmask_page_description: \"Visualizzazione e gestione delle Fieldmask.\",\r\n  right_page_description: \"Visualizzazione e gestione dei Right.\",\r\n  issue_page_description: \"Visualizzazione e gestione degli Issue.\",\r\n  constraint_page_description: \"Visualizzazione e gestione dei Constraint.\",\r\n  script_page_description: \"Visualizzazione e gestione degli Script.\",\r\n\r\n  results_for_page: \"Risultati per pagina\",\r\n\r\n  ///Filtra e Seleziona\r\n  filter_tag: \"Filtra Tag\",\r\n  filter_thing: \"Filtra Thing\",\r\n  filter_feature: \"Filtra Feature\",\r\n  filter_device: \"Filtra Device\",\r\n  select_feature: \"Seleziona Feature\",\r\n  select_thing: \"Seleziona Thing\",\r\n  select_device: \"Seleziona Device\",\r\n\r\n  ///Termini legati alle risorse\r\n  no_tag: \"Nessun Tag\",\r\n  no_feature: \"Nessuna Feature\",\r\n  no_script: \"Nessuno Script\",\r\n  no_relation: \"Nessuna Relation\",\r\n  no_item: \"Nessun Item\",\r\n  nothing_to_see: \"Nessun risultato\",\r\n  full_privileges: \"Privilegi completi\",\r\n\r\n  ///Azioni\r\n  expand_and_edit: \"Espandi e Modifica\",\r\n  clone_and_edit: \"Clona e Modifica\",\r\n  expand: \"Espandi\",\r\n  add: \"Aggiungi\",\r\n  update: \"Aggiorna\",\r\n  submit: \"Invio\",\r\n  close: \"Chiudi\",\r\n  search: \"Cerca\",\r\n  login: \"Accedi\",\r\n  logout: \"Esci\",\r\n  scroll_to_top: \"Torna a inizio pagina\",\r\n\r\n  ///Errori\r\n  wrong_feature_error:\r\n    \"Questa versione del software non può costruire un grafico delle feature selezionate. Possono essere mostrati i grafici solamente di feature aventi almeno una componente scalare e numerica\",\r\n  no_data_error: \"Non sono presenti dati per poter elaborare un grafico\",\r\n  login_error: \"Login errata!\",\r\n  unauthorised_user: \"Non sei abilitato a utilizzare questa pagina\",\r\n  session_expired: \"Sessione scaduta\",\r\n};\r\n\r\nexport default localization_it;\r\n","const localization_en = {\r\n  username: \"Username\",\r\n  password: \"Password\",\r\n  tenant: \"Tenant\",\r\n  next: \"Next\",\r\n  previous: \"Previous\",\r\n  select: \"\",\r\n  language: \"Language\",\r\n  welcome: \"Welcome back\",\r\n  role: \"Role\",\r\n  session_expire_in: \"Session will expire in \",\r\n\r\n  plot: \"Plot\",\r\n  samples: \"Samples\",\r\n  zoomIn: \"Zoom In\",\r\n  zoomOut: \"Zoom Out\",\r\n  value: \"Value\",\r\n  page: \"Page\",\r\n  previous_page: \"Previous Page\",\r\n  next_page: \"Next Page\",\r\n  showing_result: \"Results\",\r\n  out_of: \"out of\",\r\n  items: \"items\",\r\n\r\n  enter_text: \"Insert Text\",\r\n  enter_email: \"Insert email\",\r\n  enter_date: \"Insert date\",\r\n  enter_color: \"Insert color\",\r\n  enter_password: \"Insert password\",\r\n  username_suggestion: \"Insert your username\",\r\n  password_suggestion: \"Insert your password\",\r\n  tenant_suggestion: \"Insert your tenant\",\r\n  add_tenant: \"Add tenant\",\r\n  id_suggestion: \"Insert an ID\",\r\n  dimensions_guide: \"0 scalar / 1 array / 2 matrix\",\r\n\r\n  //Homepage\r\n  welcome_hp: \"Welcome to Measurify dashboard!\",\r\n  left_bar_descr_hp:\r\n    \"The left bar contains all the links for the pages you are allowed to navigate to\",\r\n  right_bar_descr_hp:\r\n    \"The right bar contains the information about your account and the expiration of the current session.\",\r\n  session_expire_info_hp:\r\n    \"When this session will expire you will not be logged-out instantly, you will still be able to watch the active page. Each action on this or another page will force your log-out.\",\r\n  github_page_hp: \"Measurify Github page\",\r\n  github_issue_page_hp: \"Report bugs or issues\",\r\n\r\n  //404\r\n  oh_no: \"Oh No!\",\r\n  broken_link:\r\n    \"It looks like you used a broken link. If you arrived at this page using the interface features report the bug: a carefully selected team of college students will try to fix it.\",\r\n\r\n  user_page_description: \"Visualization and Management of Users\",\r\n  thing_page_description: \"Visualization and Management of Things\",\r\n  feature_page_description: \"Visualization and Management of Features.\",\r\n  device_page_description: \"Visualization and Management of Devices.\",\r\n  measure_page_description: \"Visualization and Management of Measurements.\",\r\n  tag_page_description: \"Visualization and Management of Tags.\",\r\n  fieldmask_page_description: \"Visualization and Management of Fieldmasks.\",\r\n  right_page_description: \"Visualization and Management of Rights.\",\r\n  issue_page_description: \"Visualization and Management of Issues.\",\r\n  constraint_page_description: \"Visualization and Management of Constraints.\",\r\n  script_page_description: \"Visualization and Management of Scripts.\",\r\n\r\n  results_for_page: \"Results each page\",\r\n\r\n  ///Filter and select\r\n  filter_tag: \"Filter Tags\",\r\n  filter_thing: \"Filter Things\",\r\n  filter_feature: \"Filter Features\",\r\n  filter_device: \"Filter Devices\",\r\n  select_feature: \"Select Features\",\r\n  select_thing: \"Select Things\",\r\n  select_device: \"Select Devices\",\r\n\r\n  ///Words related to resources\r\n  no_tag: \"No Tags\",\r\n  no_feature: \"No Features\",\r\n  no_script: \"No Scripts\",\r\n  no_relation: \"No Relations\",\r\n  no_item: \"No Items\",\r\n  nothing_to_see: \"No results\",\r\n  full_privileges: \"Full privileges\",\r\n\r\n  ///Actions\r\n  expand_and_edit: \"Expand and Edit\",\r\n  clone_and_edit: \"Clone and Edit\",\r\n  expand: \"Expand\",\r\n  add: \"Add\",\r\n  update: \"Update\",\r\n  submit: \"Submit\",\r\n  close: \"Close\",\r\n  search: \"Search\",\r\n  login: \"Login\",\r\n  logout: \"Logout\",\r\n  scroll_to_top: \"Scroll to top\",\r\n\r\n  ///Errors\r\n  wrong_feature_error:\r\n    \"This software cannot build plot with the selected feature. Only features with scalar and numeric components can be plotted\",\r\n  no_data_error: \"Not enough data to build a plot\",\r\n  login_error: \"Wrong login!\",\r\n  unauthorised_user: \"You are not allowed to use this page\",\r\n  session_expired: \"Session expired\",\r\n};\r\n\r\nexport default localization_en;\r\n","import localization_it from \"./localizations/localization_it\"\r\nimport localization_en from \"./localizations/localization_en\"\r\n\r\n\r\n\r\ninterface ILocalization {\r\n    username: string;\r\n    password: string;\r\n    tenant: string;\r\n    next :string;\r\n    previous :string;\r\n    select : string;\r\n    language: string;\r\n    welcome: string;\r\n    role : string;\r\n    session_expire_in: string;\r\n    \r\n    plot : string;\r\n    samples: string;\r\n    zoomIn : string;\r\n    zoomOut : string;\r\n    value : string;\r\n    page:string;\r\n    previous_page:string;\r\n    next_page:string;\r\n    showing_result:string;\r\n    out_of: string;\r\n    items: string;\r\n    \r\n    ///Fields \r\n    enter_text: string;\r\n    enter_email: string;\r\n    enter_date: string;\r\n    enter_color: string;\r\n    enter_password: string;\r\n    username_suggestion:string;\r\n    password_suggestion: string;\r\n    tenant_suggestion: string;\r\n    add_tenant : string;\r\n    id_suggestion: string;\r\n    dimensions_guide: string;\r\n\r\n\r\n\r\n    /// Page descriptions\r\n    user_page_description : string;\r\n    thing_page_description: string;\r\n    feature_page_description:string;\r\n    device_page_description: string;\r\n    measure_page_description:string;\r\n    tag_page_description:string;\r\n    fieldmask_page_description: string;\r\n    right_page_description:string;\r\n    issue_page_description:string;\r\n    constraint_page_description:string;\r\n    script_page_description:string;\r\n\r\n    results_for_page: string;\r\n\r\n    //homepage\r\n    welcome_hp: string;\r\n    left_bar_descr_hp :string;\r\n    right_bar_descr_hp :string;\r\n    session_expire_info_hp: string;\r\n    github_page_hp :string;\r\n    github_issue_page_hp: string;\r\n\r\n    //404\r\n    oh_no: string;\r\n    broken_link: string;\r\n\r\n    ///Filter and Select\r\n    filter_tag: string;\r\n    filter_thing: string;\r\n    filter_feature: string;\r\n    filter_device:string;\r\n    select_feature: string;\r\n    select_thing: string;\r\n    select_device: string;\r\n\r\n    ///Resources words\r\n    no_tag: string;\r\n    no_feature: string;\r\n    no_script: string;\r\n    no_relation: string;\r\n    no_item: string;\r\n    nothing_to_see: string;\r\n    full_privileges : string;\r\n\r\n    ///Actions\r\n    expand_and_edit: string;\r\n    clone_and_edit: string;\r\n    expand:string;\r\n    add : string;\r\n    update : string;\r\n    submit:string;\r\n    close:string;\r\n    search:string;\r\n    login : string;\r\n    logout : string;\r\n    scroll_to_top: string;\r\n\r\n    ///Errors\r\n    wrong_feature_error : string;\r\n    no_data_error : string;\r\n    login_error: string;\r\n    unauthorised_user :string;\r\n    session_expired : string;    \r\n}\r\n\r\nexport default function locale(){\r\n\r\n    const tkn = localStorage.getItem(\"diten-language\");\r\n    let localization : ILocalization;\r\n\r\n    //check token first\r\n    if(tkn ===\"it\")\r\n    {\r\n        return localization_it as ILocalization;\r\n    }\r\n\r\n    if(tkn ===\"en\")\r\n    {\r\n        return localization_en as ILocalization\r\n    }\r\n\r\n    //then check language from browser\r\n    if(navigator.language.substring(0, 2) === \"it\")\r\n    {\r\n        return localization_it as ILocalization;\r\n    }\r\n\r\n    if(navigator.language.substring(0, 2) ===\"en\")\r\n    {\r\n        return localization_en as ILocalization\r\n    }\r\n\r\n\r\n    //if the token found or language is not valid -> default language: english\r\n    return localization_en as ILocalization;\r\n};","import HTTPService from './http.service';\r\nimport { IConfig } from '../common/models/config.model';\r\nimport Ajv from 'ajv';\r\nimport locale from \"../common/locale\";\r\n\r\nconst httpService: HTTPService = new HTTPService();\r\n\r\nclass ConfigService extends HTTPService {\r\n\r\n  public async getRemoteConfig(url: string) {\r\n    if (url.endsWith('.js')) {\r\n      \r\n      return (await import(/* webpackIgnore: true */url)).configurator(locale);\r\n    }\r\n    return await httpService.fetch({\r\n      origUrl: url,\r\n    });\r\n  }\r\n\r\n  public async loadDefaultConfig() { return (await this.getRemoteConfig('../../config.js')); }\r\n\r\n  public validateConfig(config: IConfig | null): { isValid: boolean, errorMessage: string | null } {\r\n    if (config === null) {\r\n      return {\r\n        isValid: true,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const configSchema = require('../assets/schemas/config.schema.json');\r\n    const ajv = new Ajv({\r\n      allErrors: true,\r\n      verbose: true,\r\n    });\r\n    const validate = ajv.compile(configSchema);\r\n    const isValid = validate(config);\r\n    if (typeof isValid !== 'boolean') {\r\n      throw new Error('Unexpected asynchronous JSON validation');\r\n    }\r\n    if (isValid) {\r\n      return {\r\n        isValid,\r\n        errorMessage: null,\r\n      }\r\n    }\r\n    const firstError = validate.errors ? validate.errors[0] : undefined;\r\n    let errorMessage: string | null = null;\r\n    if (firstError?.message && firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\": ${firstError.message}`\r\n    } else if (firstError?.message) {\r\n      errorMessage = `Error parsing configuration: ${firstError.message}`\r\n    } else if (firstError?.dataPath) {\r\n      errorMessage = `Error parsing configuration at \"${firstError.dataPath}\"`\r\n    } else {\r\n      errorMessage = `Error parsing configuration`;\r\n    }\r\n    console.error(errorMessage);\r\n    console.error('All configuration errors: ', validate.errors);\r\n    return {\r\n      isValid,\r\n      errorMessage,\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport default new ConfigService();\r\n","import React from 'react';\r\nimport { IConfig, IConfigPage } from '../common/models/config.model';\r\nimport HttpService from '../services/http.service';\r\n\r\nexport interface IAppContext {\r\n  config: IConfig | null\r\n  activePage: IConfigPage | null\r\n  error: string | null\r\n  setError: (error: string | null) => void\r\n  setActivePage: (activePage: IConfigPage | null) => void\r\n  httpService: HttpService\r\n}\r\n\r\nexport const AppContext = React.createContext<IAppContext>({\r\n  config: null,\r\n  activePage: null,\r\n  error: null,\r\n  setError: () => {},\r\n  setActivePage: () => {},\r\n  httpService: new HttpService()\r\n});","import React from 'react';\r\nimport { AppContext } from '../app.context';\r\n\r\nexport const withAppContext = (Component: any) => {\r\n  return (props: any) => (\r\n    <AppContext.Consumer>    \r\n      {(context) => {\r\n        return <Component {...props} context={context} />\r\n      }}\r\n    </AppContext.Consumer>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport './loader.scss';\r\n\r\nexport const Loader = () => {\r\n  return (\r\n    <div className=\"app-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","class PaginationHelpers {\r\n  public hasPreviousPage(page: string | number | undefined): boolean {\r\n    if (page === undefined) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof page === 'string') {\r\n      return parseInt(page) > 1;\r\n    }\r\n\r\n    return page > 1;\r\n  }\r\n\r\n  public hasNextPage(_page: string | number, _itemsPerPage: string | number, _total: string | number | undefined): boolean {\r\n    if (_total === undefined) {\r\n      return true;\r\n    }\r\n    const page = typeof _page === 'string' ? parseInt(_page) : _page;\r\n    const itemsPerPage = typeof _itemsPerPage === 'string' ? parseInt(_itemsPerPage) : _itemsPerPage;\r\n    const total = typeof _total === 'string' ? parseInt(_total) : _total;\r\n\r\n    return page * itemsPerPage < total;\r\n  }\r\n}\r\n\r\nexport const paginationHelpers = new PaginationHelpers();","import React from \"react\";\r\n\r\nimport \"./button.scss\";\r\n\r\ninterface IProps {\r\n  children: any;\r\n  type?: \"submit\" | \"button\" | \"reset\";\r\n  title?: string;\r\n  className?: string;\r\n  onClick?: (e: any) => void;\r\n  outlined?: \"outlined\" | \"unlined\";\r\n  color?: \"gray\" | \"darkBlue\" | \"blue\" | \"green\" | \"red\";\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const Button = (props: IProps) => {\r\n  return (\r\n    <button\r\n      {...props}\r\n      className={`button ${props.className || \"\"} ${\r\n        props.outlined || \"unlined\"\r\n      } ${props.color || \"\"}`}\r\n    >\r\n      {props.children}\r\n    </button>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\nimport './infiniteLoader.scss';\r\n\r\nexport const InfiniteLoader = () => {\r\n  return (\r\n    <div className=\"app-infinite-loader cp-spinner cp-balls small\"></div>\r\n  );\r\n};","import React from \"react\";\r\nimport { ICustomLabels } from \"../../common/models/config.model\";\r\nimport { IPaginationState } from \"../../common/models/states.model\";\r\nimport { Button } from \"../button/button.comp\";\r\n\r\nimport \"./pagination.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faArrowLeft, faArrowRight } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faArrowRight, faArrowLeft);\r\n\r\ninterface IProps {\r\n  pagination: IPaginationState;\r\n  callbacks: {\r\n    previousPage: () => void;\r\n    nextPage: () => void;\r\n  };\r\n  customLabels?: ICustomLabels;\r\n}\r\n\r\nexport const Pagination = ({ callbacks, pagination, customLabels }: IProps) => {\r\n  const previousTitle =\r\n    customLabels?.pagination?.previousPageTitle || \"Previous page\";\r\n  const nextTitle = customLabels?.pagination?.nextPageTitle || \"Next page\";\r\n  return (\r\n    <div className=\"pagination-wrapper\">\r\n      <Button\r\n        disabled={!pagination.hasPreviousPage}\r\n        onClick={() => callbacks.previousPage()}\r\n        title={previousTitle}\r\n      >\r\n        <i className=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>\r\n      </Button>\r\n      <Button\r\n        disabled={!pagination.hasNextPage}\r\n        onClick={() => callbacks.nextPage()}\r\n        title={nextTitle}\r\n      >\r\n        <i className=\"fa fa-arrow-right\" aria-hidden=\"true\"></i>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\n\r\nimport {\r\n  IConfigDisplayField,\r\n  IConfigCustomAction,\r\n  ICustomLabels,\r\n} from \"../../common/models/config.model\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { InfiniteLoader } from \"../infiniteLoader/infiniteLoader.comp\";\r\nimport { IPaginationState } from \"../../common/models/states.model\";\r\nimport { Pagination } from \"../pagination/pagination.comp\";\r\n\r\nimport \"./table.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faEdit, faTimes, faCogs } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faEdit, faTimes, faCogs);\r\n\r\ninterface IProps {\r\n  items: any[];\r\n  pagination?: IPaginationState;\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null;\r\n    put: ((item: any) => void) | null;\r\n    action: (item: any, action: IConfigCustomAction) => void;\r\n    getPreviousPage: (() => void) | null;\r\n    getNextPage: (() => void) | null;\r\n  };\r\n  fields: IConfigDisplayField[];\r\n  customActions?: IConfigCustomAction[];\r\n  customLabels?: ICustomLabels;\r\n}\r\n\r\nexport const Table = ({\r\n  items,\r\n  fields,\r\n  pagination,\r\n  callbacks,\r\n  customActions,\r\n  customLabels,\r\n}: IProps) => {\r\n  const editLabel = customLabels?.buttons?.editItem || \"Edit\";\r\n  const deleteLabel = customLabels?.buttons?.deleteItem || \"Delete\";\r\n  const actionColumnHeader =\r\n    customLabels?.tableColumnHeaders?.actions || \"Actions\";\r\n  const paginationCallbacks = {\r\n    nextPage:\r\n      callbacks.getNextPage ||\r\n      (() => {\r\n        return;\r\n      }),\r\n    previousPage:\r\n      callbacks.getPreviousPage ||\r\n      (() => {\r\n        return;\r\n      }),\r\n  };\r\n\r\n  function renderTableCell(\r\n    origField: IConfigDisplayField,\r\n    origItem: any,\r\n    value: any\r\n  ) {\r\n    if (origField.type === \"boolean\") {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === \"object\") {\r\n      return \"object\";\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case \"text\":\r\n        return <span>{value}</span>;\r\n      case \"boolean\":\r\n        return <div className={`bool ${value ? \"true\" : \"false\"}`}></div>;\r\n      case \"image\":\r\n        return (\r\n          <img\r\n            src={value || \"\"}\r\n            alt={value || origField.label || origField.name}\r\n          />\r\n        );\r\n      case \"url\":\r\n        let url: string = origField.url || value || \"\";\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(\r\n            origItem,\r\n            field.dataPath,\r\n            field.name\r\n          );\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return (\r\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {origField.urlLabel || value}\r\n          </a>\r\n        );\r\n      case \"colorbox\":\r\n        return (\r\n          <div className=\"colorbox\" style={{ backgroundColor: value }}></div>\r\n        );\r\n      case \"html\":\r\n        const htmlCode = origField.htmlCode || \"<span>{value}</span>\";\r\n        const html = htmlCode.replace(\"{value}\", value);\r\n        return <div dangerouslySetInnerHTML={{ __html: html }}></div>;\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderTableRow(item: any, rowIdx: number) {\r\n    return (\r\n      <tr key={`tr_${rowIdx}`}>\r\n        {fields.map((field, fieldIdx) => {\r\n          const value = dataHelpers.extractDataByDataPath(\r\n            item,\r\n            field.dataPath,\r\n            field.name\r\n          );\r\n          return (\r\n            <td\r\n              className={field.truncate ? \"truncate\" : \"\"}\r\n              key={`td_${rowIdx}_${fieldIdx}`}\r\n            >\r\n              {renderTableCell(field, item, value)}\r\n            </td>\r\n          );\r\n        })}\r\n        <td>\r\n          <div className=\"actions-wrapper\">\r\n            {callbacks.put && (\r\n              <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n                <i className=\"fa fa-edit\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            )}\r\n            {customActions &&\r\n              customActions.length > 0 &&\r\n              customActions.map((action, idx) => (\r\n                <Button\r\n                  key={`action_${rowIdx}_${idx}`}\r\n                  onClick={() => callbacks.action(item, action)}\r\n                  title={action.name}\r\n                >\r\n                  <i\r\n                    className={`fa fa-${action.icon || \"cogs\"}`}\r\n                    aria-hidden=\"true\"\r\n                  ></i>\r\n                </Button>\r\n              ))}\r\n            {callbacks.delete && (\r\n              <Button\r\n                onClick={() => callbacks.delete?.(item)}\r\n                title={deleteLabel}\r\n              >\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  function renderTableContent() {\r\n    return (\r\n      <table className=\"pure-table\">\r\n        <thead>\r\n          <tr>\r\n            {fields.map((field) => {\r\n              return (\r\n                <th key={`th_${field.name}`}>{field.label || field.name}</th>\r\n              );\r\n            })}\r\n            <th>{actionColumnHeader}</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>{items.map(renderTableRow)}</tbody>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === \"infinite-scroll\" &&\r\n      document.body.clientHeight <= window.innerHeight &&\r\n      pagination?.hasNextPage\r\n    ) {\r\n      paginationCallbacks.nextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === \"infinite-scroll\") {\r\n    return (\r\n      <InfiniteScroll\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={<InfiniteLoader />}\r\n      >\r\n        {renderTableContent()}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"table-wrapper\">\r\n      {renderTableContent()}\r\n      {pagination && pagination.type === \"buttons\" && (\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n          customLabels={customLabels}\r\n        ></Pagination>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\nimport {\r\n  IConfigDisplayField,\r\n  IConfigCustomAction,\r\n  ICustomLabels,\r\n} from \"../../common/models/config.model\";\r\nimport { IPaginationState } from \"../../common/models/states.model\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Pagination } from \"../pagination/pagination.comp\";\r\n\r\nimport \"./cards.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faEdit, faTimes, faCogs } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faEdit, faTimes, faCogs);\r\n\r\ninterface IProps {\r\n  items: any[];\r\n  pagination?: IPaginationState;\r\n  callbacks: {\r\n    delete: ((item: any) => void) | null;\r\n    put: ((item: any) => void) | null;\r\n    action: (item: any, action: IConfigCustomAction) => void;\r\n    getNextPage: (() => void) | null;\r\n    getPreviousPage: (() => void) | null;\r\n  };\r\n  fields: IConfigDisplayField[];\r\n  customActions?: IConfigCustomAction[];\r\n  customLabels?: ICustomLabels;\r\n}\r\n\r\nexport const Cards = ({\r\n  items,\r\n  fields,\r\n  callbacks,\r\n  customActions,\r\n  customLabels,\r\n  pagination,\r\n}: IProps) => {\r\n  const editLabel: string = customLabels?.buttons?.editItem || \"Edit\";\r\n  const deleteLabel: string = customLabels?.buttons?.deleteItem || \"Delete\";\r\n  const paginationCallbacks = {\r\n    nextPage:\r\n      callbacks.getNextPage ||\r\n      (() => {\r\n        return;\r\n      }),\r\n    previousPage:\r\n      callbacks.getPreviousPage ||\r\n      (() => {\r\n        return;\r\n      }),\r\n  };\r\n\r\n  function renderRow(\r\n    origField: IConfigDisplayField,\r\n    origItem: any,\r\n    value: any\r\n  ) {\r\n    if (origField.type === \"boolean\") {\r\n      value = value ? true : false;\r\n    }\r\n\r\n    if (value && typeof value === \"object\") {\r\n      return \"object\";\r\n    }\r\n\r\n    switch (origField.type) {\r\n      case \"text\":\r\n        return <span>{value}</span>;\r\n      case \"boolean\":\r\n        return <div className={`bool ${value ? \"true\" : \"false\"}`}></div>;\r\n      case \"image\":\r\n        if (!value) {\r\n          return <React.Fragment></React.Fragment>;\r\n        }\r\n        return (\r\n          <img\r\n            src={value || \"\"}\r\n            alt={value || origField.label || origField.name}\r\n          />\r\n        );\r\n      case \"url\":\r\n        let url: string = origField.url || value || \"\";\r\n\r\n        // Replace all url vars\r\n        fields.forEach((field) => {\r\n          const fieldValue = dataHelpers.extractDataByDataPath(\r\n            origItem,\r\n            field.dataPath,\r\n            field.name\r\n          );\r\n          url = url.replace(`:${field.name}`, fieldValue);\r\n        });\r\n\r\n        return (\r\n          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {origField.urlLabel || value}\r\n          </a>\r\n        );\r\n      case \"colorbox\":\r\n        return (\r\n          <div className=\"colorbox\" style={{ backgroundColor: value }}></div>\r\n        );\r\n      case \"html\":\r\n        const htmlCode = origField.htmlCode || \"<span>{value}</span>\";\r\n        const html = htmlCode.replace(\"{value}\", value);\r\n        return <div dangerouslySetInnerHTML={{ __html: html }}></div>;\r\n      default:\r\n        return value;\r\n    }\r\n  }\r\n\r\n  function renderActions(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"actions-wrapper\">\r\n        {callbacks.put && (\r\n          <Button onClick={() => callbacks.put?.(item)} title={editLabel}>\r\n            <i className=\"fa fa-edit\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        )}\r\n        {customActions &&\r\n          customActions.length > 0 &&\r\n          customActions.map((action, idx) => (\r\n            <Button\r\n              key={`action_${cardIdx}_${idx}`}\r\n              onClick={() => callbacks.action(item, action)}\r\n              title={action.name}\r\n            >\r\n              <i\r\n                className={`fa fa-${action.icon || \"cogs\"}`}\r\n                aria-hidden=\"true\"\r\n              ></i>\r\n            </Button>\r\n          ))}\r\n        {callbacks.delete && (\r\n          <Button onClick={() => callbacks.delete?.(item)} title={deleteLabel}>\r\n            <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCard(item: any, cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {fields.map((field, fieldIdx) => {\r\n          const value = dataHelpers.extractDataByDataPath(\r\n            item,\r\n            field.dataPath,\r\n            field.name\r\n          );\r\n          return (\r\n            <div\r\n              className={`card-row ${field.type}`}\r\n              key={`card_${cardIdx}_${fieldIdx}`}\r\n            >\r\n              {field.type !== \"image\" && (\r\n                <label>{field.label || field.name}: </label>\r\n              )}\r\n              {renderRow(field, item, value)}\r\n            </div>\r\n          );\r\n        })}\r\n        {renderActions(item, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderCardSkeleton(cardIdx: number) {\r\n    return (\r\n      <div className=\"card\" key={`card_${cardIdx}`}>\r\n        {fields.map((field, fieldIdx) => {\r\n          return (\r\n            <div\r\n              className={`card-row ${field.type}`}\r\n              key={`card_${cardIdx}_${fieldIdx}`}\r\n            >\r\n              {field.type !== \"image\" && (\r\n                <label>{field.label || field.name}: </label>\r\n              )}\r\n              <Skeleton duration={0.6} />\r\n            </div>\r\n          );\r\n        })}\r\n        {renderActions({}, cardIdx)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function renderSkeletons() {\r\n    const startingIndex = items.length;\r\n    const skeletonsIndexes = Array.from(Array(pagination?.limit).keys()).map(\r\n      (value) => value + startingIndex\r\n    );\r\n    return skeletonsIndexes.map(renderCardSkeleton);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pagination?.type === \"infinite-scroll\" &&\r\n      document.body.clientHeight <= window.innerHeight &&\r\n      callbacks.getNextPage &&\r\n      pagination?.hasNextPage\r\n    ) {\r\n      callbacks.getNextPage();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  if (pagination?.type === \"infinite-scroll\") {\r\n    return (\r\n      <InfiniteScroll\r\n        className=\"cards-wrapper\"\r\n        dataLength={items.length}\r\n        next={callbacks.getNextPage || (() => null)}\r\n        hasMore={pagination?.hasNextPage || false}\r\n        loader={renderSkeletons()}\r\n      >\r\n        {items.map(renderCard)}\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"cards-wrapper\">{items.map(renderCard)}</div>\r\n      {pagination && pagination.type === \"buttons\" && (\r\n        <Pagination\r\n          callbacks={paginationCallbacks}\r\n          pagination={pagination}\r\n        ></Pagination>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigOptionSource,\r\n  ICustomLabels,\r\n} from \"../../common/models/config.model\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./formRow.scss\";\r\nimport { stringify } from \"query-string\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faPlus } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faPlus);\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IOption {\r\n  display: string;\r\n  value: string;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  field: IConfigInputField;\r\n  loadedFields: ILoadedFields[];\r\n  onChange: (\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) => void;\r\n  onRemove: (fieldName: string, value: any) => void;\r\n  showReset?: boolean;\r\n  direction?: \"row\" | \"column\";\r\n}\r\n\r\nexport const FormRow = withAppContext(\r\n  ({\r\n    context,\r\n    field,\r\n    loadedFields,\r\n    direction,\r\n    showReset,\r\n    onChange,\r\n    onRemove,\r\n  }: IProps) => {\r\n    const [optionSources, setOptionSources] = useState<any>({});\r\n    const [loadedOptionSources, setLoadedOptionSources] = useState<any>();\r\n    const { httpService, activePage, config } = context;\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n    const addArrayItemLabel = customLabels?.buttons?.addArrayItem || \"Add Item\";\r\n    const clearLabel = customLabels?.buttons?.clearInput || \"Clear\";\r\n\r\n    function insertPreloadedData(\r\n      fieldName: string,\r\n      optionSource: IConfigOptionSource\r\n    ) {\r\n      let optionsData = Array<string>(0).fill(\"\");\r\n\r\n      loadedFields.map((e) => {\r\n        if (e.fieldName === optionSource.name) optionsData = e.values;\r\n      });\r\n\r\n      let optionDisplay = new Array<IOption>(optionsData.length);\r\n      optionsData.map((opt: string, i: number) => {\r\n        optionDisplay[i] = { display: opt, value: opt };\r\n      });\r\n\r\n      return { fieldname: fieldName, options: optionDisplay };\r\n    }\r\n    async function loadOptionSourceFromRemote(\r\n      fieldName: string,\r\n      optionSource: IConfigOptionSource\r\n    ) {\r\n      try {\r\n        const {\r\n          url,\r\n          dataPath,\r\n          preLoad,\r\n          actualMethod,\r\n          requestHeaders,\r\n        } = optionSource;\r\n\r\n        if (!url && !preLoad) {\r\n          /* throw new Error(\r\n            `URL option source (for field \"${fieldName}\") is empty.`\r\n          );*/\r\n        }\r\n\r\n        const result = await httpService.fetch({\r\n          method: actualMethod || \"get\",\r\n          origUrl: url,\r\n          queryParams: [],\r\n          headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        });\r\n\r\n        const extractedData = dataHelpers.extractDataByDataPath(\r\n          result,\r\n          dataPath\r\n        );\r\n\r\n        if (!extractedData || !extractedData.length) {\r\n          /*throw new Error(\r\n            `Option source data is empty (for field \"${fieldName}\")`\r\n          );*/\r\n        }\r\n\r\n        // Map option source to fields\r\n        const optionSourceData = extractedData.map(\r\n          (option: any, idx: number) => {\r\n            const { valuePath, displayPath } = optionSource;\r\n\r\n            if (typeof option === \"string\") {\r\n              return option;\r\n            }\r\n\r\n            return {\r\n              display:\r\n                displayPath && option[displayPath]\r\n                  ? option[displayPath]\r\n                  : `Option ${idx + 1}`,\r\n              value:\r\n                valuePath && option[valuePath] ? option[valuePath] : `${idx}`,\r\n            };\r\n          }\r\n        );\r\n\r\n        setOptionSources({\r\n          ...optionSources,\r\n          [fieldName]: optionSourceData,\r\n        });\r\n      } catch (e) {\r\n        toast.error(e.message, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n      }\r\n    }\r\n\r\n    function addItemToFieldArray(e: any, originalField: IConfigInputField) {\r\n      e.preventDefault();\r\n\r\n      onChange(field.name, [...(originalField.value || []), \"\"]);\r\n    }\r\n\r\n    function removeItemToFieldArray(\r\n      originalField: IConfigInputField,\r\n      idx: number\r\n    ) {\r\n      const updatedArray = [...(originalField.value || [])];\r\n\r\n      const test = updatedArray.splice(idx, 1);\r\n\r\n      test.forEach((e) => {\r\n        onRemove(field.name, e);\r\n      });\r\n\r\n      onChange(field.name, updatedArray);\r\n    }\r\n\r\n    function renderArrayItems(originalField: IConfigInputField) {\r\n      const array: any[] = originalField.value || [];\r\n\r\n      return (\r\n        <div className=\"array-form\">\r\n          {array.map((item, itemIdx) => {\r\n            const inputField = renderFieldInput(\r\n              {\r\n                value: item,\r\n                name: `${originalField.name}.${itemIdx}`,\r\n              } as IConfigInputField,\r\n              (fieldName, value) => {\r\n                const updatedArray = (originalField.value || []).map(\r\n                  (localValue: any, idx: number) => {\r\n                    if (idx === itemIdx) {\r\n                      return value;\r\n                    }\r\n                    return localValue;\r\n                  }\r\n                );\r\n\r\n                onChange(originalField.name, updatedArray);\r\n              }\r\n            );\r\n\r\n            return (\r\n              <div className=\"array-form-item\" key={`array_form_${itemIdx}`}>\r\n                {inputField}\r\n                <i\r\n                  title={clearLabel}\r\n                  onClick={() => removeItemToFieldArray(originalField, itemIdx)}\r\n                  aria-label=\"Remove\"\r\n                  className=\"clear-input fa fa-times\"\r\n                ></i>\r\n              </div>\r\n            );\r\n          })}\r\n          <Button\r\n            className=\"add-array-item\"\r\n            onClick={(e) => addItemToFieldArray(e, originalField)}\r\n            title={addArrayItemLabel}\r\n            disabled={originalField.disabled || originalField.readonly}\r\n          >\r\n            <i className=\"fa fa-plus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    function renderFieldInput(\r\n      field: IConfigInputField,\r\n      changeCallback: (\r\n        fieldName: string,\r\n        value: any,\r\n        submitAfterChange?: boolean\r\n      ) => void\r\n    ) {\r\n      const inputProps = (defaultPlaceholder: string = \"\") => {\r\n        return {\r\n          value: field.value,\r\n          placeholder: field.placeholder || defaultPlaceholder,\r\n          disabled: field.readonly || field.disabled,\r\n          required: field.required,\r\n          onChange: (e: any) => changeCallback(field.name, e.target.value),\r\n        };\r\n      };\r\n\r\n      switch (field.type) {\r\n        case \"boolean\":\r\n          return (\r\n            <input\r\n              type=\"checkbox\"\r\n              {...inputProps()}\r\n              checked={field.value}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.checked, true)\r\n              }\r\n            />\r\n          );\r\n        case \"select\": {\r\n          const { optionSource } = field;\r\n\r\n          if (optionSource && optionSource.preLoad) {\r\n            const loadedOption = insertPreloadedData(field.name, optionSource);\r\n\r\n            return (\r\n              <select {...inputProps()}>\r\n                <option>{locale().select}</option>\r\n                {loadedOption.options.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  return (\r\n                    <option key={`${key}_${option.value}`} value={option.value}>\r\n                      {option.display || option.value}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            );\r\n          } else {\r\n            if (optionSource && !optionSources[field.name]) {\r\n              loadOptionSourceFromRemote(field.name, optionSource);\r\n              return (\r\n                <select {...inputProps()}>\r\n                  <option>-- Loading Options... --</option>\r\n                </select>\r\n              );\r\n            }\r\n\r\n            const sortBy = field.optionSource?.sortBy;\r\n            const finalOptions: { value: string; display: string }[] =\r\n              optionSources[field.name] || field.options || [];\r\n            const sortedOptions = orderBy(\r\n              finalOptions,\r\n              typeof sortBy === \"string\" ? [sortBy] : sortBy || []\r\n            );\r\n\r\n            return (\r\n              <select {...inputProps()}>\r\n                <option>{locale().select}</option>\r\n                {sortedOptions.map((option, idx) => {\r\n                  const key = `option_${idx}_`;\r\n                  if (typeof option !== \"object\") {\r\n                    return (\r\n                      <option key={`${key}_${option}`} value={option}>\r\n                        {option}\r\n                      </option>\r\n                    );\r\n                  }\r\n                  return (\r\n                    <option key={`${key}_${option.value}`} value={option.value}>\r\n                      {option.display || option.value}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            );\r\n          }\r\n        }\r\n        case \"object\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.object || \"Enter JSON...\"\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"array\": {\r\n          const { arrayType, value } = field;\r\n          if (!value || !arrayType || arrayType === \"object\") {\r\n            return (\r\n              <textarea\r\n                {...inputProps(\r\n                  customLabels?.placeholders?.array || \"Enter JSON array...\"\r\n                )}\r\n              ></textarea>\r\n            );\r\n          }\r\n          return renderArrayItems(field);\r\n        }\r\n        case \"long-text\":\r\n          return (\r\n            <textarea\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale().enter_text\r\n              )}\r\n            ></textarea>\r\n          );\r\n        case \"number\":\r\n        case \"integer\":\r\n          return (\r\n            <input\r\n              type=\"number\"\r\n              {...inputProps(customLabels?.placeholders?.number || \"0\")}\r\n              onChange={(e) =>\r\n                changeCallback(field.name, e.target.valueAsNumber)\r\n              }\r\n            />\r\n          );\r\n        case \"color\":\r\n          return (\r\n            <input\r\n              type=\"color\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.color || locale().enter_color\r\n              )}\r\n            />\r\n          );\r\n        case \"email\":\r\n          return (\r\n            <input\r\n              type=\"email\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.email || locale().enter_email\r\n              )}\r\n            />\r\n          );\r\n        case \"password\":\r\n          return (\r\n            <input\r\n              type=\"password\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.password || locale().enter_password\r\n              )}\r\n            />\r\n          );\r\n        case \"hidden\":\r\n          return <input type=\"hidden\" value={field.value} />;\r\n        case \"file\":\r\n          return (\r\n            <input\r\n              type=\"file\"\r\n              accept={field.accept || \"*\"}\r\n              placeholder={\r\n                field.placeholder ||\r\n                customLabels?.placeholders?.file ||\r\n                \"Select file...\"\r\n              }\r\n              name={field.name || \"file\"}\r\n              disabled={field.readonly}\r\n              required={field.required}\r\n            />\r\n          );\r\n        case \"note\":\r\n          return <p className=\"note\">{field.value}</p>;\r\n        case \"date\":\r\n          return (\r\n            <input\r\n              type=\"date\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.date || locale().enter_date\r\n              )}\r\n            />\r\n          );\r\n        case \"text\":\r\n        default:\r\n          return (\r\n            <input\r\n              type=\"text\"\r\n              {...inputProps(\r\n                customLabels?.placeholders?.text || locale().enter_text\r\n              )}\r\n            />\r\n          );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className={`form-row ${direction || \"row\"}`}>\r\n        {field.type !== \"hidden\" && (\r\n          <label>\r\n            {field.label || field.originalName}\r\n            {field.required ? \" *\" : \"\"}\r\n          </label>\r\n        )}\r\n        {renderFieldInput(field, onChange)}\r\n        {showReset &&\r\n          !field.readonly &&\r\n          !field.disabled &&\r\n          field.value &&\r\n          field.value.length > 0 && (\r\n            <i\r\n              title={clearLabel}\r\n              onClick={() => onChange(field.name, \"\", true)}\r\n              aria-label=\"Clear\"\r\n              className=\"clear-input fa fa-times\"\r\n            ></i>\r\n          )}\r\n        <ToastContainer />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport {\r\n  IConfigInputField,\r\n  IConfigPagination,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./queryParams.scss\";\r\n\r\ninterface IProps {\r\n  initialParams: IConfigInputField[];\r\n  paginationConfig?: IConfigPagination;\r\n  submitCallback: (queryParams: IConfigInputField[], reset?: boolean) => void;\r\n}\r\n\r\nexport const QueryParams = ({\r\n  initialParams,\r\n  paginationConfig,\r\n  submitCallback,\r\n}: IProps) => {\r\n  const [queryParams, setQueryParams] = useState<IConfigInputField[]>(\r\n    initialParams\r\n  );\r\n\r\n  function submit(e?: any) {\r\n    if (e) {\r\n      e.preventDefault();\r\n    }\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      submitCallback(queryParams, true);\r\n    } else {\r\n      submitCallback(queryParams);\r\n    }\r\n  }\r\n\r\n  function formChanged(\r\n    fieldName: string,\r\n    value: any,\r\n    submitAfterChange?: boolean\r\n  ) {\r\n    const updatedQueryParams: IConfigInputField[] = [...queryParams].map(\r\n      (field) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n        return field;\r\n      }\r\n    );\r\n    setQueryParams(updatedQueryParams);\r\n    if (submitAfterChange) {\r\n      submit();\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (paginationConfig && paginationConfig.type === \"infinite-scroll\") {\r\n      const filteredParams = initialParams.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n      setQueryParams(filteredParams);\r\n    } else {\r\n      setQueryParams(initialParams);\r\n    }\r\n  }, [paginationConfig, initialParams]);\r\n  if (!queryParams.length) {\r\n    return <React.Fragment></React.Fragment>;\r\n  }\r\n\r\n  return (\r\n    <section className=\"query-params-form\">\r\n      <h5>{locale().search}</h5>\r\n      <form onSubmit={submit}>\r\n        {queryParams.map((queryParam, idx) => {\r\n          if (queryParam.name == \"page\") return \"\";\r\n          //if (queryParam.hidden) return \"\";\r\n          return (\r\n            <FormRow\r\n              key={`query_param_${idx}`}\r\n              field={queryParam}\r\n              onChange={formChanged}\r\n              showReset={!queryParam.type || queryParam.type === \"text\"}\r\n            />\r\n          );\r\n        })}\r\n        <Button type=\"submit\" onClick={submit}>\r\n          {locale().submit}\r\n        </Button>\r\n      </form>\r\n    </section>\r\n  );\r\n};\r\n","import React, { Component, RefObject, ReactChild } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport \"./popup.scss\";\r\nimport { ICustomLabels } from \"../../common/models/config.model\";\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faTimes);\r\ninterface IPopupProps {\r\n  className?: string;\r\n  style?: any;\r\n  show: boolean;\r\n  closeCallback: any;\r\n  children: ReactChild;\r\n  refCallback?:\r\n    | string\r\n    | ((instance: HTMLDivElement | null) => void)\r\n    | RefObject<HTMLDivElement>\r\n    | null\r\n    | undefined;\r\n  customLabels?: ICustomLabels;\r\n}\r\n\r\nlet portalRoot: HTMLDivElement = document.getElementById(\r\n  \"popup-portal\"\r\n) as HTMLDivElement;\r\nif (!portalRoot) {\r\n  portalRoot = document.createElement(\"div\");\r\n  portalRoot.setAttribute(\"id\", \"popup-portal\");\r\n  document.body.append(portalRoot);\r\n}\r\n\r\nclass PortalPopup extends Component {\r\n  private el: HTMLElement;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.el = document.createElement(\"div\");\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    portalRoot.appendChild(this.el);\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    portalRoot.removeChild(this.el);\r\n  };\r\n\r\n  render() {\r\n    return ReactDOM.createPortal(this.props.children, this.el);\r\n  }\r\n}\r\n\r\nexport class Popup extends Component<IPopupProps> {\r\n  render() {\r\n    const style: any = Object.assign(\r\n      {},\r\n      { display: this.props.show ? \"block\" : \"none\" },\r\n      this.props.style || {}\r\n    );\r\n    const closeLabel = this.props.customLabels?.buttons?.closeForm || \"Close\";\r\n\r\n    return (\r\n      <PortalPopup>\r\n        {this.props.show ? (\r\n          <div className={`popup ${this.props.className || \"\"}`} style={style}>\r\n            <div\r\n              className=\"overlay\"\r\n              onClick={(e: any) => this.props.closeCallback(e)}\r\n            ></div>\r\n            <div className=\"popup-content\" ref={this.props.refCallback}>\r\n              {this.props.children}\r\n              <button\r\n                title={closeLabel}\r\n                className=\"close-popup\"\r\n                onClick={(e: any) => this.props.closeCallback(e)}\r\n              >\r\n                <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : null}\r\n      </PortalPopup>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    document.removeEventListener(\"keydown\", this._handleKeyDown.bind(this));\r\n  }\r\n\r\n  _handleKeyDown = (e: KeyboardEvent) => {\r\n    const { show, closeCallback } = this.props;\r\n\r\n    if (show && e.keyCode === 27) {\r\n      closeCallback(e);\r\n    }\r\n  };\r\n}\r\n","import { IConfigInputField } from '../common/models/config.model';\r\n\r\nclass FileHelpers {\r\n\r\n  public isMultipartForm(fields: IConfigInputField[]): boolean {\r\n    for (const fieldIndex in fields) {\r\n      let field = fields[fieldIndex];\r\n\r\n      if (field.type === 'file') {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  \r\n}\r\n\r\nexport const fileHelpers = new FileHelpers();","import React, { useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\n\r\nimport { Popup } from \"../popup/popup.comp\";\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels,\r\n  IQueryParam,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./formPopup.scss\";\r\n\r\nconst unflatten = require(\"flat\").unflatten;\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  title: string;\r\n  fields: IConfigInputField[];\r\n  loadedFields: ILoadedFields[];\r\n  type: string;\r\n  rawData?: any;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  methodConfig: IConfigPostMethod | IConfigPutMethod;\r\n  closeCallback: (reloadData: boolean) => void;\r\n  submitCallback: (\r\n    body: any,\r\n    containFiles: boolean,\r\n    queryParams: IQueryParam[]\r\n  ) => void;\r\n}\r\n\r\ninterface IDeleteFields {\r\n  fieldName: string;\r\n  value: string;\r\n}\r\n\r\nexport const FormPopup = withAppContext(\r\n  ({\r\n    context,\r\n    title,\r\n    fields,\r\n    loadedFields,\r\n    rawData,\r\n    type,\r\n    getSingleConfig,\r\n    methodConfig,\r\n    submitCallback,\r\n    closeCallback,\r\n  }: IProps) => {\r\n    const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n    const { httpService, activePage, config } = context;\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [formFields, setFormFields] = useState<IConfigInputField[]>([]);\r\n    const [deleteValues, setDeleteValues] = useState<IDeleteFields[]>([]);\r\n    const [finalRawData, setFinalRawData] = useState<any>(null);\r\n    const pageHeaders: any = activePage?.requestHeaders || {};\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n\r\n    async function initFormFields() {\r\n      let finalRawData: any = rawData || {};\r\n\r\n      if (getSingleConfig && getSingleConfig.url) {\r\n        try {\r\n          const {\r\n            url,\r\n            requestHeaders,\r\n            actualMethod,\r\n            dataPath,\r\n            queryParams,\r\n            responseType,\r\n            dataTransform,\r\n          } = getSingleConfig;\r\n\r\n          const result = await httpService.fetch({\r\n            method: actualMethod === \"view\" ? \"get\" : actualMethod || \"get\",\r\n            origUrl: url,\r\n            queryParams,\r\n            headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n            rawData,\r\n            responseType,\r\n          });\r\n\r\n          let extractedData = dataHelpers.extractDataByDataPath(\r\n            result,\r\n            dataPath\r\n          );\r\n\r\n          if (typeof dataTransform === \"function\") {\r\n            extractedData = await dataTransform(extractedData);\r\n          }\r\n\r\n          if (\r\n            extractedData &&\r\n            (typeof extractedData === \"object\" ||\r\n              typeof extractedData === \"string\")\r\n          ) {\r\n            finalRawData = extractedData;\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Could not load single item's data.\", e);\r\n          toast.error(\"Could not load single item's data.\", {\r\n            position: toast.POSITION.TOP_CENTER,\r\n          });\r\n        }\r\n      }\r\n\r\n      setFinalRawData(finalRawData); // Store the raw data for later.\r\n\r\n      setFormFields(\r\n        fieldsCopy.map((field) => {\r\n          let key = field.name;\r\n\r\n          field.originalName = field.name;\r\n\r\n          let dataPathSplit: string[] = [];\r\n\r\n          if (field.dataPath) {\r\n            dataPathSplit = field.dataPath.split(\".\");\r\n            key = `${field.dataPath}.${field.name}`;\r\n          }\r\n\r\n          const lookup = () => {\r\n            let objToLookIn = finalRawData;\r\n            for (const pathElem of dataPathSplit) {\r\n              if (\r\n                objToLookIn[pathElem] !== undefined &&\r\n                objToLookIn[pathElem] !== null\r\n              ) {\r\n                objToLookIn = objToLookIn[pathElem];\r\n              } else {\r\n                return undefined;\r\n              }\r\n            }\r\n            return objToLookIn[field.name];\r\n          };\r\n\r\n          const lookupValue = lookup();\r\n\r\n          // Changing field name to include datapath\r\n          // This will use us later for unflatten the final object\r\n          field.name = key;\r\n\r\n          if (dataHelpers.checkIfFieldIsObject(field)) {\r\n            if (lookupValue || field.value) {\r\n              field.value =\r\n                JSON.stringify(lookupValue || field.value, null, \"  \") || \"\";\r\n            }\r\n            return field;\r\n          }\r\n\r\n          if (field.type === \"array\") {\r\n            field.value = lookupValue || field.value || [];\r\n            return field;\r\n          }\r\n\r\n          if (typeof lookupValue !== \"undefined\") {\r\n            field.value = lookupValue;\r\n          } else {\r\n            // important in order to prevent controlled / uncontrolled components error\r\n            field.value = typeof field.value === \"undefined\" ? \"\" : field.value;\r\n          }\r\n\r\n          if (\r\n            (field.type === \"long-text\" || field.type === \"text\") &&\r\n            typeof finalRawData === \"string\"\r\n          ) {\r\n            field.value = finalRawData;\r\n          }\r\n\r\n          return field;\r\n        })\r\n      );\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    async function submitForm(e: any) {\r\n      e.preventDefault();\r\n\r\n      const finalObject: any = (methodConfig as IConfigPutMethod)\r\n        .includeOriginalFields\r\n        ? Object.assign({}, finalRawData)\r\n        : {};\r\n      const formData = new FormData();\r\n      const containFiles: boolean = fileHelpers.isMultipartForm(formFields);\r\n      let validationError = null;\r\n\r\n      let queryParams: IQueryParam[] = [];\r\n\r\n      formFields.forEach((field) => {\r\n        if (field.type === \"file\") {\r\n          const fileInput: any = document.querySelector(\r\n            `input[name=\"${field.name || \"file\"}\"]`\r\n          ) as HTMLInputElement;\r\n\r\n          if (fileInput.files.length > 0) {\r\n            const firstFile = fileInput.files[0];\r\n            formData.append(field.name || \"file\", firstFile, firstFile.name);\r\n          }\r\n          return;\r\n        }\r\n\r\n        finalObject[field.name] = field.value;\r\n\r\n        if (containFiles && !field.useInUrl) {\r\n          formData.append(field.name, field.value);\r\n        }\r\n\r\n        // eslint-disable-next-line eqeqeq\r\n        if (\r\n          field.required &&\r\n          field.type !== \"boolean\" &&\r\n          !field.value &&\r\n          field.value != 0\r\n        ) {\r\n          validationError = \"Please fill up all required fields.\";\r\n        }\r\n\r\n        if (dataHelpers.checkIfFieldIsObject(field) && field.value) {\r\n          try {\r\n            finalObject[field.name] = JSON.parse(field.value);\r\n          } catch (e) {\r\n            validationError = `Invalid JSON for field \"${field.name}\".`;\r\n          }\r\n        }\r\n\r\n        if (field.type === \"select\" && field.value === \"\") {\r\n          delete finalObject[field.name];\r\n        }\r\n        if (field.disabled === true) {\r\n          delete finalObject[field.name];\r\n        }\r\n\r\n        if (field.type === \"boolean\") {\r\n          finalObject[field.name] = field.value || false;\r\n        }\r\n\r\n        if (\r\n          type !== \"add\" &&\r\n          field.type === \"array\" &&\r\n          field.arrayType === \"text\"\r\n        ) {\r\n          let temp = \"{\";\r\n\r\n          let rmVal = deleteValues.filter((e) => e.fieldName === field.name);\r\n          rmVal = rmVal.filter((e) => e.value !== \"\");\r\n\r\n          if (field.value.length !== 0) {\r\n            temp +=\r\n              ` \"add\": [\"` +\r\n              field.value.map((e: any) => e !== \"\").join('\" , \"') +\r\n              `\"]`;\r\n          }\r\n          if (field.value.length !== 0 && rmVal.length !== 0) {\r\n            temp += \",\";\r\n          }\r\n          if (rmVal.length !== 0) {\r\n            temp +=\r\n              `\"remove\": [\"` + rmVal.map((e) => e.value).join('\" , \"') + `\"]`;\r\n          }\r\n          temp += \"}\";\r\n\r\n          finalObject[field.name] = JSON.parse(temp);\r\n        }\r\n\r\n        if (field.type === \"encode\") {\r\n          finalObject[field.name] = encodeURIComponent(field.value);\r\n        }\r\n\r\n        if (field.useInUrl) {\r\n          queryParams.push({ name: field.name, value: field.value });\r\n        }\r\n      });\r\n\r\n      if (validationError) {\r\n        toast.error(validationError, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n        return;\r\n      }\r\n\r\n      setLoading(true);\r\n\r\n      try {\r\n        const body = containFiles ? formData : unflatten(finalObject);\r\n\r\n        await submitCallback(body, containFiles, queryParams);\r\n\r\n        toast.success(\"Great Success!\", {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n\r\n        closeCallback(true);\r\n      } catch (e) {\r\n        toast.error(e.message, {\r\n          position: toast.POSITION.TOP_CENTER,\r\n        });\r\n      }\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    function formChanged(fieldName: string, value: any) {\r\n      let updatedFormFields: IConfigInputField[] = JSON.parse(\r\n        JSON.stringify(formFields)\r\n      );\r\n\r\n      updatedFormFields = updatedFormFields.map((field: IConfigInputField) => {\r\n        if (field.name === fieldName) {\r\n          field.value = value;\r\n        }\r\n\r\n        return field;\r\n      });\r\n\r\n      setFormFields(updatedFormFields);\r\n    }\r\n\r\n    function saveRemovedValues(fieldName: string, value: string) {\r\n      let delVal = [...deleteValues];\r\n      delVal.push({ fieldName: fieldName, value: value });\r\n\r\n      setDeleteValues(delVal);\r\n    }\r\n    useEffect(() => {\r\n      initFormFields();\r\n\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n      <Popup\r\n        show={true}\r\n        className=\"form-popup\"\r\n        closeCallback={() => closeCallback(false)}\r\n        customLabels={customLabels}\r\n      >\r\n        <React.Fragment>\r\n          <h2>{title}</h2>\r\n          <section>\r\n            {loading ? (\r\n              <Loader />\r\n            ) : (\r\n              <form onSubmit={submitForm}>\r\n                {formFields.map((field, idx) => {\r\n                  return (\r\n                    <div>\r\n                      <FormRow\r\n                        key={`field_${idx}`}\r\n                        field={field}\r\n                        loadedFields={loadedFields}\r\n                        onChange={formChanged}\r\n                        onRemove={saveRemovedValues}\r\n                        showReset={!field.type || field.type === \"text\"}\r\n                      />\r\n                      <br />\r\n                      <hr />\r\n                    </div>\r\n                  );\r\n                })}\r\n                {methodConfig.actualMethod === \"view\" ? (\r\n                  <div className=\"buttons-wrapper center\">\r\n                    <Button onClick={closeCallback} color=\"green\">\r\n                      {locale().close}\r\n                    </Button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"buttons-wrapper center\">\r\n                    <Button type=\"submit\" onClick={submitForm} color=\"green\">\r\n                      {locale().submit}\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </form>\r\n            )}\r\n          </section>\r\n          <ToastContainer />\r\n        </React.Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n);\r\n","import React from 'react';\r\n\r\nimport './filterField.scss';\r\n\r\ninterface IProps {\r\n  onChange: (filter: string) => void\r\n}\r\n\r\nexport const FilterField = ({ onChange }: IProps) => {\r\n  return (\r\n    <section className=\"filter-wrapper\">\r\n      <h5>Filter:</h5>\r\n      <div className=\"form-row\">\r\n        <input type=\"text\" placeholder=\"Search...\" onChange={(e) => onChange(e.target.value.toLowerCase())} />\r\n      </div>\r\n    </section>\r\n  );\r\n};","import { IPaginationState, IQueryPaginationState, IBodyPaginationState } from \"./states.model\";\r\n\r\nexport const isQueryPaginationState = (obj: IPaginationState): obj is IQueryPaginationState => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPaginationState = (obj: IPaginationState): obj is IBodyPaginationState => {\r\n    return obj.source === 'body';\r\n}","import { IConfigPagination, IConfigBodyPagination, IConfigQueryPagination } from \"./config.model\";\r\n\r\nexport const isQueryPagination = (obj: IConfigPagination): obj is IConfigQueryPagination => {\r\n    return obj.source === 'query';\r\n}\r\n\r\nexport const isBodyPagination = (obj: IConfigPagination): obj is IConfigBodyPagination => {\r\n    return obj.source === 'body';\r\n}\r\n","import React, { Component, useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  LineMarkSeries,\r\n  Hint,\r\n} from \"react-vis\";\r\nimport \"react-vis/dist/style.css\";\r\n\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./graphHolder.scss\";\r\n//import \"../node_modules/react-vis/dist/style.css\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faBackward,\r\n  faForward,\r\n  faSearchPlus,\r\n  faSearchMinus,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\nimport { reduce } from \"lodash\";\r\n\r\nfontawesome.library.add(faBackward, faForward, faSearchPlus, faSearchMinus);\r\n\r\ninterface IGraphData {\r\n  nameStruct: string;\r\n  unitMeasure: string;\r\n  dataStruct: any;\r\n}\r\n\r\ninterface IHintData {\r\n  x: string;\r\n  y: string;\r\n}\r\n\r\ninterface IProps {\r\n  dataMat: IGraphData[];\r\n  head: number;\r\n  tail: number;\r\n  prev: boolean;\r\n  prevCallback: () => void;\r\n  next: boolean;\r\n  nextCallback: () => void;\r\n  zoomIn: boolean;\r\n  zoomInCallback: () => void;\r\n  zoomOut: boolean;\r\n  zoomOutCallback: () => void;\r\n}\r\n\r\nexport const GraphHolder = withAppContext(\r\n  ({\r\n    dataMat,\r\n    head,\r\n    tail,\r\n    prev,\r\n    prevCallback,\r\n    next,\r\n    nextCallback,\r\n    zoomIn,\r\n    zoomInCallback,\r\n    zoomOut,\r\n    zoomOutCallback,\r\n  }: IProps) => {\r\n    useEffect(() => {\r\n      setHintData(Array(dataMat.length).fill({ date: \"\", y: \"\" }));\r\n      setHoverData(Array(dataMat.length).fill(false));\r\n    }, []);\r\n\r\n    const [hoverData, setHoverData] = useState<boolean[]>(Array(1).fill(false));\r\n    const [hintData, setHintData] = useState<IHintData[]>(Array(0));\r\n\r\n    function setHoverDataWithIndex(index: number, value: boolean) {\r\n      // 1. Make a shallow copy of the items\r\n      let items = [...hoverData];\r\n      // 2. Make a shallow copy of the item you want to mutate\r\n      let item = items[index];\r\n      // 3. Replace the property you're intested in\r\n      item = value;\r\n      // 4. Put it back into our array. N.B. we *are* mutating the array here, but that's why we made a copy first\r\n      items[index] = item;\r\n      // 5. Set the state to our new copy\r\n      setHoverData(items);\r\n    }\r\n\r\n    function setHintDataWithIndex(index: number, value: IHintData) {\r\n      let items = [...hintData];\r\n\r\n      let item = items[index];\r\n\r\n      item = value;\r\n\r\n      items[index] = item;\r\n\r\n      setHintData(items);\r\n    }\r\n\r\n    return (\r\n      <div className=\"graphHolder\">\r\n        <br />\r\n        <hr />\r\n        <div>\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale().previous_page}\r\n            onClick={() => prevCallback()}\r\n            disabled={!prev}\r\n          >\r\n            <i className=\"fa fa-backward\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale().next_page}\r\n            onClick={() => nextCallback()}\r\n            disabled={!next}\r\n          >\r\n            <i className=\"fa fa-forward\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale().zoomIn}\r\n            onClick={() => zoomInCallback()}\r\n            disabled={!zoomIn}\r\n          >\r\n            <i className=\"fa fa-search-plus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n\r\n          <Button\r\n            className=\"button-margin\"\r\n            title={locale().zoomOut}\r\n            onClick={() => zoomOutCallback()}\r\n            disabled={!zoomOut}\r\n          >\r\n            <i className=\"fa fa-search-minus\" aria-hidden=\"true\"></i>\r\n          </Button>\r\n        </div>\r\n        <br />\r\n        {dataMat.map((data, index) => {\r\n          return (\r\n            <div>\r\n              <h2>{data.nameStruct}</h2>\r\n              <br />\r\n              <XYPlot\r\n                width={1600}\r\n                height={600}\r\n                onMouseLeave={() => setHoverDataWithIndex(index, false)}\r\n              >\r\n                <VerticalGridLines />\r\n                <HorizontalGridLines />\r\n                <XAxis\r\n                  title=\"t\"\r\n                  tickTotal={10}\r\n                  //tickLabelAngle={-90}\r\n                  tickFormat={function tickFormat(d) {\r\n                    const date = new Date(+d);\r\n                    return date.toString().substr(4, 6);\r\n                  }}\r\n                />\r\n                <YAxis title={data.unitMeasure} />\r\n                <LineMarkSeries\r\n                  animation=\"stiff\"\r\n                  data={[...data.dataStruct].slice(head, tail).reverse()}\r\n                  onValueMouseOver={(d) => {\r\n                    setHoverDataWithIndex(index, true);\r\n                    setHintDataWithIndex(index, {\r\n                      x: d.x.toString(),\r\n                      y: d.y.toString(),\r\n                    });\r\n                  }} //\r\n                />\r\n                {hoverData[index] && (\r\n                  <Hint\r\n                    value={hintData[index]}\r\n                    style={{\r\n                      fontSize: 18,\r\n                      background: \"#0B132B\",\r\n                      border: 10,\r\n                      borderColor: \"red\",\r\n                      /*text: {\r\n                        display: \"none\",\r\n                      },\r\n                      value: {\r\n                        color: \"red\",\r\n                      },*/\r\n                    }}\r\n                  >\r\n                    {\"Start time: \" + new Date(+hintData[index].x).toString()}\r\n                    <br />\r\n                    {locale().value +\r\n                      \": \" +\r\n                      parseFloat(hintData[index].y).toFixed(2)}\r\n                  </Hint>\r\n                )}\r\n              </XYPlot>\r\n              <br />\r\n              <hr />\r\n              <br />\r\n            </div>\r\n          );\r\n        })}\r\n        <ToastContainer />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { Popup } from \"../popup/popup.comp\";\r\nimport {\r\n  IConfigInputField,\r\n  IConfigGetSingleMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  ICustomLabels,\r\n  IQueryParam,\r\n  IConfigGetAllMethod,\r\n  IConfigGraphMethod,\r\n} from \"../../common/models/config.model\";\r\nimport { FormRow } from \"../formRow/formRow.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { fileHelpers } from \"../../helpers/file.helpers\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale\";\r\nimport { GraphHolder } from \"../graphHolder/graphHolder\";\r\n\r\nimport {\r\n  XYPlot,\r\n  XAxis,\r\n  YAxis,\r\n  VerticalGridLines,\r\n  HorizontalGridLines,\r\n  LineMarkSeries,\r\n  Hint,\r\n} from \"react-vis\";\r\nimport \"react-vis/dist/style.css\";\r\n\r\nimport \"./graphPopup.scss\";\r\nimport { QueryParams } from \"../queryParams/queryParams.comp\";\r\nimport \"../queryParams/queryParams.scss\";\r\nimport { IFetchParams } from \"../../services/http.service\";\r\nimport { createEmitAndSemanticDiagnosticsBuilderProgram } from \"typescript\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faBackward,\r\n  faForward,\r\n  faSearchPlus,\r\n  faSearchMinus,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faBackward, faForward, faSearchPlus, faSearchMinus);\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  title: string;\r\n  fields: IConfigInputField[];\r\n\r\n  graphConfig: IConfigGraphMethod;\r\n  closeCallback: (reloadData: boolean) => void;\r\n}\r\n\r\ninterface IGraphData {\r\n  nameStruct: string;\r\n  unitMeasure: string;\r\n  dataStruct: any;\r\n}\r\n\r\ninterface IHintData {\r\n  x: string;\r\n  y: string;\r\n}\r\n\r\nexport const GraphPopup = withAppContext(\r\n  ({ context, title, fields, graphConfig, closeCallback }: IProps) => {\r\n    const fieldsCopy: IConfigInputField[] = JSON.parse(JSON.stringify(fields));\r\n    const { httpService, activePage, config } = context;\r\n    const [loading, setLoading] = useState<boolean>(true);\r\n    const [doneQuery, setDoneQuery] = useState<boolean>(true);\r\n    const [showGraph, setShowGraph] = useState<boolean>(false);\r\n    const [titleState, setTitleState] = useState<String>(title);\r\n    const [formFields, setFormFields] =\r\n      useState<IConfigInputField[]>(fieldsCopy);\r\n    const [graphData, setGraphData] = useState<IGraphData[]>();\r\n\r\n    const [head, setHead] = useState<number>(0);\r\n    const [tail, setTail] = useState<number>(10);\r\n\r\n    const [pageNum, setPageNum] = useState<number>(1);\r\n    const [totalPages, setTotalPages] = useState<number>(0);\r\n    const [error, setError] = useState<string>();\r\n\r\n    const [loadedDocSize, setLoadedDocSize] = useState<number>(0);\r\n    //const [fetchedData, setFetchedData] = useState<null | any>(null);\r\n    const [fetchedFeature, setFetchedFeature] = useState<null | any>(null);\r\n\r\n    const [totalDocs, setTotalDocs] = useState<number>(0);\r\n    const [limit, setLimit] = useState<number>(0);\r\n\r\n    const customLabels: ICustomLabels | undefined = {\r\n      ...config?.customLabels,\r\n      ...activePage?.customLabels,\r\n    };\r\n\r\n    function graphChanged(\r\n      fieldName: string,\r\n      value: any,\r\n      submitAfterChange?: boolean\r\n    ) {\r\n      const updatedQueryParams: IConfigInputField[] = [...formFields].map(\r\n        (formFields) => {\r\n          if (formFields.name === fieldName) {\r\n            formFields.value = value;\r\n          }\r\n          return formFields;\r\n        }\r\n      );\r\n      setFormFields(updatedQueryParams);\r\n      if (submitAfterChange) {\r\n        submitGraph();\r\n      }\r\n    }\r\n\r\n    /*\r\n\r\n    This function will get the selected feature (graph building form) and fetch it from the features page\r\n    The fetchFeatureData boolean will make the function fetch the informations about the selected features\r\n    The pageoffset let you choose data from a different page from the current one\r\n\r\n    */\r\n    async function fetchFeatureData(\r\n      fetchFeatureData: boolean = false,\r\n      pageOffset: number = 0\r\n    ) {\r\n      //set page offset\r\n      let tempField = [...formFields];\r\n      tempField.filter((obj) => {\r\n        return obj.name === \"page\" && (obj.value = pageNum + pageOffset + \"\");\r\n      });\r\n\r\n      //get the data for the selected feature\r\n      const resultsData = await httpService.fetch({\r\n        method: \"get\",\r\n        origUrl: graphConfig.url,\r\n        queryParams: tempField,\r\n        exactMatch: true,\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n\r\n      let fF = fetchedFeature;\r\n      if (fetchFeatureData === true) {\r\n        //fetch the feature\r\n        const resultsFeature = await httpService.fetch({\r\n          method: \"get\",\r\n          origUrl: \"/features/\",\r\n          queryParams: tempField.filter((obj) => {\r\n            return obj.name === \"feature\" && (obj.name = \"_id\");\r\n          }),\r\n          exactMatch: true,\r\n          headers: { \"content-type\": \"application/json\" },\r\n        });\r\n\r\n        tempField.filter((obj) => {\r\n          return obj.name === \"_id\" && (obj.name = \"feature\");\r\n        });\r\n\r\n        //extract the data for the feature\r\n        fF = dataHelpers.extractDataByDataPath(resultsFeature, \"docs\");\r\n      }\r\n\r\n      const pG = resultsData[\"page\"];\r\n\r\n      const tP = resultsData[\"totalPages\"];\r\n\r\n      const tD = resultsData[\"totalDocs\"];\r\n\r\n      const limit = resultsData[\"limit\"];\r\n\r\n      //extract the data for the measurements\r\n      const fD = dataHelpers.extractDataByDataPath(\r\n        resultsData,\r\n        graphConfig.dataPath\r\n      );\r\n\r\n      //return data\r\n      return {\r\n        fetchedData: fD,\r\n        fetchedFeature: fF,\r\n        pageNum: pG,\r\n        totalPages: tP,\r\n        totalDocs: tD,\r\n        limit: limit,\r\n      };\r\n    }\r\n\r\n    function buildData(fetchedData: any, fetchedFeature: any) {\r\n      let compatibleComponents = new Array();\r\n      let dataFeatureName = new Array<string>();\r\n      let dataFeatureUnit = new Array<string>();\r\n\r\n      fetchedFeature.map((ft: any) =>\r\n        ft.items.map((comp: any, index: number) => {\r\n          if (comp.dimension === 0 && comp.type === \"number\") {\r\n            compatibleComponents.push(index);\r\n            dataFeatureName.push(comp.name);\r\n            dataFeatureUnit.push(comp.unit);\r\n          } else return null;\r\n        })\r\n      );\r\n\r\n      if (compatibleComponents.length === 0) {\r\n        setLoading(false);\r\n        return null;\r\n      }\r\n\r\n      let dataStruct = new Array(compatibleComponents.length);\r\n\r\n      for (let i = 0; i < dataStruct.length; i++) {\r\n        dataStruct[i] = new Array();\r\n      }\r\n\r\n      fetchedData.map((data: any) =>\r\n        data[\"samples\"].map((sample: any) =>\r\n          sample[\"values\"].map((feature: any, indexFeat: number) => {\r\n            if (compatibleComponents.includes(indexFeat))\r\n              dataStruct[compatibleComponents.indexOf(indexFeat)].push({\r\n                x: Date.parse(data[\"startDate\"]),\r\n                y: feature,\r\n              });\r\n          })\r\n        )\r\n      );\r\n\r\n      let finalData = Array<IGraphData>();\r\n      for (let i = 0; i < dataFeatureName.length; i++) {\r\n        finalData[i] = {\r\n          nameStruct: dataFeatureName[i],\r\n          dataStruct: dataStruct[i], //.reverse() will be applied to the subset\r\n          unitMeasure: dataFeatureUnit[i],\r\n        };\r\n      }\r\n\r\n      return finalData;\r\n    }\r\n\r\n    async function submitGraph() {\r\n      setLoading(true);\r\n      setDoneQuery(true);\r\n      setHead(0);\r\n      setTail(10);\r\n\r\n      const {\r\n        fetchedData,\r\n        fetchedFeature,\r\n        pageNum,\r\n        totalPages,\r\n        totalDocs,\r\n        limit,\r\n      } = await fetchFeatureData(true);\r\n\r\n      //console.log(fetchedData);\r\n      //console.log(totalDocs);\r\n\r\n      //setFetchedData(fetchedData);\r\n      setFetchedFeature(fetchedFeature);\r\n      setPageNum(pageNum);\r\n      setTotalPages(totalPages);\r\n      setTotalDocs(totalDocs);\r\n      setLimit(limit);\r\n\r\n      const finalData = buildData(fetchedData, fetchedFeature);\r\n\r\n      if (finalData === null) {\r\n        setError(locale().wrong_feature_error);\r\n        return;\r\n      }\r\n\r\n      if (finalData[0].dataStruct.length === 0) {\r\n        setError(locale().no_data_error);\r\n        setLoading(false);\r\n        return;\r\n      }\r\n      // inserire parte con i cursori qua\r\n\r\n      setGraphData(finalData);\r\n      //console.log(finalData);\r\n      const updatedDocSize = loadedDocSize + finalData[0].dataStruct.length;\r\n      //console.log(updatedDocSize);\r\n      setLoadedDocSize(updatedDocSize);\r\n\r\n      setShowGraph(true);\r\n\r\n      setTitleState(locale().plot + \" \" + fetchedFeature[0]._id);\r\n\r\n      setLoading(false);\r\n    }\r\n\r\n    ///////////////////////////////\r\n    //graph functions\r\n    function CalculateButtons() {\r\n      const prev: boolean = tail < totalDocs;\r\n      const next: boolean = head > 0;\r\n      const zoomIn: boolean = tail - head > 3;\r\n      const zoomOut: boolean = tail - head <= totalDocs;\r\n\r\n      return { prev, next, zoomIn, zoomOut };\r\n    }\r\n\r\n    async function TravelPlot(act: \"prev\" | \"next\" | \"zoomIn\" | \"zoomOut\") {\r\n      let newHead: number = head;\r\n      let newTail: number = tail;\r\n      const diff = tail - head;\r\n      const zoomFactor = 1;\r\n\r\n      //log\r\n      /*\r\n      console.log(\"Head\");\r\n      console.log(newHead);\r\n      console.log(\"Tail\");\r\n      console.log(newTail);\r\n      */\r\n\r\n      //move head and tail\r\n      switch (act) {\r\n        case \"prev\":\r\n          newHead = newHead + diff;\r\n          newTail = newTail + diff;\r\n          break;\r\n        case \"next\":\r\n          newHead = newHead - diff;\r\n          newTail = newTail - diff;\r\n          break;\r\n        case \"zoomIn\":\r\n          newHead = newHead + zoomFactor;\r\n          newTail = newTail - zoomFactor;\r\n          break;\r\n        case \"zoomOut\":\r\n          newHead = newHead - zoomFactor;\r\n          newTail = newTail + zoomFactor;\r\n          break;\r\n      }\r\n\r\n      //constraints\r\n      if (newHead <= 0) {\r\n        //if possible keep the same amount of data in the plot shifting the tail\r\n        newTail = newTail - newHead;\r\n        newHead = 0;\r\n      }\r\n      if (newTail > totalDocs) {\r\n        newTail = totalDocs;\r\n      }\r\n\r\n      //log\r\n      /*\r\n      console.log(\"new Head\");\r\n      console.log(newHead);\r\n      console.log(\"new Tail\");\r\n      console.log(newTail);\r\n      */\r\n      //load data before required\r\n      if (\r\n        (newTail + diff > loadedDocSize ||\r\n          newTail + zoomFactor > loadedDocSize) &&\r\n        loadedDocSize < totalDocs\r\n      ) {\r\n        //load data\r\n        //console.log(\"load more data\");\r\n\r\n        const { fetchedData, pageNum } = await fetchFeatureData(false, 1);\r\n\r\n        setPageNum(pageNum);\r\n\r\n        const newData = buildData(fetchedData, fetchedFeature);\r\n\r\n        if (newData === null) {\r\n          setError(locale().wrong_feature_error);\r\n          return;\r\n        }\r\n\r\n        //console.log(graphData);\r\n        //console.log(newData);\r\n        let finalData: IGraphData[];\r\n        if (graphData !== undefined) {\r\n          finalData = [...graphData];\r\n          for (let i = 0; i < newData.length; i++) {\r\n            finalData[i].nameStruct = graphData[i].nameStruct;\r\n            finalData[i].unitMeasure = graphData[i].unitMeasure;\r\n            finalData[i].dataStruct = graphData[i].dataStruct.concat(\r\n              newData[i].dataStruct\r\n            );\r\n          }\r\n          //console.log(finalData);\r\n\r\n          setGraphData(finalData);\r\n          const updatedDocSize = finalData[0].dataStruct.length;\r\n          //console.log(updatedDocSize);\r\n          setLoadedDocSize(updatedDocSize);\r\n        }\r\n      }\r\n\r\n      //set head and tail\r\n      setHead(newHead);\r\n      setTail(newTail);\r\n    }\r\n\r\n    useEffect(() => {\r\n      setLoading(false);\r\n      setDoneQuery(false);\r\n      setShowGraph(false);\r\n    }, []);\r\n\r\n    return (\r\n      <Popup\r\n        show={true}\r\n        className=\"graph-popup\"\r\n        closeCallback={() => closeCallback(false)}\r\n        customLabels={customLabels}\r\n      >\r\n        <React.Fragment>\r\n          <h2>{titleState}</h2>\r\n\r\n          {loading ? (\r\n            <Loader />\r\n          ) : !doneQuery ? (\r\n            <section className=\"query-params-form\">\r\n              <h5>{locale().plot}</h5>\r\n              <form onSubmit={submitGraph}>\r\n                {formFields.map((queryParam, idx) => {\r\n                  if (queryParam.name == \"page\") return \"\";\r\n                  return (\r\n                    <FormRow\r\n                      key={`query_param_${idx}`}\r\n                      field={queryParam}\r\n                      onChange={graphChanged}\r\n                      showReset={!queryParam.type || queryParam.type === \"text\"}\r\n                    />\r\n                  );\r\n                })}\r\n                <Button type=\"submit\" onClick={submitGraph}>\r\n                  {locale().submit}\r\n                </Button>\r\n              </form>\r\n            </section>\r\n          ) : showGraph ? (\r\n            <GraphHolder\r\n              dataMat={graphData}\r\n              head={head}\r\n              tail={tail}\r\n              prevCallback={() => {\r\n                TravelPlot(\"prev\");\r\n              }}\r\n              nextCallback={() => {\r\n                TravelPlot(\"next\");\r\n              }}\r\n              zoomInCallback={() => {\r\n                TravelPlot(\"zoomIn\");\r\n              }}\r\n              zoomOutCallback={() => {\r\n                TravelPlot(\"zoomOut\");\r\n              }}\r\n              zoomIn={CalculateButtons().zoomIn}\r\n              zoomOut={CalculateButtons().zoomOut}\r\n              prev={CalculateButtons().prev}\r\n              next={CalculateButtons().next}\r\n            />\r\n          ) : (\r\n            <h1>{error}</h1>\r\n          )}\r\n        </React.Fragment>\r\n      </Popup>\r\n    );\r\n  }\r\n);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useHistory } from \"react-router-dom\";\r\nimport * as QueryString from \"query-string\";\r\nimport { toast, ToastContainer } from \"react-toastify\";\r\nimport { orderBy } from \"natural-orderby\";\r\nimport { find, get, indexOf, remove } from \"lodash\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport {\r\n  IConfigPage,\r\n  IConfigMethods,\r\n  IConfigGetAllMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  IConfigDeleteMethod,\r\n  IConfigInputField,\r\n  IConfigCustomAction,\r\n  IConfigGetSingleMethod,\r\n  ICustomLabels,\r\n  IConfigPagination,\r\n  IConfigGraphMethod,\r\n  IConfigDisplayField,\r\n} from \"../../common/models/config.model\";\r\nimport {\r\n  IPaginationState,\r\n  IQueryPaginationState,\r\n  IBodyPaginationState,\r\n} from \"../../common/models/states.model\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Loader } from \"../loader/loader.comp\";\r\nimport { dataHelpers } from \"../../helpers/data.helpers\";\r\nimport { paginationHelpers } from \"../../helpers/pagination.helpers\";\r\nimport { Table } from \"../table/table.comp\";\r\nimport { Cards } from \"../cards/cards.comp\";\r\nimport { QueryParams } from \"../queryParams/queryParams.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { FormPopup } from \"../formPopup/formPopup.comp\";\r\nimport { FilterField } from \"../filterField/filterField.comp\";\r\nimport {\r\n  isQueryPaginationState,\r\n  isBodyPaginationState,\r\n} from \"../../common/models/states.types.helper\";\r\nimport {\r\n  isQueryPagination,\r\n  isBodyPagination,\r\n} from \"../../common/models/config.types.helper\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./page.scss\";\r\nimport { GraphPopup } from \"../graphPopup/graphPopup.comp\";\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n  loadedFields: ILoadedFields[];\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: \"add\" | \"update\" | \"action\";\r\n  title: string;\r\n  config: IConfigPostMethod | IConfigPutMethod;\r\n  submitCallback: (body: any, containFiles: boolean) => void;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  rawData?: {};\r\n}\r\n\r\ninterface IGraphProps {\r\n  title: string;\r\n  config: IConfigGraphMethod;\r\n  rawData?: {};\r\n}\r\n\r\nconst buildInitQueryParamsAndPaginationState = (\r\n  initQueryParams: IConfigInputField[],\r\n  paginationConfig?: IConfigPagination\r\n): {\r\n  initQueryParams: IConfigInputField[];\r\n  initialPagination?: IPaginationState;\r\n} => {\r\n  let initialPagination: IPaginationState | undefined = undefined;\r\n\r\n  if (paginationConfig) {\r\n    if (isQueryPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: paginationConfig.source,\r\n        type: paginationConfig.type,\r\n        page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n        descending:\r\n          paginationConfig.params?.descending?.value === \"true\" || false,\r\n        hasPreviousPage: false,\r\n        hasNextPage: false,\r\n        sortBy: paginationConfig.params?.sortBy?.value,\r\n      };\r\n\r\n      if (\r\n        !find(initQueryParams, {\r\n          name: get(paginationConfig, \"params.page.name\", \"page\"),\r\n        })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig?.params?.page?.name,\r\n          label: paginationConfig?.params?.page?.label || \"Page\",\r\n          value: initialPagination?.page,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, {\r\n          name: get(paginationConfig, \"params.limit.name\", \"limit\"),\r\n        })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.descending &&\r\n        !find(initQueryParams, {\r\n          name: get(paginationConfig, \"params.descending.name\", \"descending\"),\r\n        })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.descending.name,\r\n          label: paginationConfig.params.descending.label || \"Descending\",\r\n          value: initialPagination?.descending,\r\n        });\r\n      }\r\n\r\n      if (\r\n        paginationConfig?.params?.sortBy &&\r\n        !find(initQueryParams, {\r\n          name: get(paginationConfig, \"params.sortBy.name\", \"sortBy\"),\r\n        })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.sortBy.name,\r\n          label: \"Sort by\",\r\n          value: initialPagination?.sortBy,\r\n        });\r\n      }\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      initialPagination = {\r\n        source: \"body\",\r\n        type: paginationConfig.type,\r\n        hasNextPage: false,\r\n        hasPreviousPage: false,\r\n        next: null,\r\n        previous: null,\r\n        limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n      };\r\n\r\n      if (\r\n        paginationConfig?.params?.limit &&\r\n        !find(initQueryParams, {\r\n          name: get(paginationConfig, \"params.limit.name\", \"limit\"),\r\n        })\r\n      ) {\r\n        initQueryParams.push({\r\n          name: paginationConfig.params.limit.name,\r\n          label: paginationConfig.params.limit.label || \"Limit\",\r\n          value: initialPagination?.limit,\r\n        });\r\n      }\r\n    } else {\r\n      throw new Error(\"unrecognized pagination\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    initQueryParams,\r\n    initialPagination,\r\n  };\r\n};\r\n\r\nconst PageComp = ({ context, loadedFields }: IProps) => {\r\n  const { page }: any = useParams();\r\n  const { push, location } = useHistory();\r\n  const { activePage, error, setError, httpService, config } = context;\r\n  const pageHeaders: any = activePage?.requestHeaders || {};\r\n  const pageMethods: IConfigMethods | undefined = activePage?.methods;\r\n  const customActions: IConfigCustomAction[] = activePage?.customActions || [];\r\n  const getAllConfig: IConfigGetAllMethod | undefined = pageMethods?.getAll;\r\n  const paginationConfig = getAllConfig?.pagination;\r\n  const infiniteScroll = paginationConfig?.type === \"infinite-scroll\";\r\n  const getSingleConfig: IConfigGetSingleMethod | undefined =\r\n    pageMethods?.getSingle;\r\n  const postConfig: IConfigPostMethod | undefined = pageMethods?.post;\r\n  const graphConfig: IConfigGraphMethod | undefined = pageMethods?.plot;\r\n  const putConfig: IConfigPutMethod | undefined = pageMethods?.put;\r\n  const deleteConfig: IConfigDeleteMethod | undefined = pageMethods?.delete;\r\n  const customLabels: ICustomLabels | undefined = {\r\n    ...config?.customLabels,\r\n    ...activePage?.customLabels,\r\n  };\r\n  const addItemLabel =\r\n    customLabels?.buttons?.addItem ||\r\n    \"+ \" + locale().add + \" \" + activePage?.itemName;\r\n  const openGraphLabel = locale().plot + \" \" + activePage?.itemName;\r\n  const addItemFormTitle =\r\n    customLabels?.formTitles?.addItem ||\r\n    locale().add + \" \" + activePage?.itemName;\r\n  const editItemFormTitle =\r\n    customLabels?.formTitles?.editItem ||\r\n    locale().update + \" \" + activePage?.itemName;\r\n  const graphTitle = locale().plot + \" \" + activePage?.itemName;\r\n  const { initQueryParams, initialPagination } =\r\n    buildInitQueryParamsAndPaginationState(\r\n      getAllConfig?.queryParams || [],\r\n      paginationConfig\r\n    );\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [openedPopup, setOpenedPopup] = useState<null | IPopupProps>(null);\r\n  const [openedGraph, setOpenedGraph] = useState<null | IGraphProps>(null);\r\n  const [queryParams, setQueryParams] =\r\n    useState<IConfigInputField[]>(initQueryParams);\r\n  const [pagination, setPagination] =\r\n    useState<IPaginationState | undefined>(initialPagination);\r\n  const [items, setItems] = useState<any[]>([]);\r\n  const [filter, setFilter] = useState<string>(\"\");\r\n\r\n  function closeFormPopup(refreshData: boolean = false) {\r\n    setOpenedPopup(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, (param) =>\r\n          [\"page\", \"limit\"].includes(param.name)\r\n        );\r\n        setQueryParams(\r\n          buildInitQueryParamsAndPaginationState(\r\n            updatedParams,\r\n            paginationConfig\r\n          ).initQueryParams\r\n        );\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  function closeGraph(refreshData: boolean = false) {\r\n    setOpenedGraph(null);\r\n\r\n    if (refreshData === true) {\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        setItems([]);\r\n        const updatedParams = [...queryParams];\r\n        remove(updatedParams, (param) =>\r\n          [\"page\", \"limit\"].includes(param.name)\r\n        );\r\n        setQueryParams(\r\n          buildInitQueryParamsAndPaginationState(\r\n            updatedParams,\r\n            paginationConfig\r\n          ).initQueryParams\r\n        );\r\n      } else {\r\n        getAllRequest();\r\n      }\r\n    }\r\n  }\r\n\r\n  async function openEditPopup(rawData: any) {\r\n    let params: IPopupProps = {\r\n      rawData,\r\n      type: \"update\",\r\n      title: editItemFormTitle,\r\n      config: putConfig as IConfigPutMethod,\r\n      getSingleConfig,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await updateItem(body, rawData, containFiles);\r\n      },\r\n    };\r\n\r\n    params.config.fields = removeUselessFields([...params.config.fields]);\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  function openCustomActionPopup(rawData: any, action: IConfigCustomAction) {\r\n    let params: IPopupProps = {\r\n      rawData,\r\n      type: \"action\",\r\n      title: action.name || \"Custom Action\",\r\n      config: action as IConfigCustomAction,\r\n      submitCallback: async (body: any, containFiles: boolean) => {\r\n        return await performAction(body, rawData, action, containFiles);\r\n      },\r\n    };\r\n\r\n    params.config.fields = removeUselessFields([...params.config.fields]);\r\n\r\n    setOpenedPopup(params);\r\n  }\r\n\r\n  async function openGraphPopup(graphConfig: IConfigGraphMethod) {\r\n    const params: IGraphProps = {\r\n      title: graphTitle,\r\n      config: graphConfig,\r\n    };\r\n\r\n    setOpenedGraph(params);\r\n  }\r\n\r\n  async function performAction(\r\n    body: any,\r\n    rawData: any,\r\n    action: IConfigCustomAction,\r\n    containFiles: boolean\r\n  ) {\r\n    const { url, requestHeaders, actualMethod } = action;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  function extractQueryParams(\r\n    params: IConfigInputField[]\r\n  ): IConfigInputField[] {\r\n    if (!paginationConfig || isQueryPagination(paginationConfig)) {\r\n      const parsedParams = QueryString.parse(location.search);\r\n      const finalQueryParams = params.map((queryParam) => {\r\n        if (typeof parsedParams[queryParam.name] !== \"undefined\") {\r\n          queryParam.value =\r\n            queryParam.type === \"boolean\"\r\n              ? parsedParams[queryParam.name] === \"true\"\r\n              : decodeURIComponent(parsedParams[queryParam.name] as any);\r\n        } else {\r\n          queryParam.value = queryParam.value || \"\";\r\n        }\r\n        return queryParam;\r\n      });\r\n\r\n      setPagination(getUpdatedPaginationState(finalQueryParams, null));\r\n\r\n      return finalQueryParams;\r\n    } else {\r\n      return params;\r\n    }\r\n  }\r\n\r\n  async function fetchPageData(params: {\r\n    actualMethod: \"get\" | \"put\" | \"post\" | \"patch\" | \"delete\" | \"view\";\r\n    url: string;\r\n    requestHeaders?: any;\r\n    dataPath: string;\r\n    dataTransform: any;\r\n    sortBy: any;\r\n  }) {\r\n    const result = await httpService.fetch({\r\n      method: params.actualMethod || \"get\",\r\n      origUrl: params.url,\r\n      queryParams,\r\n      headers: Object.assign({}, pageHeaders, params.requestHeaders || {}),\r\n    });\r\n    let extractedData = dataHelpers.extractDataByDataPath(\r\n      result,\r\n      params.dataPath\r\n    );\r\n\r\n    if (!extractedData) {\r\n      throw new Error(\"Could not extract data from response.\");\r\n    }\r\n\r\n    if (!Array.isArray(extractedData)) {\r\n      throw new Error(\"Extracted data is invalid.\");\r\n    }\r\n\r\n    if (typeof params.dataTransform === \"function\") {\r\n      extractedData = await params.dataTransform(extractedData);\r\n    }\r\n\r\n    const orderedItems = orderBy(\r\n      extractedData,\r\n      typeof params.sortBy === \"string\" ? [params.sortBy] : params.sortBy || []\r\n    );\r\n\r\n    if (paginationConfig) {\r\n      const total = paginationConfig.fields?.total\r\n        ? dataHelpers.extractDataByDataPath(\r\n            result,\r\n            paginationConfig.fields.total.dataPath\r\n          )\r\n        : undefined;\r\n      const newPaginationState = getUpdatedPaginationState(\r\n        queryParams,\r\n        result,\r\n        total\r\n      );\r\n      if (newPaginationState) {\r\n        setPagination(newPaginationState);\r\n      }\r\n    }\r\n\r\n    if (infiniteScroll) {\r\n      setItems([...items, ...orderedItems]);\r\n    } else {\r\n      setItems(orderedItems);\r\n    }\r\n  }\r\n\r\n  async function getAllRequest() {\r\n    if (infiniteScroll) {\r\n      if (pagination) {\r\n        if (isQueryPaginationState(pagination)) {\r\n          if (pagination?.page !== 1) {\r\n            setLoading(false);\r\n          } else {\r\n            setLoading(true);\r\n          }\r\n        } else if (isBodyPaginationState(pagination)) {\r\n          if (pagination.previous) {\r\n            setLoading(false);\r\n          } else {\r\n            setLoading(true);\r\n          }\r\n        } else {\r\n          throw new Error(\"unrecognized pagination source\");\r\n        }\r\n      }\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n\r\n    setError(null);\r\n\r\n    try {\r\n      if (!getAllConfig) {\r\n        throw new Error(\"Get all method is not defined.\");\r\n      }\r\n\r\n      if (paginationConfig && !pagination) {\r\n        throw new Error(\"Pagination not initialized.\");\r\n      }\r\n\r\n      const {\r\n        url,\r\n        requestHeaders,\r\n        actualMethod,\r\n        dataPath,\r\n        sortBy,\r\n        dataTransform,\r\n      } = getAllConfig;\r\n      await fetchPageData({\r\n        actualMethod: actualMethod,\r\n        url: url,\r\n        requestHeaders: requestHeaders,\r\n        dataPath: dataPath,\r\n        dataTransform: dataTransform,\r\n        sortBy: sortBy,\r\n      });\r\n    } catch (e) {\r\n      setError(e.message);\r\n    }\r\n\r\n    setLoading(false);\r\n  }\r\n\r\n  async function addItem(body: any, containFiles?: boolean, queryParams?: []) {\r\n    if (!postConfig) {\r\n      throw new Error(\"Post method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = postConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"post\",\r\n      origUrl: url,\r\n      queryParams,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function updateItem(body: any, rawData: any, containFiles?: boolean) {\r\n    if (!putConfig) {\r\n      throw new Error(\"Put method is not defined.\");\r\n    }\r\n\r\n    const { url, requestHeaders, actualMethod } = putConfig;\r\n\r\n    return await httpService.fetch({\r\n      method: actualMethod || \"put\",\r\n      origUrl: url,\r\n      rawData,\r\n      body: containFiles ? body : JSON.stringify(body),\r\n      headers: {\r\n        ...pageHeaders,\r\n        ...(requestHeaders || {}),\r\n        ...(containFiles ? {} : { \"content-type\": \"application/json\" }),\r\n      },\r\n      responseType: \"boolean\",\r\n    });\r\n  }\r\n\r\n  async function deleteItem(item: any) {\r\n    const approved: boolean = window.confirm(\r\n      \"Are you sure you want to delete this item?\"\r\n    );\r\n\r\n    if (!approved) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!deleteConfig) {\r\n        throw new Error(\"Delete method is not defined.\");\r\n      }\r\n\r\n      const { url, requestHeaders, actualMethod } = deleteConfig;\r\n      const success = await httpService.fetch({\r\n        method: actualMethod || \"delete\",\r\n        origUrl: url,\r\n        rawData: item,\r\n        headers: Object.assign({}, pageHeaders, requestHeaders || {}),\r\n        responseType: \"boolean\",\r\n      });\r\n\r\n      if (success) {\r\n        if (pagination?.type === \"infinite-scroll\") {\r\n          setItems([]);\r\n          const updatedParams = [...queryParams];\r\n          remove(updatedParams, (param) =>\r\n            [\"page\", \"limit\"].includes(param.name)\r\n          );\r\n          setQueryParams(\r\n            buildInitQueryParamsAndPaginationState(\r\n              updatedParams,\r\n              paginationConfig\r\n            ).initQueryParams\r\n          );\r\n        } else {\r\n          getAllRequest();\r\n        }\r\n      }\r\n    } catch (e) {\r\n      toast.error(e.message, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function submitQueryParams(\r\n    updatedParams: IConfigInputField[],\r\n    reset?: boolean\r\n  ) {\r\n    if (loading) {\r\n      return;\r\n    }\r\n\r\n    if (reset) {\r\n      setItems([]);\r\n      remove(updatedParams, (param) => [\"page\", \"limit\"].includes(param.name));\r\n      updatedParams = buildInitQueryParamsAndPaginationState(\r\n        updatedParams,\r\n        paginationConfig\r\n      ).initQueryParams;\r\n    }\r\n\r\n    updatedParams.map((queryParam, idx) => {\r\n      if (\r\n        queryParam.type === \"select\" &&\r\n        queryParam.value === locale().select\r\n      ) {\r\n        queryParam.value = \"\";\r\n      }\r\n    });\r\n\r\n    setQueryParams(updatedParams);\r\n    setPagination(getUpdatedPaginationState(updatedParams, null));\r\n\r\n    let paramsToUrl = [...updatedParams];\r\n\r\n    if (paginationConfig?.type === \"infinite-scroll\") {\r\n      paramsToUrl = paramsToUrl.filter(\r\n        (param) => ![\"page\", \"limit\"].includes(param.name)\r\n      );\r\n    }\r\n\r\n    // Building query string\r\n    const queryState: string = paramsToUrl\r\n      .map((queryParam, idx) => {\r\n        return `${idx === 0 ? \"?\" : \"\"}${queryParam.name}=${encodeURIComponent(\r\n          queryParam.value || \"\"\r\n        )}`;\r\n      })\r\n      .join(\"&\");\r\n\r\n    // Pushing query state to url\r\n    if (page && queryState) {\r\n      push(queryState);\r\n    }\r\n  }\r\n\r\n  function getUpdatedPaginationState(\r\n    updatedParams: IConfigInputField[],\r\n    result: any,\r\n    total?: number\r\n  ): IPaginationState | undefined {\r\n    if (!paginationConfig) {\r\n      return;\r\n    }\r\n\r\n    if (isQueryPagination(paginationConfig)) {\r\n      if (pagination && !isQueryPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IQueryPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"query\",\r\n            type: paginationConfig.type,\r\n            page: parseInt(paginationConfig.params?.page?.value || \"1\"),\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            descending:\r\n              paginationConfig.params?.descending?.value === \"true\" || false,\r\n            hasPreviousPage: false,\r\n            hasNextPage: false,\r\n            sortBy: paginationConfig.params?.sortBy?.value,\r\n          };\r\n\r\n      newState.total = total || pagination?.total;\r\n      newState.page =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.page?.name\r\n          )?.value\r\n        ) || newState.page;\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      newState.descending =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.descending?.name\r\n        )?.value === \"true\" || newState.descending;\r\n      newState.sortBy =\r\n        updatedParams.find(\r\n          (param) => param.name === paginationConfig?.params?.sortBy?.name\r\n        )?.value || newState.sortBy;\r\n      newState.hasPreviousPage = paginationHelpers.hasPreviousPage(\r\n        newState.page\r\n      );\r\n      newState.hasNextPage = paginationHelpers.hasNextPage(\r\n        newState.page,\r\n        newState.limit,\r\n        newState.total\r\n      );\r\n      return newState;\r\n    } else if (isBodyPagination(paginationConfig)) {\r\n      if (pagination && !isBodyPaginationState(pagination)) {\r\n        throw new Error(\"unexpected pagination source \" + pagination.source);\r\n      }\r\n      const newState: IBodyPaginationState = pagination\r\n        ? pagination\r\n        : {\r\n            source: \"body\",\r\n            type: paginationConfig.type,\r\n            next: result[paginationConfig.params.nextPath || locale().next],\r\n            previous:\r\n              result[paginationConfig.params.prevPath || locale().previous],\r\n            hasNextPage:\r\n              !!result[paginationConfig.params.nextPath || locale().next],\r\n            hasPreviousPage:\r\n              !!result[paginationConfig.params.prevPath || locale().previous],\r\n            limit: parseInt(paginationConfig.params?.limit?.value || \"10\"),\r\n            total: result[paginationConfig.params.countPath || \"count\"],\r\n          };\r\n      if (result) {\r\n        newState.next =\r\n          result[paginationConfig.params.nextPath || locale().next];\r\n        newState.previous =\r\n          result[paginationConfig.params.prevPath || locale().previous];\r\n        newState.hasNextPage =\r\n          !!result[paginationConfig.params.nextPath || locale().next];\r\n        newState.hasPreviousPage =\r\n          !!result[paginationConfig.params.prevPath || locale().previous];\r\n        newState.total = result[paginationConfig.params.countPath || \"count\"];\r\n      }\r\n      newState.limit =\r\n        parseInt(\r\n          updatedParams.find(\r\n            (param) => param.name === paginationConfig?.params?.limit?.name\r\n          )?.value\r\n        ) || newState.limit;\r\n      return newState;\r\n    } else {\r\n      throw new Error(\"unrecognized pagination source\");\r\n    }\r\n  }\r\n\r\n  function renderItemsUI() {\r\n    if (loading) {\r\n      return <Loader />;\r\n    }\r\n\r\n    let fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n\r\n    fields = removeUselessFields(fields);\r\n\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n    let filteredItems = items;\r\n\r\n    if (filter && fieldsToFilter.length) {\r\n      filteredItems = items.filter((item) => {\r\n        let passFilter = false;\r\n        fieldsToFilter.forEach((fieldName) => {\r\n          const value = item[fieldName];\r\n          if (\r\n            typeof value === \"string\" &&\r\n            value.toLowerCase().indexOf(filter) >= 0\r\n          ) {\r\n            passFilter = true;\r\n          }\r\n        });\r\n        return passFilter;\r\n      });\r\n    }\r\n\r\n    if (!filteredItems.length) {\r\n      return <div className=\"app-error\">{locale().nothing_to_see}</div>;\r\n    }\r\n\r\n    const getNextPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (pagination?.page && queryParams.length > 0) {\r\n              const newPage = pagination?.page + 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.next) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.next,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const getPreviousPage = paginationConfig\r\n      ? () => {\r\n          if (isQueryPagination(paginationConfig)) {\r\n            if (pagination && !isQueryPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (\r\n              pagination?.page &&\r\n              pagination.page > 1 &&\r\n              queryParams.length > 0\r\n            ) {\r\n              const newPage = pagination?.page - 1;\r\n              const updatedParams = queryParams.map((param) => {\r\n                if (param.name === paginationConfig.params?.page?.name) {\r\n                  return {\r\n                    ...param,\r\n                    value: newPage,\r\n                  };\r\n                }\r\n                return param;\r\n              });\r\n              submitQueryParams(updatedParams);\r\n            }\r\n          } else if (isBodyPagination(paginationConfig)) {\r\n            if (pagination && !isBodyPaginationState(pagination)) {\r\n              throw new Error(\r\n                \"unexpected pagination source \" + pagination.source\r\n              );\r\n            }\r\n            if (!getAllConfig || !pagination?.previous) {\r\n              return;\r\n            }\r\n            const {\r\n              requestHeaders,\r\n              actualMethod,\r\n              dataPath,\r\n              sortBy,\r\n              dataTransform,\r\n            } = getAllConfig;\r\n            fetchPageData({\r\n              actualMethod: actualMethod,\r\n              url: pagination.previous,\r\n              requestHeaders: requestHeaders,\r\n              dataPath: dataPath,\r\n              dataTransform: dataTransform,\r\n              sortBy: sortBy,\r\n            });\r\n          } else {\r\n            throw new Error(\"unrecognized pagination source\");\r\n          }\r\n        }\r\n      : null;\r\n\r\n    const callbacks = {\r\n      delete: deleteConfig ? deleteItem : null,\r\n      put: putConfig ? openEditPopup : null,\r\n      action: customActions.length ? openCustomActionPopup : () => {},\r\n      getNextPage,\r\n      getPreviousPage,\r\n    };\r\n\r\n    if (getAllConfig?.display.type === \"cards\") {\r\n      return (\r\n        <Cards\r\n          pagination={pagination}\r\n          callbacks={callbacks}\r\n          fields={fields}\r\n          items={filteredItems}\r\n          customActions={customActions}\r\n          customLabels={customLabels}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Table\r\n        pagination={pagination}\r\n        callbacks={callbacks}\r\n        fields={fields}\r\n        items={filteredItems}\r\n        customActions={customActions}\r\n        customLabels={customLabels}\r\n      />\r\n    );\r\n  }\r\n\r\n  function renderPaginationStateLabel() {\r\n    if (loading || !items.length) {\r\n      return;\r\n    }\r\n\r\n    if (!pagination || isQueryPaginationState(pagination)) {\r\n      const currentCountFrom =\r\n        ((pagination?.page || 1) - 1) * (pagination?.limit || 10) + 1;\r\n      const currentCountTo = currentCountFrom + items.length - 1;\r\n      let label: string = `${\r\n        locale().showing_result\r\n      } ${currentCountFrom}-${currentCountTo} ${locale().out_of} ${\r\n        pagination?.total\r\n      } ${locale().items}`;\r\n\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount\r\n          .replace(\":currentCountFrom\", currentCountFrom as any)\r\n          .replace(\":currentCountTo\", currentCountFrom as any)\r\n          .replace(\":totalCount\", pagination?.total as any);\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n    if (isBodyPaginationState(pagination)) {\r\n      // TODO: extract start end end in a meaningful manner from the API\r\n      // this is not something that id based pagination APIs support generally\r\n      let label: string = `Total Results: ${pagination?.total}`;\r\n      if (pagination?.type === \"infinite-scroll\") {\r\n        label = `Showing ${pagination?.total} items`;\r\n      }\r\n\r\n      if (customLabels?.pagination?.itemsCount) {\r\n        label = customLabels?.pagination?.itemsCount.replace(\r\n          \":totalCount\",\r\n          pagination?.total as any\r\n        );\r\n      }\r\n\r\n      return <p className=\"center pagination-state\">{label}</p>;\r\n    }\r\n  }\r\n\r\n  function renderPageContent() {\r\n    let fields = getAllConfig?.fields || getAllConfig?.display?.fields || [];\r\n\r\n    fields = removeUselessFields(fields);\r\n\r\n    const fieldsToFilter = fields\r\n      .filter((field) => field.filterable)\r\n      .map((field) => field.name);\r\n\r\n    //\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <QueryParams\r\n          initialParams={queryParams}\r\n          paginationConfig={paginationConfig}\r\n          submitCallback={submitQueryParams}\r\n        />\r\n        {fieldsToFilter.length > 0 && <FilterField onChange={setFilter} />}\r\n        {pagination?.total && renderPaginationStateLabel()}\r\n        {error ? <div className=\"app-error\">{error}</div> : renderItemsUI()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  function removeUselessFields(fields: any) {\r\n    let f = [...fields];\r\n    const len = f.length;\r\n    const fieldmaskData = localStorage.getItem(\"diten-fieldmask-data\");\r\n    const fieldmaskIdentifier = activePage?.fieldmaskIdentifier;\r\n\r\n    for (let i = len - 1; i >= 0; i--) {\r\n      if (\r\n        fieldmaskIdentifier !== undefined &&\r\n        fieldmaskData !== \"null\" &&\r\n        fieldmaskData !== null\r\n      ) {\r\n        if (\r\n          JSON.parse(fieldmaskData)[fieldmaskIdentifier].length !== 0 &&\r\n          !(\r\n            JSON.parse(fieldmaskData)[fieldmaskIdentifier].includes(\r\n              f[i].name\r\n            ) ||\r\n            JSON.parse(fieldmaskData)[fieldmaskIdentifier].includes(\r\n              f[i].originalName\r\n            )\r\n          )\r\n        ) {\r\n          f.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    return f;\r\n  }\r\n  useEffect(() => {\r\n    const nextActivePage: IConfigPage | null =\r\n      context?.config?.pages?.filter(\r\n        (p, pIdx) => p.id === page || pIdx + 1 === parseInt(page || \"\")\r\n      )[0] || null;\r\n    context.setActivePage(nextActivePage);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [page]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      config?.pages\r\n        .map((e) => e.id)\r\n        .includes(location.pathname.substring(1)) === false\r\n    ) {\r\n      document.location.replace(\"#/404\");\r\n    }\r\n    if (\r\n      activePage?.accessedBy.includes(\r\n        localStorage.getItem(\"diten-user-role\") || \"\"\r\n      ) === false\r\n    ) {\r\n      document.location.replace(\"#/unauthorized\");\r\n    }\r\n\r\n    const { initQueryParams, initialPagination } =\r\n      buildInitQueryParamsAndPaginationState(\r\n        getAllConfig?.queryParams || [],\r\n        paginationConfig\r\n      );\r\n\r\n    setItems([]);\r\n    setQueryParams(extractQueryParams(initQueryParams));\r\n    setPagination(initialPagination);\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [activePage]);\r\n\r\n  useEffect(() => {\r\n    // Load data when query params\r\n    if (\r\n      config?.pages\r\n        .map((e) => e.id)\r\n        .includes(location.pathname.substring(1)) === false\r\n    ) {\r\n      document.location.replace(\"#/404\");\r\n    }\r\n\r\n    if (\r\n      activePage?.accessedBy.includes(\r\n        localStorage.getItem(\"diten-user-role\") || \"\"\r\n      ) === false\r\n    ) {\r\n      document.location.replace(\"#/unauthorized\");\r\n    }\r\n    getAllRequest();\r\n\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [queryParams]);\r\n\r\n  return (\r\n    <div className=\"app-page\">\r\n      <header className=\"app-page-header\">\r\n        <hgroup>\r\n          <h2>{activePage?.name}</h2>\r\n          {activePage?.description && <h4>{activePage?.description}</h4>}\r\n        </hgroup>\r\n        {graphConfig && (\r\n          <Button\r\n            className=\"add-item\"\r\n            color=\"blue\"\r\n            onClick={() => openGraphPopup(graphConfig)}\r\n          >\r\n            {openGraphLabel}\r\n          </Button>\r\n        )}\r\n        {postConfig && (\r\n          <Button\r\n            className=\"add-item\"\r\n            color=\"green\"\r\n            onClick={() =>\r\n              setOpenedPopup({\r\n                type: \"add\",\r\n                title: addItemFormTitle,\r\n                config: postConfig,\r\n                submitCallback: addItem,\r\n              })\r\n            }\r\n          >\r\n            {addItemLabel}\r\n          </Button>\r\n        )}\r\n      </header>\r\n\r\n      <main className=\"app-page-content\">\r\n        <hr />\r\n        {renderPageContent()}\r\n      </main>\r\n      {openedPopup && (\r\n        <FormPopup\r\n          title={openedPopup.title}\r\n          closeCallback={closeFormPopup}\r\n          submitCallback={openedPopup.submitCallback}\r\n          type={openedPopup.type}\r\n          fields={openedPopup.config?.fields || []}\r\n          loadedFields={loadedFields}\r\n          rawData={openedPopup.rawData}\r\n          getSingleConfig={openedPopup.getSingleConfig}\r\n          methodConfig={openedPopup.config}\r\n        />\r\n      )}\r\n      {openedGraph && (\r\n        <GraphPopup\r\n          title={openedGraph.title}\r\n          closeCallback={closeGraph}\r\n          fields={openedGraph.config?.fields || []}\r\n          graphConfig={openedGraph.config}\r\n        />\r\n      )}\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Page = withAppContext(PageComp);\r\n","import React from \"react\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./languageSelector.scss\";\r\n\r\nexport const LanguageSelector = () => {\r\n  function setSessionLanguage(language: string) {\r\n    localStorage.setItem(\"diten-language\", language);\r\n    window.location.reload();\r\n  }\r\n  return (\r\n    <div>\r\n      {locale().language}\r\n      <div>\r\n        <Button\r\n          outlined=\"outlined\"\r\n          color=\"darkBlue\"\r\n          title=\"It\"\r\n          onClick={() => setSessionLanguage(\"it\")}\r\n        >\r\n          Ita\r\n        </Button>\r\n        <Button\r\n          outlined=\"outlined\"\r\n          color=\"darkBlue\"\r\n          title=\"En\"\r\n          onClick={() => setSessionLanguage(\"en\")}\r\n        >\r\n          Eng\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n  //\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport locale from \"../../common/locale\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport {\r\n  IConfigPage,\r\n  IConfigMethods,\r\n  IConfigGetAllMethod,\r\n  IConfigPostMethod,\r\n  IConfigPutMethod,\r\n  IConfigDeleteMethod,\r\n  IConfigInputField,\r\n  IConfigCustomAction,\r\n  IConfigGetSingleMethod,\r\n  ICustomLabels,\r\n  IConfigPagination,\r\n  IConfigGraphMethod,\r\n} from \"../../common/models/config.model\";\r\n\r\nimport \"./authPage.scss\";\r\nimport { FormPopup } from \"../formPopup/formPopup.comp\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\ninterface IPopupProps {\r\n  type: \"add\";\r\n  title: string;\r\n  config: IConfigPostMethod | IConfigPutMethod;\r\n  submitCallback: (body: any, containFiles: boolean) => void;\r\n  getSingleConfig?: IConfigGetSingleMethod;\r\n  rawData?: {};\r\n}\r\n\r\nconst AuthPageComp = ({ context }: IProps) => {\r\n  //const { location, replace } = useHistory();\r\n  const [user, setUser] = useState<string>(\"\");\r\n  const [pwd, setPwd] = useState<string>(\"\");\r\n  const [tenant, setTenant] = useState<string>(\"\");\r\n  const { setError, httpService } = context;\r\n  const [openedAddTenant, setOpenedAddTenant] =\r\n    useState<null | IPopupProps>(null);\r\n  const postConfig: IConfigPostMethod | undefined = {\r\n    url: \"/tenants/\",\r\n    actualMethod: \"post\",\r\n    requestHeaders: { \"content-type\": \"application/json\" },\r\n    fields: [\r\n      { name: \"token\", type: \"text\", value: \"\", label: \"Token\" },\r\n      { name: \"_id\", type: \"text\", value: \"\", label: \"ID\" },\r\n      {\r\n        name: \"organization\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        label: \"Organizzazione\",\r\n      },\r\n      { name: \"address\", type: \"text\", value: \"\", label: \"Indirizzo\" },\r\n      { name: \"email\", type: \"email\", value: \"\", label: \"e-mail\" },\r\n      { name: \"phone\", type: \"text\", value: \"\", label: \"Telefono\" },\r\n      {\r\n        name: \"admin_username\",\r\n        type: \"text\",\r\n        value: \"\",\r\n        label: \"Username Amministratore\",\r\n      },\r\n      {\r\n        name: \"admin_password\",\r\n        type: \"password\",\r\n        value: \"\",\r\n        label: \"Password Amministratore\",\r\n      },\r\n    ],\r\n    queryParams: [],\r\n  };\r\n\r\n  async function submitForm(e: any) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const credentials = {\r\n        username: `${user}`,\r\n        password: `${pwd}`,\r\n        tenant: `${tenant}`,\r\n      };\r\n      const result = await httpService.fetch({\r\n        method: \"post\",\r\n        origUrl: httpService.loginUrl,\r\n        body: JSON.stringify(credentials),\r\n        headers: { \"content-type\": \"application/json\" },\r\n      });\r\n      if (!result) {\r\n        throw new Error(locale().login_error);\r\n      }\r\n      if (result.status === 401) {\r\n        throw new Error(locale().login_error);\r\n      }\r\n\r\n      // comment to ENABLE LOGIN FOR DIFFERENT USERS THAN ADMIN\r\n      /* if (result.user.type !== \"admin\") {\r\n        throw new Error(locale().login_unauthorised_user);\r\n      }\r\n*/\r\n      localStorage.setItem(\"diten-token\", result.token);\r\n      localStorage.setItem(\r\n        \"diten-token-expiration-time\",\r\n        result.token_expiration_time\r\n      );\r\n      localStorage.setItem(\"diten-username\", result.user.username);\r\n      localStorage.setItem(\"diten-user-role\", result.user.type);\r\n      localStorage.setItem(\"diten-user-tenant\", tenant);\r\n      //localStorage.setItem(\"diten-user-fieldmask\", result.user.fieldmask);\r\n      localStorage.setItem(\"diten-login-time\", new Date().getTime().toString());\r\n\r\n      if (result.user.fieldmask !== null) {\r\n        const fieldmaskData = await httpService.fetch({\r\n          method: \"get\",\r\n          origUrl: httpService.baseUrl + \"/fieldmasks/\" + result.user.fieldmask,\r\n          headers: { \"content-type\": \"application/json\" },\r\n        });\r\n        console.log(fieldmaskData);\r\n        localStorage.setItem(\r\n          \"diten-fieldmask-data\",\r\n          JSON.stringify(fieldmaskData)\r\n        );\r\n      } else {\r\n        localStorage.setItem(\"diten-fieldmask-data\", \"null\");\r\n      }\r\n\r\n      window.location.replace(\"/\");\r\n\r\n      //const { from } = location.state || { from: { pathname: \"/\" } };\r\n      //replace(from);\r\n    } catch (e) {\r\n      setError(e.message);\r\n      toast.error(e.message, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n    }\r\n  }\r\n\r\n  function handleUserChange(event: any) {\r\n    setUser(event.target.value);\r\n  }\r\n\r\n  function handlePwdChange(event: any) {\r\n    setPwd(event.target.value);\r\n  }\r\n\r\n  function handleTenantChange(event: any) {\r\n    setTenant(event.target.value);\r\n  }\r\n\r\n  function closeAddTenantPopup() {\r\n    setOpenedAddTenant(null);\r\n  }\r\n\r\n  async function addTenant(body: any) {\r\n    if (!postConfig) {\r\n      throw new Error(\"Post method is not defined.\");\r\n    }\r\n\r\n    const tokenHead = body[\"token\"];\r\n\r\n    delete body[\"token\"];\r\n\r\n    const result = await httpService.fetch({\r\n      method: \"post\",\r\n      origUrl: httpService.baseUrl + \"/tenants\",\r\n      body: JSON.stringify(body),\r\n      headers: { \"content-type\": \"application/json\", Authorization: tokenHead },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"auth-page\">\r\n      <div className=\"title-wrapper\">\r\n        <div className=\"title-section\">Measurify</div>\r\n        <br />\r\n        <div className=\"subtitle-section\">From the edge to cloud and back</div>\r\n      </div>\r\n      <div className=\"language-wrapper\">\r\n        <LanguageSelector />\r\n      </div>\r\n      <br />\r\n      <br />\r\n      <div className=\"login-section\">\r\n        <h4>{locale().login}</h4>\r\n        <form className=\"form-content\" onSubmit={submitForm}>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().username}</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              placeholder={locale().username_suggestion}\r\n              onChange={handleUserChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().password}</label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              placeholder={locale().password_suggestion}\r\n              onChange={handlePwdChange}\r\n            />\r\n          </div>\r\n          <div className=\"form-row row\">\r\n            <label>{locale().tenant}</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"tenant\"\r\n              placeholder={locale().tenant_suggestion}\r\n              onChange={handleTenantChange}\r\n            />\r\n          </div>\r\n          <div className=\"buttons-wrapper center\">\r\n            <Button type=\"submit\" onClick={submitForm} color=\"green\">\r\n              {locale().submit}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n        <br />\r\n\r\n        <div className=\"form-content\">\r\n          <div className=\"form-row row\">\r\n            <h4>{locale().add_tenant}</h4>\r\n            <div className=\"buttons-wrapper center\"></div>\r\n            <Button\r\n              title={locale().add_tenant}\r\n              onClick={() =>\r\n                setOpenedAddTenant({\r\n                  type: \"add\",\r\n                  title: locale().add_tenant,\r\n                  config: postConfig,\r\n                  submitCallback: addTenant,\r\n                })\r\n              }\r\n              color=\"green\"\r\n            >\r\n              <i className=\"fa fa-plus-circle\" aria-hidden=\"true\"></i>\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {openedAddTenant && (\r\n        <FormPopup\r\n          title={openedAddTenant.title}\r\n          closeCallback={closeAddTenantPopup}\r\n          submitCallback={openedAddTenant.submitCallback}\r\n          fields={openedAddTenant.config?.fields || []}\r\n          rawData={openedAddTenant.rawData}\r\n          getSingleConfig={openedAddTenant.getSingleConfig}\r\n          methodConfig={openedAddTenant.config}\r\n        />\r\n      )}\r\n      <ToastContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const AuthPage = withAppContext(AuthPageComp);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nimport \"./homePage.scss\";\r\n\r\nconst HomePageComp = () => {\r\n  useEffect(() => {});\r\n  return (\r\n    <div className=\"home-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">\r\n          {locale().welcome_hp}\r\n          <br />\r\n          <br />\r\n          {locale().left_bar_descr_hp}\r\n          <br />\r\n          <br />\r\n          {locale().right_bar_descr_hp}\r\n          <br />\r\n          <br />\r\n          {locale().session_expire_info_hp}\r\n          <br />\r\n          <br />\r\n          <a\r\n            href=\"https://github.com/measurify/server/tree/r2.0\"\r\n            target=\"_blank\"\r\n            title=\"https://github.com/measurify/server/tree/r2.0\"\r\n          >\r\n            {locale().github_page_hp}\r\n          </a>\r\n          <br />\r\n          <br />\r\n          <a\r\n            href=\"https://github.com/measurify/server/issues\"\r\n            target=\"_blank\"\r\n            title=\"https://github.com/measurify/server/issues\"\r\n          >\r\n            {locale().github_issue_page_hp}\r\n          </a>\r\n          <br />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HomePage = withAppContext(HomePageComp);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nimport \"./notFoundPage.scss\";\r\n\r\nconst notFoundPageComp = () => {\r\n  return (\r\n    <div className=\"notFound-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">\r\n          {locale().oh_no}\r\n          <br />\r\n          <br />\r\n          {locale().broken_link}\r\n          <br />\r\n          <br />\r\n          <a\r\n            href=\"https://github.com/measurify/server/issues\"\r\n            target=\"_blank\"\r\n            title=\"https://github.com/measurify/server/issues\"\r\n          >\r\n            {locale().github_issue_page_hp}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const NotFoundPage = withAppContext(notFoundPageComp);\r\n","import React, { useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./navigation.scss\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport { faTimes, faBars } from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(faTimes, faBars);\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\nconst NavigationComp = ({ context: { config } }: IProps) => {\r\n  const [isOpened, setIsOpened] = useState<boolean>(false);\r\n\r\n  return (\r\n    <nav className=\"app-nav\">\r\n      <Button className=\"app-nav-opener\" onClick={() => setIsOpened(!isOpened)}>\r\n        {isOpened ? (\r\n          <i className=\"fa fa-times\" aria-hidden=\"true\"></i>\r\n        ) : (\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n        )}\r\n      </Button>\r\n\r\n      <div className={`app-nav-wrapper ${isOpened ? \"opened\" : \"\"}`}>\r\n        <div className=\"app-nav-links\">\r\n          {(config?.pages || []).map((page, idx) => {\r\n            if (page.accessedBy === undefined) {\r\n              return;\r\n            }\r\n            if (\r\n              page.accessedBy.includes(\r\n                localStorage.getItem(\"diten-user-role\") || \"\"\r\n              )\r\n            )\r\n              return (\r\n                <NavLink\r\n                  to={`/${page.id || idx + 1}`}\r\n                  activeClassName=\"active\"\r\n                  key={`page_${idx}`}\r\n                  onClick={() => setIsOpened(false)}\r\n                >\r\n                  {page.name}\r\n                </NavLink>\r\n              );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport const Navigation = withAppContext(NavigationComp);\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\nimport { Button } from \"../button/button.comp\";\r\nimport locale from \"../../common/locale\";\r\n\r\nimport \"./rightbar.scss\";\r\nimport { LanguageSelector } from \"../languageSelector/languageSelector\";\r\n\r\nimport fontawesome from \"@fortawesome/fontawesome\";\r\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser,\r\n} from \"@fortawesome/fontawesome-free-solid\";\r\n\r\nfontawesome.library.add(\r\n  faUserTie,\r\n  faUserGraduate,\r\n  faUserCog,\r\n  faUserTag,\r\n  faUser\r\n);\r\n\r\ninterface IProps {\r\n  context: IAppContext;\r\n}\r\n\r\nconst RightBarComp = ({ context: { config } }: IProps) => {\r\n  const [username, setUsername] = useState<string>();\r\n  const [role, setRole] = useState<string>();\r\n  const [tenant, setTenant] = useState<string>();\r\n  const [loginTime, setLoginTime] = useState<number>();\r\n  const [tknExpTime, setTknExpTime] = useState<string>();\r\n  const [displayTime, setDisplayTime] = useState<string>(\"00:00\");\r\n\r\n  function logOut() {\r\n    localStorage.clear();\r\n    document.location.replace(\"/\");\r\n  }\r\n\r\n  function renderIcon() {\r\n    if (role === \"admin\") {\r\n      return (\r\n        <i className=\"fa fa-user-tie\" aria-hidden=\"true\" title=\"Admin\"></i>\r\n      );\r\n    } else if (role === \"provider\") {\r\n      return (\r\n        <i\r\n          className=\"fa fa-user-graduate\"\r\n          aria-hidden=\"true\"\r\n          title=\"Provider\"\r\n        ></i>\r\n      );\r\n    } else if (role === \"analyst\") {\r\n      return (\r\n        <i className=\"fa fa-user-cog\" aria-hidden=\"true\" title=\"Analyst\"></i>\r\n      );\r\n    } else if (role === \"supplier\") {\r\n      return (\r\n        <i className=\"fa fa-user-tag\" aria-hidden=\"true\" title=\"Supplier\"></i>\r\n      );\r\n    } else {\r\n      return (\r\n        <i className=\"fa fa-user\" aria-hidden=\"true\" aria-label=\"User\"></i>\r\n      );\r\n    }\r\n  }\r\n\r\n  function CalcEnding() {\r\n    let t0;\r\n    if (loginTime === undefined) {\r\n      const retryLoginTime = localStorage.getItem(\"diten-login-time\");\r\n      if (retryLoginTime !== null) {\r\n        t0 = parseInt(retryLoginTime);\r\n\r\n        setLoginTime(parseInt(retryLoginTime));\r\n      } else {\r\n        t0 = Date.now();\r\n      }\r\n    } else {\r\n      t0 = loginTime;\r\n    }\r\n    const duration = DurationToMilliSeconds();\r\n    const endTime = t0 + duration;\r\n\r\n    let remainingSec = (endTime - Date.now()) / 1000;\r\n    //remainingSec = remainingSec > 0 ? remainingSec : 0;\r\n    if (remainingSec <= 0) {\r\n      localStorage.clear();\r\n      setDisplayTime(locale().session_expired);\r\n      return;\r\n    }\r\n\r\n    const mins = Math.floor(remainingSec / 60);\r\n    const secs = Math.floor(remainingSec % 60);\r\n    setDisplayTime(mins + \" : \" + (\"0\" + secs).slice(-2));\r\n  }\r\n\r\n  function DurationToMilliSeconds() {\r\n    let exp;\r\n    if (tknExpTime === undefined) {\r\n      const retryTokenExpiration = localStorage.getItem(\r\n        \"diten-token-expiration-time\"\r\n      );\r\n      if (retryTokenExpiration !== null) {\r\n        exp = retryTokenExpiration;\r\n        setTknExpTime(retryTokenExpiration);\r\n      } else {\r\n        exp = \"5m\";\r\n      }\r\n    } else {\r\n      exp = tknExpTime;\r\n    }\r\n    if (exp.endsWith(\"h\")) {\r\n      return parseInt(exp.slice(0, -1)) * 60 * 60 * 1000;\r\n    } else if (exp.endsWith(\"m\")) {\r\n      return parseInt(exp.slice(0, -1)) * 60 * 1000;\r\n    } else if (exp.endsWith(\"s\")) {\r\n      return parseInt(exp.slice(0, -1)) * 1000;\r\n    }\r\n    //default case, right now the same as seconds\r\n    else {\r\n      return parseInt(exp.slice(0, -1)) * 1000;\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const username = localStorage.getItem(\"diten-username\");\r\n    const role = localStorage.getItem(\"diten-user-role\");\r\n    const tenant = localStorage.getItem(\"diten-user-tenant\");\r\n    const loginTime = localStorage.getItem(\"diten-login-time\");\r\n    const tokenExpiration = localStorage.getItem(\"diten-token-expiration-time\");\r\n    setUsername(username !== null ? username : \"\");\r\n    setRole(role !== null ? role : \"\");\r\n    setTenant(tenant !== null && tenant !== \"\" ? tenant : \"-\");\r\n    setTknExpTime(tokenExpiration !== null ? tokenExpiration : \"300m\");\r\n    setLoginTime(loginTime !== null ? parseInt(loginTime) : Date.now());\r\n\r\n    setTimeout(() => {\r\n      CalcEnding();\r\n    }, 1000);\r\n  }, [displayTime]);\r\n  return (\r\n    <div className=\"rightbar\">\r\n      <h2>\r\n        {locale().welcome + \" \"}\r\n        <b>{username}</b>\r\n        <br />\r\n        {locale().role + \" \"}\r\n        {renderIcon()}\r\n      </h2>\r\n      <h3>\r\n        {locale().tenant + \" \"}\r\n        <b>{tenant}</b>\r\n        <br />\r\n        {displayTime !== locale().session_expired\r\n          ? locale().session_expire_in + displayTime\r\n          : displayTime}\r\n      </h3>\r\n\r\n      <br />\r\n      <div className=\"logout-wrapper\">\r\n        <Button outlined=\"outlined\" color=\"red\" onClick={() => logOut()}>\r\n          {locale().logout}\r\n        </Button>\r\n      </div>\r\n\r\n      <br />\r\n      <hr />\r\n\r\n      <h2>\r\n        <LanguageSelector />\r\n      </h2>\r\n      <br />\r\n      <hr />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const RightBar = withAppContext(RightBarComp);\r\n","import React from 'react';\r\nimport { ICustomStyles } from '../../common/models/config.model';\r\n\r\ninterface IProps {\r\n  styles: ICustomStyles\r\n}\r\n\r\nexport const CustomStyles = ({ styles }: IProps) => {\r\n  const cssVars = styles.vars || {};\r\n  const arr = [];\r\n  \r\n  for (const key in cssVars) {\r\n    arr.push(`--${key}: ${(cssVars as any)[key]}`);\r\n  }\r\n\r\n  return (\r\n    <style dangerouslySetInnerHTML={{ __html: `\r\n      :root {\r\n        ${arr.join(';')}\r\n      }\r\n    ` }}>\r\n    </style>\r\n  );\r\n};","import \"./unauthorizedPage.scss\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport locale from \"../../common/locale\";\r\nimport { IAppContext } from \"../app.context\";\r\nimport { withAppContext } from \"../withContext/withContext.comp\";\r\n\r\nconst notAuthPageComp = () => {\r\n  return (\r\n    <div className=\"unAuth-page\">\r\n      <div className=\"info-box\">\r\n        <div className=\"info-text\">{locale().unauthorised_user}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const UnauthorizedPage = withAppContext(notAuthPageComp);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  HashRouter as Router,\r\n  Route,\r\n  Switch,\r\n  Redirect,\r\n  NavLink,\r\n} from \"react-router-dom\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport ConfigService from \"../services/config.service\";\r\nimport { IConfig, IConfigPage } from \"../common/models/config.model\";\r\nimport { Page } from \"../components/page/page.comp\";\r\nimport { AuthPage } from \"../components/authPage/authPage.comp\";\r\nimport { HomePage } from \"../components/homePage/homePage\";\r\nimport { NotFoundPage } from \"../components/notFoundPage/notFoundPage\";\r\nimport { Navigation } from \"../components/navigation/navigation.comp\";\r\nimport { RightBar } from \"../components/rightbar/rightbar\";\r\nimport { AppContext } from \"./app.context\";\r\nimport HttpService from \"../services/http.service\";\r\nimport { CustomStyles } from \"./customStyles/customStyles.comp\";\r\n\r\nimport \"./app.scss\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { remoteConfig } from \"firebase-admin\";\r\nimport locale from \"../common/locale\";\r\nimport { UnauthorizedPage } from \"./unauthorizedPage/unauthorizedPage\";\r\n\r\ninterface ILoadedFields {\r\n  fieldName: string;\r\n  values: Array<string>;\r\n}\r\n\r\nconst httpService = new HttpService();\r\nconst defaultAppName: string = \"Measurify GUI\";\r\n\r\nfunction changeFavicon(src: string) {\r\n  const link = document.createElement(\"link\");\r\n  const oldLink = document.getElementById(\"favicon\");\r\n  link.id = \"favicon\";\r\n  link.rel = \"shortcut icon\";\r\n  link.href = src;\r\n  if (oldLink) {\r\n    document.head.removeChild(oldLink);\r\n  }\r\n  document.head.appendChild(link);\r\n}\r\n\r\nfunction App() {\r\n  const [loadedFields, setLoadedFields] = useState<ILoadedFields[]>(\r\n    Array<ILoadedFields>(0)\r\n  );\r\n  const [fetchedData, setFetchedData] = useState<boolean>();\r\n  const [firstLoad, setFirstLoad] = useState<boolean>(true);\r\n  const [config, setConfig] = useState<IConfig | null>(null);\r\n  const [activePage, setActivePage] = useState<IConfigPage | null>(\r\n    config?.pages?.[0] || null\r\n  );\r\n  const [error, setError] = useState<string | null>(null);\r\n  const appName: string = config?.name || defaultAppName;\r\n\r\n  async function loadConfig(url?: string): Promise<void> {\r\n    try {\r\n      const windowConfig = (window as any).RESTool?.config;\r\n\r\n      let remoteConfig: IConfig;\r\n\r\n      // Try to load config from window object first\r\n      if (!url && windowConfig) {\r\n        remoteConfig = Object.assign({}, windowConfig, {});\r\n      } else {\r\n        remoteConfig = url\r\n          ? await ConfigService.getRemoteConfig(url)\r\n          : await ConfigService.loadDefaultConfig();\r\n      }\r\n\r\n      // Setting global config for httpService\r\n\r\n      httpService.baseUrl = remoteConfig.baseUrl || \"\";\r\n      httpService.loginUrl = remoteConfig.loginUrl || \"\";\r\n      httpService.errorMessageDataPath =\r\n        remoteConfig.errorMessageDataPath || \"\";\r\n      httpService.unauthorizedRedirectUrl =\r\n        remoteConfig.unauthorizedRedirectUrl || \"\";\r\n      httpService.requestHeaders = remoteConfig.requestHeaders || {};\r\n      document.title = remoteConfig.name || defaultAppName;\r\n\r\n      if (remoteConfig?.favicon) {\r\n        changeFavicon(remoteConfig.favicon);\r\n      }\r\n\r\n      if (remoteConfig?.remoteUrl) {\r\n        return await loadConfig(remoteConfig.remoteUrl);\r\n      }\r\n\r\n      setConfig(remoteConfig);\r\n    } catch (e) {\r\n      console.error(\"Could not load config file\", e);\r\n    }\r\n\r\n    setFirstLoad(false);\r\n  }\r\n\r\n  async function preloadData() {\r\n    const resultsData = await httpService.fetch({\r\n      method: \"get\",\r\n      origUrl: httpService.baseUrl + \"v1/types\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n    });\r\n\r\n    var tempLD = Array<ILoadedFields>(Object.keys(resultsData).length).fill({\r\n      fieldName: \"\",\r\n      values: [],\r\n    });\r\n    const keys = Object.keys(resultsData);\r\n    const values: Array<string> = Object.values(resultsData);\r\n\r\n    for (var i in tempLD) {\r\n      tempLD[i] = { fieldName: keys[i], values: Object.values(values[i]) };\r\n    }\r\n\r\n    setLoadedFields(tempLD);\r\n  }\r\n\r\n  function scrollToTop(scrollDuration: number = 250) {\r\n    var cosParameter = window.scrollY / 2,\r\n      scrollCount = 0,\r\n      oldTimestamp = performance.now();\r\n\r\n    function step(newTimestamp: number) {\r\n      scrollCount += Math.PI / (scrollDuration / (newTimestamp - oldTimestamp));\r\n\r\n      if (scrollCount >= Math.PI) {\r\n        window.scrollTo(0, 0);\r\n      }\r\n\r\n      if (window.scrollY === 0) {\r\n        return;\r\n      }\r\n\r\n      window.scrollTo(\r\n        0,\r\n        Math.round(cosParameter + cosParameter * Math.cos(scrollCount))\r\n      );\r\n      oldTimestamp = newTimestamp;\r\n      window.requestAnimationFrame(step);\r\n    }\r\n\r\n    window.requestAnimationFrame(step);\r\n  }\r\n\r\n  useEffect(() => {\r\n    loadConfig();\r\n    setFetchedData(false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { isValid, errorMessage } = ConfigService.validateConfig(config);\r\n\r\n    if (!isValid) {\r\n      setError(errorMessage);\r\n      toast.error(errorMessage, {\r\n        position: toast.POSITION.TOP_CENTER,\r\n      });\r\n      return;\r\n    }\r\n  }, [config]);\r\n\r\n  const tkn = localStorage.getItem(\"diten-token\");\r\n\r\n  if (tkn === null)\r\n    return (\r\n      <div className=\"restool-app\">\r\n        <AppContext.Provider\r\n          value={{\r\n            config,\r\n            activePage,\r\n            setActivePage,\r\n            error,\r\n            setError,\r\n            httpService,\r\n          }}\r\n        >\r\n          <Router>\r\n            <Route path=\"/\" component={AuthPage} />\r\n          </Router>\r\n        </AppContext.Provider>\r\n      </div>\r\n    );\r\n\r\n  if (tkn !== null && fetchedData === false) {\r\n    preloadData();\r\n\r\n    setFetchedData(true);\r\n  }\r\n\r\n  return (\r\n    <div className=\"restool-app\">\r\n      {!config ? (\r\n        <div className=\"app-error\">\r\n          {firstLoad\r\n            ? \"Loading Configuration...\"\r\n            : \"Could not find config file.\"}\r\n        </div>\r\n      ) : (\r\n        <AppContext.Provider\r\n          value={{\r\n            config,\r\n            activePage,\r\n            setActivePage,\r\n            error,\r\n            setError,\r\n            httpService,\r\n          }}\r\n        >\r\n          {config.customStyles && <CustomStyles styles={config.customStyles} />}\r\n          <Router>\r\n            <aside>\r\n              <NavLink to=\"/home\" className=\"nav-wrap\">\r\n                {appName}\r\n              </NavLink>\r\n              {<Navigation />}\r\n            </aside>\r\n            {config && (\r\n              <Switch>\r\n                <Route exact path=\"/home\" component={() => <HomePage />} />\r\n                <Route\r\n                  exact\r\n                  path=\"/unauthorized\"\r\n                  component={UnauthorizedPage}\r\n                />\r\n                <Route exact path=\"/404\" component={NotFoundPage} />\r\n                <Route\r\n                  exact\r\n                  path=\"/:page\"\r\n                  component={() => <Page loadedFields={loadedFields} />}\r\n                />\r\n\r\n                <Redirect path=\"/\" to=\"/home\" />\r\n                <Route path=\"*\" component={NotFoundPage} />\r\n              </Switch>\r\n            )}\r\n            <div className=\"right-bar\">\r\n              <RightBar />\r\n            </div>\r\n            <ToastContainer\r\n              position={toast.POSITION.TOP_CENTER}\r\n              autoClose={4000}\r\n              draggable={false}\r\n            />\r\n          </Router>\r\n        </AppContext.Provider>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/app';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport './index.scss';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}